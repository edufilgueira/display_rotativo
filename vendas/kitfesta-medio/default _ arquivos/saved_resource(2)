var Publish_Checkout=new(function(){var _self=this;var _editable=typeof HTML_Load=='undefined'?false:true;var _totalOffer=0;var _config={idOffer:null,offerOrder:'before',returnUrl:'',offerTheme:'blue',dataThemeCheckout:'theme_00',offerHeight:200,offerPosition:'left',itemDisplay:'vertical',itemPosition:'left'};var _moneySet={6:{prefix:'U$ ',thousands:',',decimal:'.',affixesStay:false,symbolStay:false},19:{prefix:'R$ ',thousands:'.',decimal:',',affixesStay:false,symbolStay:false}};var _response={idOffer:null,idItems:[]};var STRIPE;var password;var checkoutType;var configStyle;this.buildOfferLogin=function(node,checkoutType){Publish_Translate.get('loginMenu',function(data){var login=new Publish_LoginMenu(data,null,{auth:'register'});login.setPassword(password);login.onComplete(function(response){_self.eventClickNext();});$(node).empty();if(checkoutType=='CheckoutBox'){$(node).html(login.getContainer());}else if(checkoutType=='CheckoutTwoSteps'){$(node).html(login.getContainerStep());}
$('<label>').addClass('steps-offer-account-text').text($(node).attr('translate-login-signup')).prependTo(node);});};this.attachEvent=function(container,config,preview){function _adjustTableToMobile(elem){elem.find('.create-checkout-offer-screen').css({'max-height':'400px','border':'none'});$(elem.find('table thead tr th').get(1)).css({'width':'15%'});if(elem.parent().data('themeCheckout')=='theme_01'){$(elem.find('table thead tr th').get(2)).css({'width':'40%'});}else{$(elem.find('table thead tr th').get(2)).css({'width':'18%'});}
$(elem.find('table thead tr th').get(3)).css({'width':'5%'});$(elem.find('table thead tr th').get(5)).css({'width':'17%'});$(elem.find('table thead tr th').get(4)).css('display','none');$(elem.find('table tbody tr td').get(4)).css('display','none');}
function _applyTwoStepsStyles(){configStyle=config;$(container).find('.checkout-twosteps-header-title').text(config.headerTitle);$(container).find('.checkout-twosteps-step-one-title').text(config.stepOneTitle);$(container).find('.checkout-twosteps-step-one-description').text(config.stepOneDescription);$(container).find('.checkout-twosteps-step-two-title').text(config.stepTwoTitle);$(container).find('.checkout-twosteps-step-two-description').text(config.stepTwoDescription);$(container).find('.checkout-twosteps-button-text').text(config.buttonText);$(container).find('.checkout-twosteps-header-title').css('color',config.headerTitleColor);$(container).find('.checkout-offer-header').css('background-color',config.headerBoxColor);$(container).find('.checkout-steps-band').css('background-color',config.headerBoxColor);$(container).find('.checkout-steps-band-pointer').css('border-color',"transparent transparent "+config.headerBoxColor+" transparent");$(container).find('.steps-offer-title').css('color',config.stepTitleColor);$(container).find('.steps-offer-description').css('color',config.stepDescriptionColor);$(container).find('.steps-offer-buttons-next').css('background-color',config.buttonColor).css('border-color',config.buttonBorderColor).css('color',config.buttonTextColor);$(container).find('.steps-offer-buttons-buy').css('background-color',config.buttonColor).css('border-color',config.buttonBorderColor).css('color',config.buttonTextColor);$(container).find('.steps-offer-content .steps-offer-title').css('color',config.stepTitleColor);$(container).find('.steps-offer-content.ativo .steps-offer-title').css('color',config.activeStepTitleColor);if(typeof HTML_Load=='undefined'){$(container).find('.steps-offer-content').on("change",function(){$(container).find('.steps-offer-content .steps-offer-title').css('color',config.stepTitleColor);$(container).find('.steps-offer-content.ativo .steps-offer-title').css('color',config.activeStepTitleColor);});}}
password=typeof config.password!='undefined'&&config.password==false?false:true;if(typeof config.idOffer=='undefined'&&typeof config.itemDisplay=='undefined'&&typeof config.itemPosition=='undefined'&&typeof config.offerHeight=='undefined'&&typeof config.offerOrder=='undefined'&&typeof config.offerPosition=='undefined'&&typeof config.offerTheme=='undefined'&&typeof config.dataThemeCheckout=='undefined'&&typeof config.returnUrl=='undefined'){config=_config;}
var contentOffers=$(container).find('.create-checkout-content');var contentTable=contentOffers.find('.create-checkout-striped-table tbody');var steps=$(container).find('.steps-offer-row');var contentSteps=$(container).find('.content-of-step');var contentFinish=$(container).find('.steps-offer-confirm');var buttonPreview=$(container).find('.steps-offer-buttons-preview');var buttonBuy=$(container).find('.steps-offer-buttons-buy');var buttonNext=$(container).find('.steps-offer-buttons-next');var content=$(container).find('.checkoutBox');var btnMore=$(container).find('.checkout-item-description-btn-more');var btnMoreOptional=$(container).find('.checkout-item-description-btn-more-optional');var containerOption=$(container).find('.table-optional-items');var loginUser=$(container).find('.steps-offer-user');var _expireOffer=false;var link=config.link?JSON.parse(config.link):null;checkoutType=$(container).data('item');if((checkoutType)=='CheckoutTwoSteps'){_applyTwoStepsStyles();}
content.attr({'return-url':config.returnUrl,'theme':config.offerTheme?config.offerTheme:'blue','data-theme-checkout':config.dataThemeCheckout?config.dataThemeCheckout:'theme_00',});contentSteps.find('.create-checkout-offer-screen').css('height',(config.offerHeight?config.offerHeight:200)+'px');contentSteps.find('.create-checkout-image-offer').css('float',config.offerPosition?config.offerPosition:'left');if(_editable){if(HTML_Load.getConfig('device')=='mobile'){_adjustTableToMobile(contentSteps);}}else{if(Publicar.getOptions('device')=='mobile'){_adjustTableToMobile(contentSteps);}}
$(steps).find('.steps-offer-content').each(function(){var label=$(this).find('label');var aux='calc(50% - '+(label.width()/2)+'px)';label.css('left',aux);});if(config.itemDisplay=='horizontal'){containerOption.css('width','calc(50% - 10px)');contentOffers.find('.create-checkout-striped-table').css('width','calc(50% - 10px)');if(config.itemPosition=='left'){containerOption.css('float','right');contentOffers.find('.create-checkout-striped-table').css('float','left');}else{containerOption.css('float','left');contentOffers.find('.create-checkout-striped-table').css('float','right');}}else{containerOption.css({width:'100%',float:'none'});contentOffers.find('.create-checkout-striped-table').css({width:'100%',float:'none'});}
var conditionalScheme=new Array();function _verifyConditions(){for(var i in conditionalScheme){var check=true;for(var j in conditionalScheme[i]){if(!containerOption.find('.table-options-items-content[data-reference='+conditionalScheme[i][j]+']').hasClass('checked')){check=false;break;}}
var item=containerOption.find('.table-options-items-content[data-reference='+i+']');if(check){item.removeClass('disabledOfferTable');}else{if(item.find('.table-options-items-checkbox input').prop('checked')){item.find('.table-options-items-checkbox input').prop('checked',false);contentOffers.find('.create-checkout-striped-table tbody tr[data-id='+item.attr('data-id')+'] .checkout-item-trash').trigger('click');}
item.removeClass('disabledOfferTable').addClass('disabledOfferTable');}}}
function _updateSubtotal(){var discount=0;_totalOffer=0;var moeda;var checkoutType=content.data('item');contentOffers.find('.create-checkout-striped-table tbody tr').each(function(){moeda=$(this).attr('data-moeda');if($(this).css('display')!='none'){if($(this).attr('data-discount')>0){if($(this).attr('data-discount-type')=='general'){discount+=parseInt($(this).attr('data-discount'));_totalOffer+=parseFloat($(this).attr('data-amount'));}else{_totalOffer+=parseFloat($(this).attr('data-amount'))*((100-$(this).attr('data-discount'))/100);}}else{_totalOffer+=parseFloat($(this).attr('data-amount'));}
_totalOffer+=parseFloat($(this).attr('data-shipping'))?parseFloat($(this).attr('data-shipping')):0;}});$(contentOffers).find('.create-checkout-subtotal-value').text(_formatCoin((_totalOffer*((100-discount)/100)).toFixed(2),moeda));$(contentFinish).find('.create-checkout-subtotal-value-preview').text(_formatCoin((_totalOffer*((100-discount)/100)).toFixed(2),moeda));content.attr('total-amount',_totalOffer);if(checkoutType=='CheckoutTwoSteps'&&!_editable&&Publicar.getOptions('authentication')==1){_setIdOfferItems();_self.doPurchaseRequest(_response,buttonBuy,content.attr('return-url'),Translate.get('checkout-send-me-now').toUpperCase());}}
function _setIdOfferItems(){var idItems=[];var refItems=[];contentOffers.find('.create-checkout-striped-table tbody tr').each(function(){if($(this).css('display')!='none'){idItems.push($(this).attr('data-id'));refItems.push($(this).attr('data-reference'));}});_response.idOffer=contentOffers.attr('id-offer');_response.idItems=idItems;_response.refItems=refItems;contentFinish.find('tbody tr').css('display','none');for(var index in _response.idItems){contentFinish.find('tbody tr[data-id='+_response.idItems[index]+']').css('display','table-row');}}
function _formatCoin(value,coin){var input=$('<input>').val(value).maskMoney(_moneySet[coin]);input.maskMoney('mask');return input.val();}
function _fullDescriptionItem(selector){Publish_Checkout_Description.setTarget({title:selector.find('.checkout-item-title').text(),description:selector.find('.checkout-item-description').text(),image:selector.find('.checkout-item-image').attr('src'),translate:contentOffers.attr('translate-description'),amount:_formatCoin(selector.attr('data-amount'),selector.attr('data-moeda')),});Publish_Checkout_Description.show();}
if(typeof preview=='undefined'){if(_editable){$(container).find('.steps-offer-user').addClass('divBlock');_self.verifyButtons(content);}else{if(config.offerOrder=='after'&&Publicar.getOptions('authentication')==1){var elem=$(steps).find('.ativo');var next=elem.next();$(contentSteps).find('[data-steps-ref='+elem.attr('data-steps')+']').css('display','none');$(contentSteps).find('[data-steps-ref='+next.attr('data-steps')+']').css('display','block');$(steps).find('[data-steps=offer]').addClass('ativo');}}
buttonPreview.on('click',function(){buttonPreview.fadeOut();buttonNext.fadeOut();buttonBuy.fadeOut();var elem=$(steps).find('.ativo').last();var prev=elem.prev();if(elem.attr('data-steps')=='offer'){_setIdOfferItems();}
if(!_editable&&Publicar.getOptions('authentication')==1&&prev.attr('data-steps')=='account'){if(content.data('item')=='CheckoutBox')
prev=prev.prev();}
$(contentSteps).find('[data-steps-ref='+elem.attr('data-steps')+']').fadeOut(400,function(){_self.removeActiveSteps(content);prev.addClass('ativo');_self.verifyButtons(content);$(contentSteps).find('[data-steps-ref='+prev.attr('data-steps')+']').fadeIn(400,function(){});});});if(checkoutType=='CheckoutBox'){buttonNext.on('click',function(){try{if(($.browser.mozilla||$.browser.msie)&&!/Edge\/\d./i.test(navigator.userAgent)){var node=$('html');}else{var node=$('body');}
$(node).animate({scrollTop:$(container).offset().top},500,'swing',function(){});}catch(Error){console.log('Scroll CheckoutBox error : '+Error);}
if(!_editable&&Publicar.getOptions('viewTemplate')){return;}
var elem=$(steps).find('.ativo').last();var next=elem.next();if(!_editable&&!Publicar.getOptions('authentication')==1&&elem.attr('data-steps')=='account'){Base_Alert({msg:Translate.get('need-login'),alertClass:'pop-up-alert-danger',show_btn_cancel:false,});return;}
if(elem.attr('data-steps')=='offer'){if(!_editable&&content.attr('total-amount')<=0){Base_Alert({msg:contentOffers.attr('translate-amount'),alertClass:'pop-up-alert-danger',text_btn_confirm:contentOffers.attr('translate-confirm'),show_btn_cancel:false});return;}else{_setIdOfferItems();}}
buttonPreview.fadeOut();buttonNext.fadeOut();buttonBuy.fadeOut();if(!_editable&&Publicar.getOptions('authentication')==1&&next.attr('data-steps')=='account'){next=next.next();}
if(next.attr('data-steps')=='finish'){var expire=new Date(contentOffers.attr('expire-offer')+' 00:00:00');if(contentOffers.attr('expire-offer')==''||new Date()<expire||contentOffers.attr('expire-offer')=='0000-00-00'){contentFinish.find('.steps-offer-expire-text').css('display','none');if(!_editable){helper.showModal();_self.doPurchaseRequest(_response,buttonBuy,content.attr('return-url'),contentOffers.attr('translate-pay'));}
_expireOffer=false;}else{contentFinish.find('.steps-offer-confirm-text').css('display','none');contentFinish.find('.create-checkout-table-preview').css('display','none');contentFinish.find('.create-checkout-subtotal-preview').css('display','none');contentFinish.find('.steps-offer-expire-text').css('display','block');if(!_editable){_self.sendExpireOffer(content.attr('data-offer-id'));}
_expireOffer=true;}}
$(contentSteps).find('[data-steps-ref='+elem.attr('data-steps')+']').fadeOut(400,function(){_self.removeActiveSteps(content);next.addClass('ativo');_self.verifyButtons(content);$(contentSteps).find('[data-steps-ref='+next.attr('data-steps')+']').fadeIn(400,function(){});});});}else if(checkoutType=='CheckoutTwoSteps'){buttonNext.on('click',function(){if(!_editable&&Publicar.getOptions('viewTemplate')){return;}
var elem=$(steps).find('.ativo').last();var next=elem.next();if(!_editable&&Publicar.getOptions('authentication')==0&&elem.attr('data-steps')=='account'){$("#submit-login-form").click();return;}
if(!_editable&&Publicar.getOptions('authentication')==1&&next.attr('data-steps')=='offer'){elem=next;}
if(elem.attr('data-steps')=='offer'){if(!_editable&&content.attr('total-amount')<=0){Base_Alert({msg:contentOffers.attr('translate-amount'),alertClass:'pop-up-alert-danger',text_btn_confirm:contentOffers.attr('translate-confirm'),show_btn_cancel:false});return;}else{_setIdOfferItems();}}
buttonPreview.fadeOut();buttonNext.fadeOut();buttonBuy.fadeOut();if(elem.attr('data-steps')=='offer'){var expire=new Date(contentOffers.attr('expire-offer')+' 00:00:00');if(contentOffers.attr('expire-offer')==''||new Date()<expire||contentOffers.attr('expire-offer')=='0000-00-00'){contentFinish.find('.steps-offer-expire-text').css('display','none');if(!_editable){helper.showModal();_self.doPurchaseRequest(_response,buttonBuy,content.attr('return-url'),Translate.get('checkout-send-me-now').toUpperCase());}
_expireOffer=false;}else{contentFinish.find('.steps-offer-confirm-text').css('display','none');contentFinish.find('.create-checkout-table-preview').css('display','none');contentFinish.find('.create-checkout-subtotal-preview').css('display','none');contentFinish.find('.steps-offer-expire-text').css('display','block');if(!_editable){_self.sendExpireOffer(content.attr('data-offer-id'));}
_expireOffer=true;}}
$(contentSteps).find('[data-steps-ref='+elem.attr('data-steps')+']').fadeOut(400,function(){_self.removeActiveSteps(content);next.addClass('ativo');_self.verifyButtons(content);$(contentSteps).find('[data-steps-ref='+next.attr('data-steps')+']').fadeIn(400,function(){});});});if(!_editable&&Publicar.getOptions('authentication')==1&&$(steps).find('.ativo').last().attr('data-steps')=='account'){if(link&&(link[0].pagina!='')&&(link[0].pagina!='none')&&($(Publish_Transition.getCurrentPage()).attr('id')!=link[0].pagina)){Publish_Link.call(link);}
this.eventClickNext();}}}
contentOffers.find('.create-checkout-striped-table tbody tr').each(function(){var self=this;var recurrent=$(this).find('.recurrent-offer');$(this).find('.total-amount').text(_formatCoin((parseFloat($(this).attr('data-amount'))).toFixed(2),$(this).attr('data-moeda')));$(this).find('.total-shipping').text(_formatCoin((parseFloat($(this).attr('data-shipping'))).toFixed(2),$(this).attr('data-moeda')));recurrent.tooltip({tooltipClass:"tooltip-style-nav-scroll",position:{my:"left+15 center",at:"right center"}});if($(this).attr('data-discount')>0){if($(this).attr('data-discount-type')=='individual'){$(contentFinish).find('tbody tr[data-id='+$(this).attr('data-id')+'] .total-amount-preview').addClass('text-line-through');$(this).find('.total-amount').addClass('text-line-through');var discount=parseFloat($(this).attr('data-amount'))*($(this).attr('data-discount')/100);var value=_formatCoin(($(this).attr('data-amount')-discount).toFixed(2),$(this).attr('data-moeda'));$(this).find('.total-discount').text(value);$(contentFinish).find('tbody tr[data-id='+$(this).attr('data-id')+'] .total-discount-preview').text(value);}else{$(this).find('.total-discount').text('(-'+$(this).attr('data-discount')+'% '+Translate.get('in-offer')+')');$(contentFinish).find('tbody tr[data-id='+$(this).attr('data-id')+'] .total-discount-preview').text('(-'+$(this).attr('data-discount')+'% '+Translate.get('in-offer')+')');}}
$(this).find('.checkout-item-trash').on('click',function(){$('.checkout-twosteps-upsell').show();var tr=$(this).closest('tr');var id=tr.attr('data-id');var item=$('.table-options-items-content[data-id='+id+']');item.fadeIn();tr.fadeOut(500,function(){_updateSubtotal();});$(item).find('.table-options-items-checkbox input').prop('checked',false);$(item).removeClass('checked');_verifyConditions();});});btnMore.on('click',function(){_fullDescriptionItem($(this).closest('tr'));});btnMoreOptional.on('click',function(){_fullDescriptionItem(contentTable.find('[data-id='+$(this).closest('.table-options-items-content').attr('data-id')+']'));});containerOption.find('.table-options-items-content').each(function(){var self=this;if($(this).attr('data-conditional')){$(this).addClass('disabledOfferTable');conditionalScheme[$(this).attr('data-reference')]=$(this).attr('data-conditional').split(',');}
if($(this).attr('data-optional')=='yes'){$(this).find('.table-options-items-checkbox input').on('change',function(){$(this).closest('.table-options-items-content').fadeOut(function(){$('.table-options-items-content:visible').length==0?$('.checkout-twosteps-upsell').hide():0;});var id=$(this).closest('[data-id]').attr('data-id');if($(this).is(':checked')){contentTable.find('tr[data-id='+id+']').fadeIn(500,function(){_updateSubtotal();}).css('display','table-row');$(self).addClass('checked');}
_verifyConditions();});$('.table-options-items-checkbox input').on('click',function(){if(!$(this).hasClass('checkout-added-offer')){return;}
var id=$(this).closest('[data-id]').attr('data-id');if($(this).is(':checked')){contentTable.find('tr[data-id='+id+']').fadeOut(500,function(){_updateSubtotal();}).css('display','table-row');$(self).addClass('checked');}
$(this).removeClass('checkout-added-offer');$(this).attr('checked',false);_verifyConditions();});}});if($('.table-options-items-content').find('.table-options-items-checkbox ').length==0){$('.checkout-twosteps-upsell').hide();}
_updateSubtotal();_self.buildOfferLogin($(container).find('.steps-offer-user').get(0),checkoutType);};this.removeActiveSteps=function(elem){var steps=$(elem).find('.steps-offer-row');steps.find('[position=1]').removeClass('ativo');steps.find('[position=2]').removeClass('ativo');steps.find('[position=3]').removeClass('ativo');};this.verifyButtons=function(elem){var steps=$(elem).find('.steps-offer-row')
var stepAtivo=$(steps).find('.ativo').attr('data-steps');var positionStep=$(steps).find('.ativo').attr('position');var checkoutType=$(elem).data('item')?$(elem).data('item'):null;_self.removeActiveSteps(steps);if(checkoutType!=null&&checkoutType=="CheckoutTwoSteps"){$('.steps-offer-content').trigger('change');if(positionStep==1){steps.find('[position=1]').addClass('ativo');$('.checkout-steps-band-pointer').removeClass('step-two');}
if(positionStep==2){$('.checkout-steps-band-pointer').addClass('step-two');steps.find('[position=1]').removeClass('ativo');steps.find('[position=2]').addClass('ativo');}}else{if(positionStep==1){steps.find('[position=1]').addClass('ativo');}
if(positionStep==2){steps.find('[position=1]').addClass('ativo');steps.find('[position=2]').addClass('ativo');}
if(positionStep==3){steps.find('[position=1]').addClass('ativo');steps.find('[position=2]').addClass('ativo');steps.find('[position=3]').addClass('ativo');}}
if($(elem).attr('data-offer-order')=='after'){if(stepAtivo=='account'){if(_editable){$(elem).find('.button-of-step .steps-offer-buttons-next').fadeIn();}}
if(stepAtivo=='offer'){if(_editable||(!_editable&&Publicar.getOptions('authentication')!=1)){$(elem).find('.button-of-step .steps-offer-buttons-preview').fadeIn();}
$(elem).find('.button-of-step .steps-offer-buttons-next').fadeIn();}}else{if(stepAtivo=='account'){$(elem).find('.button-of-step .steps-offer-buttons-preview').addClass('back-account');if(checkoutType!=null&&checkoutType=="CheckoutTwoSteps"){$(elem).find('.checkout-back-button').fadeOut();$(elem).find('.button-of-step .steps-offer-buttons-next').fadeIn();}else{$(elem).find('.button-of-step .steps-offer-buttons-preview').fadeIn();}
if(_editable){$(elem).find('.button-of-step .steps-offer-buttons-next').fadeIn();}}
if(stepAtivo=='offer'){if(checkoutType!=null&&checkoutType=="CheckoutTwoSteps"){$(elem).find('.button-of-step').fadeIn();$(elem).find('.button-of-step .steps-offer-buttons-preview').fadeIn();}
$(elem).find('.button-of-step .steps-offer-buttons-next').fadeIn();}}
if(stepAtivo=='finish'){$(elem).find('.button-of-step .steps-offer-buttons-preview').fadeIn();if(_editable){$(elem).find('.button-of-step .steps-offer-buttons-buy-editor').fadeIn();}}
if(stepAtivo=='account'){$(elem).find('.button-of-step .steps-offer-buttons-preview').removeClass('final-step').addClass('back-account');}else{$(elem).find('.button-of-step .steps-offer-buttons-preview').removeClass('back-account').addClass('final-step');}}
this.doPurchaseRequest=function(params,buttonArea,returnUrl,buy)
{$.ajax({url:'/checkout/create/purchase',dataType:'html',method:'POST',data:{purchase:params},success:function(response){helper.hideModal();},error:function(){},complete:function(response){if(response.responseText==="reload"){location.reload();}else{buttonArea.html(response.responseText);buttonArea.fadeIn();$(buttonArea).find('#Pay-element input').val(buy);if(checkoutType=='CheckoutTwoSteps'){$(buttonArea).find('#Pay-element input').css('color',configStyle.buttonTextColor);$(buttonArea).find('#Pay-element input').val(configStyle.buttonText);$('<i>').addClass('fa fa-arrow-right').attr('area-hidden',true).prependTo('.steps-offer-buttons-buy');}}}});};this.sendExpireOffer=function(offer)
{};this.eventClickNext=function(){$('.checkoutBox').each(function(){var elem=$(this).find('.steps .steps-offer-content.ativo').last();if(elem.attr('data-steps')=='account'){$(this).find('.button-of-step .steps-offer-buttons-next').trigger('click');var next=elem.next();$(this).find('.button-of-step .steps-offer-buttons-preview').fadeOut();$(this).find('.button-of-step .steps-offer-buttons-next').fadeOut();$(this).find('.button-of-step .steps-offer-buttons-buy').fadeOut();$(this).find('.content-of-step [data-steps-ref='+elem.attr('data-steps')+']').fadeOut(400,function(){_self.removeActiveSteps(this);next.addClass('ativo');_self.verifyButtons(this);$(this).find('.content-of-step [data-steps-ref='+next.attr('data-steps')+']').fadeIn(400,function(){});});}});}
$(function(){if(typeof Publicar!='undefined')
{$('body').on('click','.funil-container',function()
{STRIPE=$(this).find('#stripe_funnel').get(0);var type=$(this).attr('data-type');var url_no=$('.funil-no').attr('data-target');var autenticado=Publicar.getOptions('authentication');if(type==='downsell'){window.location=url_no;}else if(type==='upsell'){if(!autenticado){Publish_Translate.get('loginMenu',function(data){var login=new Publish_LoginMenu(data,null,{auth:'register',initial_window:'register'});login.show();login.onComplete(function(){if(typeof STRIPE!='undefined')
{var customer=_self.getCustomerCookie();if(customer){_self.doStripeCharge();}else{_self.doStripeRequest();}}else{_self.doPurchaseFunilRequest();}});});}else{if(typeof STRIPE!='undefined')
{var customer=_self.getCustomerCookie();if(customer){_self.doStripeCharge();}else{_self.doStripeRequest();}}else{_self.doPurchaseFunilRequest();}}}});}});this.doStripeRequest=function()
{var offer_name=$(STRIPE).attr('data-offer-name');var item_name=$(STRIPE).attr('data-item-name');var item_amount=$(STRIPE).attr('data-item-amount');var public_key=$(STRIPE).attr('data-stripe-pk');item_amount=item_amount.replace('.','');$.getScript("https://checkout.stripe.com/checkout.js").done(function()
{var handler=StripeCheckout.configure({key:public_key,image:'https://stripe.com/img/documentation/checkout/marketplace.png',locale:'auto',token:function(token)
{_self.doStripeCharge(token);}});handler.open({name:offer_name,description:item_name,amount:item_amount});window.addEventListener('popstate',function(){handler.close();});});}
this.getCustomerCookie=function()
{var nameEQ="stripe_user=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
this.deleteCustomerCookie=function(name)
{document.cookie=name+'=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';}
this.doStripeCharge=function(token)
{$.ajax({url:'/funil/charge-stripe',dataType:'json',data:{token:token},method:'POST',success:function(response){if(response.success)
{window.location=response.next_url;}else{_self.deleteCustomerCookie('stripe_user');_self.doStripeRequest();}},error:function(){},complete:function(response){}});};this.doPurchaseFunilRequest=function()
{$.ajax({url:'/funil/create-purchase',dataType:'html',method:'POST',success:function(response)
{var purchase=JSON.parse(response);$('[data-type="upsell"]').append(purchase.upsell);$(".funil-payment").submit();helper.hideModal();},error:function(){},complete:function(response){}});};})();;var Publish_Checkout_Description=new(function(){var _self=this;var _popUp;var _content;var _title;var _image;var _description;var _amount;var _config;this.show=function(){if(!_popUp){_createPopUp();_createContent();_popUp.setContent(_content);}
_setParams();_popUp.show();};function _setParams(){_title.text(_config.title);_description.text(_config.description);_amount.text(_config.amount);_image.css('background-image','url('+_config.image+')');_popUp.setTitle($('<div>').text(_config.translate),true);};this.setTarget=function(config){_config=config;};function _createPopUp(){_popUp=PopUp.getInstance('edit-checkout-description-item');_popUp.setDimension(990);_popUp.stopEventOnShow(true);};function _createContent(){_content=$('<div>').addClass('checkout-description-item');var div=$('<div>').addClass('create-checkout-offer-screen').css({'height':'100%','border':'none'}).appendTo(_content);_title=$('<p>').addClass('create-checkout-title text-ellipsis').css({'text-align':'center','margin-bottom':'15px'}).appendTo(div);_image=$('<div>').addClass('col-sm-4 checkout-description-item-image').appendTo(div);var div6=$('<div>').addClass('create-checkout-value-offer').appendTo(div);$('<p>').addClass('checkoutSymbol').text(Translate.get('amount')+':').appendTo(div6);_amount=$('<p>').addClass('checkoutValue').appendTo(div6);var div4=$('<div>').addClass('create-checkout-description-offer col-sm-8').css({padding:0}).appendTo(div);var div5=$('<div>').addClass('create-checkout-datails-offer').appendTo(div4);_description=$('<p>').addClass('create-checkout-description').css({'max-height':'360px','padding':'0 10px','font-size':'16px'}).appendTo(div5);};})();;var Publish_PopUp=new(function(){var _self=this;var _currentPopUp=null;var _modal=$('<div>').addClass('modal-backdrop').css({display:'none',opacity:0.5});this.setTitle=function(popUp,text){var title=$(popUp).find('.omb-popUp-header-title').get(0);$(title).text(text);};this.hideModal=function(popUp){if(!popUp){popUp=_currentPopUp;}
if(popUp){if(typeof HTML_Load=='undefined'||HTML_Load.isPreview()){$(popUp).detach();}else{$(popUp).hide();}}
_modal.hide('fade',500);_currentPopUp=null;if(typeof HTML_Load!='undefined'){Base_Style_Type.hide();Base_Style_AddType.hide();Base_Style_Customize.hide();}};this.show=function(popUp,edit){if(!edit&&typeof HTML_Load!=='undefined'&&!HTML_Load.isPreview())
return;if(_currentPopUp){if(_currentPopUp.id==popUp.id&&$(popUp).css('display')!='none')
return;$(_currentPopUp).hide();}
else{$('#view-content').find('.element.popup').hide();}
_currentPopUp=popUp;$(_currentPopUp).appendTo($('#view-content'));var editable=(typeof HTML_Load!='undefined'&&HTML_Load.isEditable());if(!editable){_modal.on('click',function(){_self.hideModal(popUp);}).show('fade',500);if(typeof HTML_Load=='undefined'){_modal.appendTo($('#publish-view'));}else{_modal.appendTo($('#editor-html-corpo'));}
$(popUp).css('z-index',1040);}else{$(popUp).css('z-index',"auto");}
$(popUp).on('omb_popup.click',function(event){if(!editable){event.stopPropagation();}}).addClass('fixed view-mode').css({top:'50%',left:'50%',marginTop:($(popUp).height()/-2)+'px',marginLeft:($(popUp).width()/-2)+'px'}).show('fade',500).find('.custom-html').each(function(){var instance=this.getInstance();instance.show();instance.refresh();});if(typeof Publication_Events!='undefined'){Publication_Events.attachEventAnimation($(popUp).find('.hasAnimation'));}
Omb_Waypoints.attachEvent($(popUp).find('[name="element"][data-item^="FusionCounter"]'));Publish_ProgressBar.attachEvent($(popUp).find('[name="element"][data-item^="ProgressBar"]'));};this.addHeader=function(popUp,title){var header=$('<div>').addClass('omb-popUp-header').prependTo($(popUp).find('[data-item^="PopUp_"]').get(0));$('<div>').text(title).addClass('omb-popUp-header-title text-ellipsis').appendTo(header);$('<div>').html('<i class="fa fa-times"></i>').on('click',function(){if(typeof Structure_PopUp_Edit!='undefined'){Structure_PopUp_Edit.visibleAction(popUp);}else{_self.hideModal(popUp);}}).addClass('omb-popUp-btn-close').appendTo(header);};this.getCurrentPopUp=function(){return _currentPopUp;};this.hideCurrentPopUp=function(){if(_currentPopUp){$(_currentPopUp).hide();}}})();;var Translate={get:function(name){if(typeof TranslateList!='undefined'&&!helper.isEmpty(TranslateList)&&TranslateList[name]&&TranslateList[name]!='null'){return TranslateList[name];}else{}
return name;},replace:function(){$('[data-translate]').each(function(){var request=$(this).data('translate');for(var index in request){if(typeof Translate.insert[index]=='function'){Translate.insert[index](this,Translate.get(request[index]));}}});},insert:{alt:function(elem,val){$(elem).attr('alt',val);},title:function(elem,val){$(elem).attr('title',val);},text:function(elem,val){$(elem).html(val);}}};var translate=Translate;;var PopUp=new(function(){var _instances=new Array();var _config={autoOpen:false,resizable:false,width:'100%',closeOnEscape:true,modal:false,draggable:true,position:{my:"center center",at:"center center"},close:function(){}};this.closeAll=function(){for(var index in _instances){if(_instances[index]){_instances[index].hide();}}};this.exists=function(index){if(_instances[index]){return true;}
return false;};this.removeInstance=function(instance){delete _instances[instance];};this.getInstance=function(id,args){if(typeof Event_Control!='undefined'){Event_Control.openPopUp();}
if(!_instances[id]){_createInstance(id,args);}
return _instances[id];};this.attachEvent=function(id,event,func){_instances[id][event]=func;};function _enableEvents(val){if(typeof Event_Control!='undefined'){Event_Control.set('copyPast',val);Event_Control.set('hotKey',val);}
helper.scroll.keyDown(!val);helper.scroll[!val?'lock':'unlock']();}
function _createInstance(id_popup,args){var _top;var _message;var _content;var _bottom;var _inProgress=false;var _stopEventOnShow=false;var _menus={};var _activeMenu;var _ckeditorInstance;var config=$.extend(helper.clone(_config),{close:function(event,ui){_enableEvents(true);this.onHide();}},args||{});function _transition(open,duration){if(!duration){duration=500;}
function openMenu(){_menus[open].menu.addClass('active');_menus[open].content.show('fade',duration);if(typeof _menus[open].onShow=='function'){_menus[open].onShow();}
_activeMenu=open;}
if(_activeMenu){_menus[_activeMenu].menu.removeClass('active');if(_ckeditorInstance){_menus[_activeMenu].content.css('display','none');openMenu();}else{_menus[_activeMenu].content.hide('fade',duration,function(){openMenu();});}}else{openMenu();}};_instances[id_popup]=$('<div>').attr({id:id_popup}).addClass('popUp').dialog(config).setParams({getInstance:function(){return $(this);},adjustable:function(val){if(val){$(this).closest('.ui-widget').addClass('adjustable');}else{$(this).closest('.ui-widget').removeClass('adjustable');}},stopEventOnShow:function(val){_stopEventOnShow=val;},onShow:function(){},onHide:function(){},show:function(){var windowsize=$(window).outerHeight();var dialogsize=$(this).outerHeight();if(dialogsize>windowsize){$(this).dialog().css({"overflow-y":'auto',"height":'calc('+windowsize+'px - 50px)',})}
if(typeof this.onShow=='function'){this.onShow();}
if(_stopEventOnShow){_enableEvents(false);}
$(this).dialog("open");_content.find('*:focus').blur();if(typeof Event_Control!='undefined'){Event_Control.openPopUp();}},hide:function(){$(this).dialog("close");},setTitle:function(title){var titlebar=$(this).dialog("widget").find('.ui-dialog-title');titlebar.empty();if((typeof title=='string'&&title.replace(/\s/g,''))||typeof title=='object'){$('<div>').addClass('button-popUp-top').html(title).appendTo(titlebar);}},removeAllMenus:function(){_menus={}},addMenu:function(args){_menus[args.id]={};_menus[args.id].onShow=args.onShow;_menus[args.id].index=helper.objLength(_menus);_menus[args.id].menu=$('<div>').text(args.text).on('click',function(){_instances[id_popup].setActiveMenu(args.id);if(typeof args.click=='function'){args.click(this);}}).addClass(typeof args.class=='undefined'?'menu-item':args.class).attr('data-ref-id',args.id).appendTo(_top);_menus[args.id].content=$('<div>').css('display','none').addClass('pop-up-menu-content').appendTo(_content);},getMenu:function(id){return _menus[id].menu;},removeMenus:function(){_menus={};},getMenuContent:function(id){return _menus[id].content;},setActiveMenu:function(id,duration){if(_activeMenu!=id){_transition(id,duration);}},getActiveMenu:function(){return _activeMenu;},setContent:function(html){_content.empty();_content.append(html);},addContent:function(html){_content.append(html);},setBottom:function(html){_bottom.html(html);},addBottom:function(html){_bottom.append(html);},setPosition:function(pos){$(this).dialog('option','position',pos);},isEmpty:function(){if(_content.children().length>0){return false;}
return true;},clear:function(){_content.empty();_bottom.empty();},setDimension:function(w,h){$(this).dialog("option","height",h?h:'auto');$(this).dialog("option","width",w?w:'auto');},destroy:function(){$(this).dialog('destroy');_instances[id_popup]=null;},isOpen:function(){return $(this).dialog("isOpen");},enableMsg:function(param){if(param){_message.show('fade');}else{_message.hide('fade');}},showMessage:function(message,duration){if(_inProgress){clearTimeout(_inProgress);}
if(typeof duration=='undefined'){duration=5000;}
_message.html(message);_message.css('opacity',0);_message.animate({opacity:1},1000,function(){if(duration){setTimeout(function(){_message.animate({opacity:0},1000,function(){_message.empty();});},duration);}});},hideMessage:function(){_message.empty();},setConfig:function(name,val){$(this).dialog("option",name,val);},ckeditorInstance:function(val){_ckeditorInstance=val;},addClass:function(val){$(this).dialog('widget').addClass(val);},removeClass:function(val){$(this).dialog('widget').removeClass(val);},option:function(option,value){if(typeof value!='undefined'){$(this).dialog('option',option,value);}else{return $(this).dialog('option',option);}}});_top=$('<div>').addClass('popUp_MenuTop configure-item-menu-top-content clearBoth').appendTo(_instances[id_popup]);_message=$('<div>').addClass('popUp_Message clearBoth').appendTo(_instances[id_popup]);_content=$('<div>').addClass('popUp_Content clearBoth').appendTo(_instances[id_popup]);_bottom=$('<div>').addClass('popUp_Bottom clearBoth').appendTo(_instances[id_popup]);}});;var Base_Alert=new(function(){var _self=this;var _accept;var _notify;var _notifyContent;var _notifyTimeout;var _popup;var _btnConfirm;var _btnCancel;var _args={type:'text',alertClass:'pop-up-alert-warning',title:'Alert',width:290,show_btn_confirm:true,show_btn_cancel:true,text_btn_confirm:'',text_btn_cancel:'',onConfirm:function(){},onCancel:function(){},onShow:function(){},onHide:function(){},timeout:false};function _createNotify(){_notify=$('<div>').attr('id','notify-box');$('<div>').addClass('notify-box-title').html('<i class="fa fa-exclamation" aria-hidden="true"></i> <strong>IMPORTANT</strong>').appendTo(_notify);_notifyContent=$('<div>').attr('id','notify-box-content').appendTo(_notify);}
function _createPopUp(){_popup=PopUp.getInstance('show-alert-dialog');_popup.stopEventOnShow(true);_popup.option('draggable',false);_popup.addClass('pop-up-alert');_btnConfirm=$('<button>').addClass('btn btn-small btn-confirm').css({float:'right'}).on('click',function(){_accept=true;_popup.hide();});_btnCancel=$('<button>').addClass('btn btn-small btn-cancel').css({float:'right',marginRight:'10px'}).attr('type','button').on('click',function(){_accept=false;_popup.hide();});}
this.onConfirm=function(){if(typeof _args.onConfirm=='function'){_args.onConfirm();}};this.onCancel=function(){if(typeof _args.onCancel=='function'){_args.onCancel();}};this.mergeConfig=function(args){_args.text_btn_confirm=Translate.get('botao-confirm');_args.text_btn_cancel=Translate.get('botao-cancelar');return helper.mergeProperties(_args,args);};this.notify=function(args){if(_notifyTimeout){clearTimeout(_notifyTimeout);}
var msg=args.msg||'';if(!_notify){_createNotify();}
_notifyContent.empty().html(msg);_notify.removeClass('fadeInRight fadeOutRight animated').addClass('fadeInRight animated').appendTo('body').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',function(){_notifyTimeout=setTimeout(function(){_notify.addClass('fadeOutRight').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',function(){_notify.detach();});},10000);});};this.showPopUp=function(args){var msg=args.msg||'';delete args.msg;args=_self.mergeConfig(args);_accept=false;if(!_popup){_createPopUp();}
if(args.show_btn_confirm){_btnConfirm.html(args.text_btn_confirm);_popup.addBottom(_btnConfirm);}else{_btnConfirm.detach();}
if(args.show_btn_cancel){_btnCancel.html(args.text_btn_cancel);_popup.addBottom(_btnCancel);}else{_btnCancel.detach();}
_popup.onShow=function(){helper.showModal(true);};_popup.onHide=function(){helper.hideModal();if(_accept){if(typeof args.onConfirm=='function'){args.onConfirm();}}else{if(typeof args.onCancel=='function'){args.onCancel();}else if(typeof args.onHide=='function'){args.onHide();}}};_popup.removeClass(function(){var pieces=this.className.split(' ');var remove=new Array();for(var index in pieces){if(pieces[index].indexOf('pop-up-alert-')>-1){remove.push(pieces[index]);}}
return remove.join(' ');});_popup.addClass(args.alertClass);_popup.setTitle(args.title);_popup.setContent(args.type=='text'?'<p>'+msg+'</p>':msg);_popup.setDimension(args.width);_popup.show();if(args.timeout){setTimeout(function(){_popup.hide();},args.timeout);}};return function(args){if(args.type=='notify'){_self.notify(args);}else{_self.showPopUp(args);}};})();;var Publish_Link=new(function(){var _self=this;this.call=function(link,callback){try{if(link){if(typeof link=='string'){link=$.parseJSON(link);}
if($.isArray(link)){link=link[0];}
if(link.type&&typeof _self[link.type]=='function'){_self[link.type](link,callback);}}}catch(error){console.log('error',error);}};this.redirect=function(open_url,config){window.open(open_url,"_blank");if(!$.isArray(config.value)){if(config.type=='page'){_self.pagina({pagina:config.value});}else{_self.web({url:config.value});}}};this.popUp=function(link){var popUp=null;if(typeof HTML_Structure_PopUp_Controller!='undefined'){var obj=HTML_Structure_PopUp_Controller.getItem(link.popUp);if(obj){obj.load(function(instance){popUp=instance.getContainer();Publish_PopUp.show(popUp);});}}else{Publicar.showPopUp({id:link.popUp,minutes:0,seconds:0});}};this.email=function(link){var params='';if(typeof link.cc!='undefined'&&link.cc!=''){params=params+'&cc='+link.cc;}
if(typeof link.bcc!='undefined'&&link.bcc!=''){params=params+'&bcc='+link.bcc;}
if(typeof link.body!='undefined'&&link.body!=''){params=params+'&body='+link.body;}
window.location.href='mailto:'+link.email+'?subject='+link.assunto+params;};this.anchor=function(link,callback){if(link.value&&link.pageID){var topOfAnchor=function(anchor){var inEdition=0;if(typeof HTML_Load!='undefined'){inEdition+=50;device=HTML_Load.getConfig('device');if(device!='desktop'){inEdition+=55;}}
var fixedHeader=0;var header=Publish_Resize.getEstrutura('header');if($(header.element()).hasClass('fixedElements')){fixedHeader+=header.outerHeight();}
return anchor.offset().top-inEdition-fixedHeader;};var scrollTo=function(){var anchor=$('#'+link.value);if(anchor.get(0)){if(($.browser.mozilla||$.browser.msie)&&!/Edge\/\d./i.test(navigator.userAgent)||($.browser.chrome&&parseInt($.browser.version)>60)){var node=$('html');}else{var node=$('body');}
$(node).animate({scrollTop:topOfAnchor(anchor)},500,'swing',function(){if(typeof callback=='function'){callback();}});if(typeof Publicar!='undefined'&&Publicar.getOptions('changeUrl')){var url=window.location.href;if(url.indexOf('#')>-1){url=url.substring(0,url.indexOf('#'));}
url+='#'+link.value;helper.mudarURL(url);}}};if(link.pageID!=Publish_Transition.getCurrentPageID()){Publish_Transition.onComplete(scrollTo);if(typeof Publicar!='undefined'){var page=Publicar.getPageById(link.pageID);Publicar.navigate(page.config('url'),Publicar.getOptions('changeUrl'),link.value);}else{var page=HTML_Structure_Controller.getPage(link.pageID);page.load(function(html){Publish_Transition.transition(page.getLayout().getLayout(),html,null,true);});}}else{scrollTo();}}};this.pagina=function(link){if(link.pagina){if(typeof HTML_Structure_Controller!='undefined'){var page=HTML_Structure_Controller.getPage(link.pagina);if(page){HTML_Structure_Controller.getPage(link.pagina).load(function(html){Publish_Transition.transition(HTML_Structure_Controller.getPage(link.pagina).getLayout().getLayout(),html);});}else{throw new Error("The Page with id "+link.pagina+" not found");}}else{var page=Publicar.getPageById(link.pagina);if(page){if(link.redirect_config&&link.redirect_config.action=='blank'){_self.redirect(window.location.origin+'/'+Publicar.normalizePageAddress(page.config('url')),link.redirect_config);}else{Publicar.navigate(page.config('url'),Publicar.getOptions('changeUrl'));}}else{throw new Error("The Page with id "+link.pagina+" not found");}}}};this.web=function(link){function getCookie(name){var start=document.cookie.indexOf(name+"=");var len=start+name.length+1;if((!start)&&(name!=document.cookie.substring(0,name.length))){return null;}
if(start==-1)return null;var end=document.cookie.indexOf(';',len);if(end==-1)end=document.cookie.length;return unescape(document.cookie.substring(len,end));}
if(typeof link.url!='undefined'){if(getCookie('AID#aid')!=null){link.url=link.url+'#aid='+getCookie('AID#aid');}}
if(link.redirect_config){if(link.redirect_config.action=='blank')
_self.redirect(link.url,link.redirect_config);else
window.location=link.url;}else{if(link.abrir=='blank')
window.open(link.url,"_blank");else
window.location=link.url;}};this.tel=function(link){window.location=link.url;};this.documento=function(link){var el=$('<a>').attr({href:'//omb11.com'+link.src,download:link.name,target:'_blank'}).html('Elemento').appendTo('body');el.get(0).click();el.remove();};this.video=function(link){Publish_ModalVideo(link);};this.payment=function(link){var language;switch(helper.getLanguage()){case'en_us':language='US';break;case'pt_br':language='BR';break;case'es_es':language='ES';break;case'de_de':language='DE';break;default:language='US';}
if(typeof link.operation=="undefined"){helper.showModal();var opts=$.extend({},link,{key:link.publicKey,amount:link.amount.replace(',','.'),address:link.address,description:link.description});Publish_Link_Payment(opts);}else{switch(link.operation){case'stripe':helper.showModal();var opts=$.extend({},link,{key:link.publicKey,amount:link.amount.replace(',','.'),address:link.address,returnUrl:link.returnUrlStripe,description:link.description});Publish_Link_Payment(opts);break;case'paypal':var _formPaypal=$('<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">').appendTo(document.body);$('<input type="hidden" name="cmd" value="'+link.cmd+'">').appendTo(_formPaypal);$('<input type="hidden" name="business" value="'+link.email+'">').appendTo(_formPaypal);$('<input type="hidden" name="lc" value="'+language+'">').appendTo(_formPaypal);$('<input type="hidden" name="item_name" value="'+link.productName+'">').appendTo(_formPaypal);if(link.cmd!=='_xclick-subscriptions')
$('<input type="hidden" name="amount" value="'+link.paypalAmount+'">').appendTo(_formPaypal);if(link.cmd==='_xclick')
$('<input type="hidden" name="quantity" value="'+link.quantity+'">').appendTo(_formPaypal);$('<input type="hidden" name="currency_code" value="'+link.currency+'">').appendTo(_formPaypal);if(link.returnUrlPaypal!=='')
$('<input type="hidden" name="return" value="'+link.returnUrlPaypal+'">').appendTo(_formPaypal);if(link.cmd==='_xclick-subscriptions'){$('<input type="hidden" name="no_note" value="1">').appendTo(_formPaypal);$('<input type="hidden" name="src" value="1">').appendTo(_formPaypal);$('<input type="hidden" name="a3" value="'+link.paypalAmount+'">').appendTo(_formPaypal);$('<input type="hidden" name="p3" value="'+link.frequency+'">').appendTo(_formPaypal);$('<input type="hidden" name="t3" value="'+link.time+'">').appendTo(_formPaypal);if(link.end>1)
$('<input type="hidden" name="srt" value="'+link.end+'">').appendTo(_formPaypal);}
_formPaypal.trigger('submit');break;break;case'pagseguro':var _pagseguroFormLink;switch(link.pagseguroCmd){case'comprar':_pagseguroFormLink="https://pagseguro.uol.com.br/checkout/v2/payment.html";break;case'doar':_pagseguroFormLink="https://pagseguro.uol.com.br/checkout/v2/donation.html";break;case'assinar':break;}
var _formPagseguro=$('<form action="'+_pagseguroFormLink+'" method="post" target="_blank">').appendTo(document.body);$('<input type="hidden" name="receiverEmail" value="'+link.pagseguroEmail+'">').appendTo(_formPagseguro);$('<input type="hidden" name="currency" value="BRL">').appendTo(_formPagseguro);if(link.pagseguroCmd==='comprar')
$('<input type="hidden" name="itemId1" value="'+link.pagseguroId+'">').appendTo(_formPagseguro);if(link.pagseguroCmd==='comprar')
$('<input type="hidden" name="itemDescription1" value="'+link.pagseguroDescription+'">').appendTo(_formPagseguro);if(link.pagseguroCmd==='comprar')
$('<input type="hidden" name="itemAmount1" value="'+link.pagseguroAmount+'">').appendTo(_formPagseguro);if(link.pagseguroCmd==='comprar')
$('<input type="hidden" name="itemQuantity1" value="'+link.pagseguroQuantity+'">').appendTo(_formPagseguro);_formPagseguro.trigger('submit');break;}}};})();;function Publish_Link_Payment(link){var _publicKey=link.key,_address=link.address,_amount=parseInt(link.amount*100),_description=link.description;function _token(result){var data=$.extend({},link,result,{publicKey:_publicKey,amount:_amount,address:_address,description:_description});$.ajax({url:'/stripe/get-code',data:data,type:'POST',dataType:'json',beforeSend:function(){helper.showModal();},success:function(response){helper.showMessage({alertClass:'pop-up-alert-success',msg:Translate.get('action-stripe-payment-success')});if(typeof link.returnUrlStripe!=="undefined"){if(link.returnUrlStripe!==''){setTimeout(function(){window.location.href=link.returnUrlStripe;},2000)}}},error:function(err){helper.showMessage({msg:Translate.get('action-stripe-payment-error')})},complete:function(){helper.hideModal();}});}
var opts={key:_publicKey,amount:_amount,name:link.companyName,description:_description,shippingAddress:_address,billingAddress:_address,token:_token};$(document).on("DOMNodeRemoved",".stripe_checkout_app",closeStripePayment);function closeStripePayment(){helper.hideModal()}
if(typeof StripeCheckout=='undefined'){helper.includeJavascript('//checkout.stripe.com/v3/checkout.js');setTimeout(function(){StripeCheckout.open(opts);},2000)}else{StripeCheckout.open(opts);}};function AnchorMenu(container,config){var _lastScroll;var _self=this;var _blocked=false;$(container).on('click','.anchor-link a',function(e){e.preventDefault();if(!_blocked&&typeof HTML_Load=='undefined'||HTML_Load.isPreview()){if($(this).hasClass('top')){$("html, body").animate({scrollTop:0},500,'swing',function(){_blocked=false;});}else{Publish_Link.call($(this).attr('data-address'),function(){_blocked=false;});}
_blocked=true;}});this.setSelection=function(top){var anchors=config.anchors;var bottom=helper.getDevice()=='desktop'?100:20;var icon=$(container).find('.anchor-link i');if(document.contains(document.getElementById($(container).attr('id')))){if(typeof anchors[0]!='undefined'&&(typeof $('#'+anchors[0]).position()!='undefined')&&(top<$('#'+anchors[0]).position().top||(top+$(window).height())>=($(document).height()-bottom))){if(top<$('#'+anchors[0]).position().top){$(container).find('a').removeClass("anchor-item-current");$(container).find('li:first-child a').addClass("anchor-item-current");}else{$(container).find('a').removeClass("anchor-item-current");$(container).find('li:nth-last-child(1) a').addClass('anchor-item-current')}}else if(typeof anchors[0]!='undefined'){for(var i in anchors){if(typeof $('#'+anchors[0]).position()!='undefined'&&top>=$('#'+anchors[i]).position().top){if(i==anchors.length-1){_self.setActivated(anchors[i])}
_lastScroll=anchors[i]}else{_self.setActivated(_lastScroll);return;}}}}};this.setActivated=function(anchor_id){$(container).find('.anchor-link a').removeClass('anchor-item-current');if(anchor_id=='top'){$($(container).find('a').get(0)).addClass("anchor-item-current");}else{$(container).find('a[href=#'+anchor_id+']').addClass('anchor-item-current');}};}
var Publish_AnchorMenu=new(function(){var _enabled=true;var _instances={};this.assign=function(id,container,config){_instances[id]=new AnchorMenu(container,config);};this.unassign=function(id){delete _instances[id];};this.enableScroll=function(){_enabled=true;};this.disableScroll=function(){_enabled=false;};$(document).on("scroll",function(){if(_enabled){var scrollPos=$(document).scrollTop();for(var i in _instances){_instances[i].setSelection(scrollPos);}}});})();;var Publish_Blog_Helper=new(function(){var _self=this;this.load=function(url,data,callBack){$.ajax({url:url,type:'GET',dataType:'json',headers:{'identify':typeof Publicar!='undefined'?Publicar.getOptions('idLayout'):HTML_Load.getConfig('identify')},data:data,success:function(data){if(typeof data.results!='undefined'){callBack(data.results);}else{callBack(data);}},error:function(){}});};this.regionalDate=function(){$.datepicker.setDefaults($.datepicker.regional[typeof Publicar!='undefined'?Publicar.getOptions('lang').toLowerCase():(helper.getLanguage()=='pt_br'?'pt_br':'')]);};this.formatDate=function(format,date){return $.datepicker.formatDate(format,new Date(date))};this.previewFeedPage=function(){var config=Factory.getConfig('Blog');var page=HTML_Structure_Controller.getPageByIdPage(config.id_feed_page);var layout=page.getLayout();if(Publish_Transition.getCurrentPageID()!=page.getIdEditor()){layout.load(function(layoutHTML){page.load(function(pageHTML){Publish_Transition.transition(layoutHTML,pageHTML);});});}}
this.previewSinglePage=function(){var config=Factory.getConfig('Blog');var page=HTML_Structure_Controller.getPageByIdPage(config.id_single_page);var layout=page.getLayout();if(Publish_Transition.getCurrentPageID()!=page.getIdEditor()){layout.load(function(layoutHTML){page.load(function(pageHTML){Publish_Transition.transition(layoutHTML,pageHTML);});});}}
return _self;})();var Publish_Blog_TagCloud=function(node,dataConfig){var _self=this;this.loadData=function(){Publish_Blog_Helper.load('/api/blog-flags',{filter:'tag',count:1},_self.buildHTML);};this.buildHTML=function(data){var css=$.extend(dataConfig.styleText,{'text-decoration':'none','text-align':'right'});var config=dataConfig.config;$(node).removeAttr('style').empty();if(typeof dataConfig.config['inlineCloud']!='undefined'&&dataConfig.config['inlineCloud']==true){$(node).css({'white-space':'nowrap','text-overflow':'ellipsis','overflow':'hidden','cursor':'pointer'});}else{$(node).css({'overflow':'hidden','word-wrap':'break-word','cursor':'pointer'});}
$.map(data,function(element){var href=$('<a>').css(css).appendTo(node);if(typeof HTML_Load=='undefined'){var siteName=Publicar.getOptions('sitename');href.attr('href',(siteName!=null&&siteName!=''?'/'+siteName+'/':'/')+encodeURI(encodeURI(element.text))+'+t'+element.id_blog_flag);}
if(typeof HTML_Load!='undefined'&&HTML_Load.isPreview()){href.on('click',function(){Publish_Blog_Helper.previewFeedPage();});}
var fontSize=parseInt(css['font-size'])+(config.sizeFixed==false?parseInt(element.amount*2):0);$('<span>').css('font-size',fontSize+'px').text(element.text).appendTo(href);});};};var Publish_Blog_Category=function(node,dataConfig){var _self=this;this.loadData=function(){Publish_Blog_Helper.load('/api/blog-flags',{filter:'category',count:1},_self.buildHTML);};this.buildHTML=function(data){var css=$.extend(dataConfig.styleText,{display:'block','text-decoration':'none','cursor':'pointer'});var config=dataConfig.config;$(node).empty();$.map(data,function(element){var href=$('<a>').css(css).appendTo(node);if(typeof HTML_Load=='undefined'){var siteName=Publicar.getOptions('sitename');href.attr('href',(siteName!=null&&siteName!=''?'/'+siteName+'/':'/')+encodeURI(encodeURI(element.text))+'+c'+element.id_blog_flag);}
if(typeof HTML_Load!='undefined'&&HTML_Load.isPreview()){href.on('click',function(){Publish_Blog_Helper.previewFeedPage();});}
var textCategory=element.text+(config.counter==true?' ('+(element.amount==null?'0':element.amount)+')':'');$('<span>').text(textCategory).appendTo(href);});};};var Publish_Blog_Search=function(node){if(typeof HTML_Load!='undefined'&&HTML_Load.isPreview()){$(node).on('click','button',function(){Publish_Blog_Helper.previewFeedPage();});}
if(typeof HTML_Load=='undefined'){$(node).on('click','button',function(){var siteName=Publicar.getOptions('sitename');window.location=(siteName!=null&&siteName!=''?'/'+siteName+'/':'/')+encodeURI(encodeURI($(node).find('input').val()))+'+s';});}};var Publish_Blog_Date=function(node,dataConfig){var _self=this;this.loadData=function(){Publish_Blog_Helper.load('/api/blog-news',{dates:1},_self.buildHTML);};this.buildHTML=function(data){var css=$.extend(dataConfig.styleText,{display:'block','text-decoration':'none','cursor':'pointer'});var config=dataConfig.config;$(node).empty();Publish_Blog_Helper.regionalDate();if(config.list){$.map(data,function(element){var href=$('<a>').css(css).appendTo(node);if(typeof HTML_Load=='undefined'){var lastDay=(new Date(element.year,element.month,0)).getDate();var siteName=Publicar.getOptions('sitename');href.attr('href',(siteName!=null&&siteName!=''?'/'+siteName+'/':'/')+element.year+'-'+helper.addZeroLeft(element.month)+'-01'+'+'+element.year+'-'+helper.addZeroLeft(element.month)+'-'+lastDay);}
if(typeof HTML_Load!='undefined'&&HTML_Load.isPreview()){href.on('click',function(){Publish_Blog_Helper.previewFeedPage();});}
var text=$.datepicker.formatDate(config.format,new Date(element.year,element.month,0))
+(config.counter==true?' ('+(element.amount==null?'0':element.amount)+')':'');$('<span>').text(text).appendTo(href);});}else{var select=$('<select>').on('change',function(){if(typeof HTML_Load=='undefined'){var dataRef=$(this).find(":selected").attr('data-ref');if(dataRef!=''){var siteName=Publicar.getOptions('sitename');window.location=(siteName!=null&&siteName!=''?'/'+siteName+'/':'/')+dataRef;}}
if(typeof HTML_Load!='undefined'&&HTML_Load.isPreview()){href.on('click',function(){Publish_Blog_Helper.previewFeedPage();});}}).addClass('form-control').appendTo(node);$('<option>').text('-').attr('data-ref','').appendTo(select);$.map(data,function(element){var text=$.datepicker.formatDate(config.format,new Date(element.year,element.month,0))
+(config.counter==true?' ('+(element.amount==null?'0':element.amount)+')':'');var lastDay=(new Date(element.year,element.month,0)).getDate();$('<option>').text(text).attr('data-ref',element.year+'-'+helper.addZeroLeft(element.month)+'-01'+'+'+element.year+'-'+helper.addZeroLeft(element.month)+'-'+lastDay).appendTo(select);});}};};var Publish_Blog_Slider=function(node,dataConfig){var _self=this;var _config;var _index=0;var _interval;var _count=0;this.loadData=function(){_config=dataConfig.config;Publish_Blog_Helper.load('/api/blog-news',{featured:_config.onlyFeatured,category:_config.category,tag:_config.tag,limit:_config.amount},_self.buildHTML);};this.buildHTML=function(data){var cssTitle=dataConfig.styleText['title'];var cssDate=$.extend({'display':'block'},dataConfig.styleText['date']);$(node).css({'cursor':'pointer'}).empty();Publish_Blog_Helper.regionalDate();$.each(data,function(index,element){_count++;var container=$('<div>').addClass('slider-blog-item').css({display:'none',position:'absolute','width':'100%','height':'100%'}).attr('data-ref',index).appendTo(node);var href=$('<a>').css({'text-decoration':'none','display':'block','position':'relative','height':'100%'}).appendTo(container);if(typeof HTML_Load=='undefined'){var siteName=Publicar.getOptions('sitename');href.attr('href',(siteName!=null&&siteName!=''?'/'+siteName+'/':'/')+element.url+'+'+element.id_blog_news);}
if(typeof HTML_Load!='undefined'&&HTML_Load.isPreview()){href.on('click',function(){Publish_Blog_Helper.previewSinglePage();});}
if(_config.showImg==true&&element.img!=''){$('<img>').addClass('slider-blog-img img-responsive').css({'width':'100%','height':'75%',float:'right'}).attr('src',element.img).appendTo(href);}
if(_config.showTitle==true){$('<p>').addClass('slider-blog-img').css(cssTitle).text(element.title).appendTo(href);}
if(_config.showDate==true){$('<p>').addClass('slider-blog-img').css(cssDate).text(Publish_Blog_Helper.formatDate(_config.formatDate,element.date)).appendTo(href);}});_show(0);if(typeof Publicar!='undefined'||HTML_Load.isPreview()){$(node).on('mouseenter',function(){_self.stop();}).on('mouseleave',function(){_self.start();});_self.start();}};this.stop=function(){clearInterval(_interval);};this.start=function(){_interval=setInterval(function(){_self.rotateSlider();},_config.speed*1000)};this.rotateSlider=function(){_close(_index);_index++;if(_index>=_config.amount||_index>=_count){_index=0;}
_show(_index);};function _close(index){$(node).find('.slider-blog-item[data-ref="'+index+'"]').hide(_config.effect||'fade',500);$(node).find('.slider-blog-item[data-ref="'+index+'"]').removeClass('selected');};function _show(index){$(node).find('.slider-blog-item[data-ref="'+index+'"]').show(_config.effect||'fade',500);$(node).find('.slider-blog-item[data-ref="'+index+'"]').addClass('selected');};};var Publish_Blog_Posts=function(node,dataConfig){var _self=this;var _config=dataConfig.config;this.loadData=function(){Publish_Blog_Helper.load('/api/blog-news',{featured:_config.onlyFeatured,category:_config.category,tag:_config.tag,limit:_config.amount},_self.buildHTML);};this.buildHTML=function(data){var cssTitle=dataConfig.styleText['title'];var cssDate=$.extend({'display':'block'},dataConfig.styleText['date']);$(node).css({'cursor':'pointer'}).empty();Publish_Blog_Helper.regionalDate();$.map(data,function(element){var container=$('<div>').css({'margin-bottom':'10px'}).addClass('slider-blog-item').appendTo(node);var href=$('<a>').css({'text-decoration':'none','display':'inline-flex','width':'100%'}).appendTo(container);if(typeof HTML_Load=='undefined'){var siteName=Publicar.getOptions('sitename');href.attr('href',(siteName!=null&&siteName!=''?'/'+siteName+'/':'/')+element.url+'+'+element.id_blog_news);}
if(typeof HTML_Load!='undefined'&&HTML_Load.isPreview()){href.on('click',function(){Publish_Blog_Helper.previewSinglePage();});}
if(_config.showImg==true&&element.img!=''){var divImg=$('<div>').css({'width':'100%','margin-right':'5px'}).appendTo(href);$('<img>').addClass('img-responsive').css({'width':'100%'}).attr('src',element.img).appendTo(divImg);}
var divContent=$('<div>').css({'position':'relative','width':'100%'}).appendTo(href);if(_config.showTitle==true){$('<span>').css('display','block').css(cssTitle).text(element.title).appendTo(divContent);}
if(_config.showDate==true){$('<span>').css({'display':'block','margin-top':'2px'}).css(cssDate).text(Publish_Blog_Helper.formatDate(_config.format,element.date)).appendTo(divContent);}});};};var Publish_Blog_Gallery=function(node,dataConfig){var _self=this;var _config=dataConfig.config;this.loadData=function(){Publish_Blog_Helper.load('/api/blog-news',{featured:_config.onlyFeatured,category:_config.category,tag:_config.tag,limit:_config.cols*_config.rows},_self.buildHTML);};this.buildHTML=function(data){var cssTitle=dataConfig.styleText['title'];var cssDate=$.extend({'display':'block'},dataConfig.styleText['date']);$(node).css({'cursor':'pointer'}).empty();Publish_Blog_Helper.regionalDate();var container=$('<div>').addClass('slider-blog-item row').appendTo(node);var content=[];for(var i=0;i<_config.cols;i++){content[i]=$('<div>').addClass('col-xs-'+(12/_config.cols)).appendTo(container);}
var countCol=0;$.map(data,function(element){if(countCol>=_config.cols){countCol=0;}
var galleryItem=$('<div>').css({'margin':'10px'}).appendTo(content[countCol]);var href=$('<a>').css('text-decoration','none').appendTo(galleryItem);if(typeof HTML_Load=='undefined'){var siteName=Publicar.getOptions('sitename');href.attr('href',(siteName!=null&&siteName!=''?'/'+siteName+'/':'/')+element.url+'+'+element.id_blog_news);}
if(typeof HTML_Load!='undefined'&&HTML_Load.isPreview()){href.on('click',function(){Publish_Blog_Helper.previewSinglePage();});}
if(_config.showImg==true&&element.img!=''){$('<img>').addClass('img-responsive').css({'width':'100%'}).attr('src',element.img).appendTo(href);}
var divContent=$('<div>').appendTo(href);if(_config.showTitle==true){$('<span>').css('display','block').text(element.title).css(cssTitle).appendTo(divContent);}
if(_config.showDate==true){$('<span>').css({'display':'block','margin-top':'2px'}).css(cssDate).text(Publish_Blog_Helper.formatDate(_config.format,element.date)).appendTo(divContent);}
countCol++;});};};var Publish_Blog_AttachPaginator=function(node,config,container){var _self=this;var _config=config['config'];var _container=container.find('[data-item="FeedNews"]');this.attachPages=function(){$(node).on('click','.blog-paginator-item',function(){$(_container).empty();var publish=new Publish_Blog_FeedNews(container);publish.setConfig($.extend(_config,{page:$(this).attr('data-page-ref')}));publish.getHTML().appendTo(_container);})};};;var Publish_Blog_FeedNews=function(placeAt){var _self=this;var _container;var _config;var _showImg=false;var _place=[];var _placeAt=placeAt;this.setConfig=function(val){_config=val;};function _getData(){$.ajax({url:'/api/blog-news',type:'GET',dataType:'json',data:_config,headers:{identify:typeof Publicar!='undefined'?Publicar.getOptions('idLayout'):HTML_Load.getConfig('identify')},success:function(response){_buildHTML(response.results);if(typeof HTML_Load=='undefined'){_buildPaginator(response.metadata);}},error:function(){}})};function _buildItemCategory(categories,img,node){if(categories!=''&&typeof categories=='string'){categories=$.parseJSON(categories);}
if(!helper.isEmpty(categories)){var categoryHeader=$('<div>').addClass('col-xs-12 col-sm-'+((img!="")?'12':'6')+' place-categories').appendTo(node);$.map(categories,function(element){var href=$('<a>').appendTo(categoryHeader);if(typeof HTML_Load=='undefined'){href.attr('href',encodeURI(encodeURI(element.text))+'+c'+element.id);}
$('<div>').addClass('blog-feed-news-category').text(element.text).appendTo(href);});}}
function _buildTitle(data,node){console.log('a');var title=$('<div>').addClass('col-xs-12 col-sm-12 place-title').appendTo(node);var href=$('<a>').css({'text-decoration':'none'}).appendTo(title);if(typeof HTML_Load=='undefined'){var siteName=Publicar.getOptions('sitename');href.attr('href',(siteName!=null&&siteName!=''?'/'+siteName+'/':'/')+data.url+'+'+data.id_blog_news);}
if(typeof HTML_Load!='undefined'&&HTML_Load.isPreview()){href.on('click',function(){Publish_Blog_Helper.previewSinglePage();});}
$('<h3>').text(data.title).appendTo(href);if(_config.showDate&&data.date!=''&&data.date!='0000-00-00 00:00:00'){$.datepicker.setDefaults($.datepicker.regional[typeof Publicar!='undefined'?Publicar.getOptions('lang').toLowerCase():(helper.getLanguage()=='pt_br'?'pt_br':'')]);var datetime=data.date.split(' ');$('<h5>').text($.datepicker.formatDate(_config.format,new Date(datetime[0]))+(_config.showHour==true?' '+datetime[1]:'')).appendTo(title);}
if(_config.showAuthor&&data.author!=''){var hrefAuthor=$('<a>').css({'text-decoration':'none'}).appendTo(title);if(typeof HTML_Load=='undefined'){hrefAuthor.attr('href',data.author+'+a'+data.id_blog_author);}
$('<p>').text(data.author).appendTo(hrefAuthor);}}
function _buildBody(data,placeAt){var content=$('<div>').addClass('col-xs-12 col-sm-12 place-content').appendTo(placeAt);var text=data.content;try{text=text.toString().stripHTML();}catch(e){text=helper.stripHTML(text.toString());}
$('<span>').addClass('place-content-html').html(text).appendTo(content);}
function _buildButtonRead(data,node){var linkRead=$('<div>').addClass('col-xs-12 col-sm-'+((data.img!="")?'12':'6')+'').appendTo(node);if(_config.showButton==true){var href=$('<a>').css({'text-decoration':'none'}).appendTo(linkRead);if(typeof HTML_Load=='undefined'){var siteName=Publicar.getOptions('sitename');href.attr('href',(siteName!=null&&siteName!=''?'/'+siteName+'/':'/')+data.url+'+'+data.id_blog_news);}
if(typeof HTML_Load!='undefined'&&HTML_Load.isPreview()){href.on('click',function(){Publish_Blog_Helper.previewSinglePage();});}
var buttonReamMore=$('<button>').addClass('blog-feed-button-read-more').text((_config.text=='read-more'?Translate.get('read-more'):_config.text)).appendTo(href);if(_config.icon){$('<i>').addClass('fa '+_config.icon).css({'float':_config.alignIcon,'margin-left':'3px','margin-right':'3px'}).appendTo(buttonReamMore);}}}
function _buildImage(data,placeAt){_showImg=false;if(data.img||data.video){var size={};if(typeof _config.imageSize!='undefined'){size=_config.imageSize[helper.getDevice()];}
var css=$.extend({'background-image':'url(/generate/thumb/'+helper.toBase64(data.img)+')'},size);var imgPlace=$('<div>').addClass('col-xs-12 col-sm-12 place-image').appendTo(placeAt);$('<img>').addClass('img-responsive').css(css).appendTo(imgPlace);_showImg=true;}}
function _buildNewsItem(data,node){console.log('_showImg',_showImg);var item=$('<div>').addClass('row place-item-news').appendTo(node);var colLeft=$('<div>').addClass('col-xs-12 col-sm-6').appendTo(item);var rowLeft=$('<div>').addClass('row').appendTo(colLeft);var colRight=$('<div>').addClass('col-xs-12 col-sm-'+((data.img!="")?'6':'12')+'').appendTo(item);var rowRight=$('<div>').addClass('row').appendTo(colRight);if(data.img!=""){_buildImage(data,rowLeft);_buildItemCategory(data.categories,data.img,rowLeft);_buildTitle(data,rowRight);_buildBody(data,rowRight);_buildButtonRead(data,rowRight);}else{_buildImage(data,rowLeft);_buildTitle(data,rowRight);_buildBody(data,rowRight);_buildItemCategory(data.categories,data.img,rowRight);_buildButtonRead(data,rowRight);}}
function _alinharCategoria(item){}
function _buildHTML(data){if(typeof data!='undefined'){for(var i=0;i<_config.theme;i++){_place[i]=$('<div>').addClass('place-list-news').appendTo(_container);}
if(_config.theme==2){_place[1].addClass('list-news-inline');}
for(var i=0;i<helper.objLength(data);i++){switch(_config.theme){case 1:_buildNewsItem(data[i],_place[0]);break;case 2:if(i%5==0){_buildNewsItem(data[i],_place[0]);}else{_buildNewsItem(data[i],_place[1]);}
break;case 3:_buildNewsItem(data[i],_place[i%3]);break;}
if(i===0){_alinharCategoria(_place[0]);}}}}
function _buildPaginator(metadata){if(metadata.count>metadata.perpage){var divPaginator=$('<div>').addClass('blog-paginator paginator').appendTo(_container);var numberPages=Math.ceil(metadata.count/metadata.perpage);for(var i=1;i<=numberPages;i++){$('<div>').addClass('blog-paginator-item '+(metadata.page==i?'selected':'')).attr('data-page-ref',i).on('click',function(){if(typeof Publicar!='undefined'||HTML_Load.isPreview()){$(_placeAt).empty();_self.setConfig($.extend(_config,{page:$(this).attr('data-page-ref')}));_self.getHTML().appendTo(_placeAt);}}).text(i).appendTo(divPaginator);}}}
this.getHTML=function(){_container=$('<div>').addClass('blog-feed-news-container theme_'+_config.theme);_getData();return _container;};};;var Publication_BlogFixPosition=new(function(){this.fixPosition=function(selector){var check=0;var topTotalElement=0;var moveHeight=0;var moveHeightOld=0;var elements=Publication_Config_Items.getElements();var header=Publish_Resize.getEstrutura('header');var footer=Publish_Resize.getEstrutura('footer');var elementHeight=0;function infiniteCheck(elements,dataHeight,elem){if($('[data-item="FeedNews"]').length>0||$('[data-item="SinglePost"]').length>0){if($(elem).height()!=elementHeight){moveHeight=parseInt(elementHeight)-parseInt($(elem).height());topTotalElement=parseInt(topTotalElement)+parseInt(moveHeight);elementHeight=parseInt($(elem).height());if(!$('[name="element"][data-item^="Header"]').hasClass('fixedElements')){moveHeight+=parseInt($('[name="element"][data-item^="Header"]').height());}
console.log('moveHeight',moveHeight);var moveElementAfter=parseInt(dataHeight)+parseInt($(elem).offset().top);$.each(elements,function(index,element){if((moveHeight<0&&overElement($(elem),element))||(moveHeight>0)){if($(element).offset().top>moveElementAfter){if(inRange($(this),element)&&helper.getBaseItem($(element).parent().attr('data-item'))=='Page'&&!helper.isChildBase(element,'Footer')&&!helper.isChildBase(element,'Header')&&$.inArray(helper.getBaseItem($(element).attr('data-item')),['Base','Header','Body','Page','SinglePost','FeedPage'])==-1){if($('[data-item="FeedNews"]').length>0||$('[data-item="SinglePost"]').length>0){if(helper.getBaseItem($(element).attr('data-item'))=='Footer'&&moveHeight<0){var topElement=parseInt($(element).offset().top)-(moveHeight*-1);$(element).css({'top':topElement});}else{var topElement=parseInt($(element).offset().top)-moveHeight;$(element).css({'top':topElement});}}}}}});}
if(moveHeight<0){moveHeight*=-1;}else{topTotalElement-=moveHeight;}
if(moveHeightOld!=moveHeight){moveHeightOld=moveHeight;$.each(elements,function(index,element){if(helper.getBaseItem($(element).attr('data-item'))=='Footer'){var topElement=parseInt(footer.top())+parseInt(header.height())-parseInt(moveHeight);topElement=verifyTopElements(topElement);console.log(topElement,topTotalElement);if(topElement>topTotalElement){topTotalElement=topElement;}
$(element).css({'top':topTotalElement});Publish_Resize.resizeBaseEditor(parseInt(topTotalElement)+parseInt(footer.height()));}});}
check++;if(check<=10){setTimeout(function(){if($('[data-item="FeedNews"]').length>0||$('[data-item="SinglePost"]').length>0){infiniteCheck(elements,dataHeight,elem);}},2000);}}}
function inRange(container,node){if(typeof container.getBoundingClientRect=='function'){var data=container.getBoundingClientRect();var data2=node.getBoundingClientRect();var cLeft=data.left;var cRange=cLeft+data.width;var nLeft=data2.left;var nRange=nLeft+data2.width;}else{var cLeft=$(container).offset().left;var cRange=cLeft+$(container).width();var nLeft=$(node).offset().left;var nRange=nLeft+$(node).width();}
return(((nRange>=cLeft||nLeft>=cLeft)&&nRange<=cRange)||(nLeft>=cLeft&&nLeft<=cRange)||(nLeft<cRange&&nLeft>cLeft)||(nLeft<cLeft&&nRange>cRange));}
function overElement(container,node){if(typeof container.getBoundingClientRect=='function'){var data=container.getBoundingClientRect();var data2=node.getBoundingClientRect();var cTop=data.top;var cRange=cTop+data.height;var nTop=data2.top;var nRange=nTop+data2.height;}else{var cTop=$(container).offset().top;var cRange=cTop+$(container).height();var nTop=$(node).offset().top;var nRange=nTop+$(node).height();}
return(((nRange>=cTop||nTop>=cTop)&&nRange<=cRange)||(nTop>=cTop&&nTop<=cRange)||(nTop<cRange&&nTop>cTop)||(nTop<cTop&&nRange>cRange));}
function verifyTopElements(actualTop){var top=actualTop;var heightElement=0;var elementSelected;$.map(elements,function(element){if(typeof $(element).offset()!='undefined'&&$(element).offset().top!=0&&$(element).height()>0){if($.inArray(helper.getBaseItem($(element).attr('data-item')),['Base','Header','Body','Footer','Page'])==-1){if(!helper.isChildBase(element,'Footer')){if(parseInt($(element).offset().top)>top||(parseInt($(element).offset().top)+parseInt($(element).height())>top)){var height=parseInt($(element).offset().top)+parseInt($(element).height());if(height>top&&heightElement<height){heightElement=height;elementSelected=element;}}}}}});if(typeof elementSelected!='undefined'){top=parseInt($(elementSelected).offset().top)+parseInt($(elementSelected).height());}
return top;}
function getDataHeight(id){var height=0;var generalConfig=Publication_Config_Items.getConfig(id);if(typeof generalConfig['size']!='undefined'){height=generalConfig['size'][helper.getDevice()];}else{var config=generalConfig['config'];if(typeof config=='undefined'){config=generalConfig['configSingle'];}
height=config['data-height'];}
if(typeof height=='undefined'||height==0){height=750;}
return height;}
if(selector.length>0){selector.each(function(){var container=$(this);elementHeight=$(this).height();var dataHeight=getDataHeight(this.id);var clientChange=dataHeight-elementHeight;if(clientChange<0){clientChange*=-1;}
if(clientChange<100){return true;}
moveHeight=dataHeight-elementHeight;var moveElementAfter=parseInt(dataHeight)+parseInt($(this).offset().top);if(!$('[name="element"][data-item^="Header"]').hasClass('fixedElements')){moveHeight+=parseInt($('[name="element"][data-item^="Header"]').height());}
console.log('moveHeight',moveHeight);$.each(elements,function(index,element){if(moveElementAfter<$(element).offset().top){if(inRange(container,element)&&helper.getBaseItem($(element).parent().attr('data-item'))=='Page'&&!helper.isChildBase(element,'Footer')&&!helper.isChildBase(element,'Header')&&$.inArray(helper.getBaseItem($(element).attr('data-item')),['Base','Header','Body','Page','SinglePost','FeedPage'])==-1){if(helper.getBaseItem($(element).attr('data-item'))=='Footer'&&moveHeight<0){var topElement=parseInt($(element).offset().top)-(moveHeight*-1);$(element).css({'top':topElement});}else{var topElement=parseInt($(element).offset().top)-moveHeight;$(element).css({'top':topElement});}}}});if(moveHeight<0){moveHeight*=-1;}
infiniteCheck(elements,dataHeight,this);});}};})();;function Publish_Shopify_Factory_Cart(config){var _container=$('<div>').attr({'data-embed_type':'cart','data-shop':Publish_Shopify_Factory.getConfig('domain')+'.myshopify.com'}).addClass('shopify-cart');for(var index in config){_container.attr('data-'+index,config[index]);}
return _container;};function Publish_Shopify_Factory_Product(data){var product;if(typeof HTML_Load!='undefined'&&HTML_Load.isEditable()){var modelProduct=new Publish_Shopify_Model_Product(data.product_handle);modelProduct.addLoading();modelProduct.setRedirectMethod(data.redirect_to);modelProduct.setButtonText(data.buy_button_text);modelProduct.setTitleColor(data.product_title_color);modelProduct.setBackgroundColor(data.background_color);modelProduct.setButtonBackgroundColor(data.button_background_color);modelProduct.setButtonTextColor(data.button_text_color);modelProduct.showImage(data.has_image);return modelProduct;}else{product=$('<div>').addClass('shopify-product');data['shop']+='.myshopify.com';for(var index in data){product.attr('data-'+index,data[index]);}}
this.getProduct=function(){return product;}};function Publish_Shopify_Factory_Collect(data,theme){var collect;if(typeof HTML_Load!='undefined'&&HTML_Load.isEditable()){var modelCollect=new Publish_Shopify_Model_Collect(data.collection_handle,theme,data['shop']);collect=modelCollect.getCollect();}else{collect=$('<div>').addClass('shopify-collect');data['shop']+='.myshopify.com';for(var index in data){collect.attr('data-'+index,data[index]);}}
this.getCollect=function(){return collect;}};var Publish_Shopify_Factory=new(function(){var _self=this;var _idItems=[];var _timeout;var _hasScript=false;this.isActive=function(){return _self.getConfig('active');};this.getConfig=function(attr){if(typeof Factory!='undefined'){var config=Factory.getConfig('Shopify');}else{var config=Publicar.getConfig('Shopify');}
if(typeof attr!='undefined'){return config[attr];}
return config;};this.getThemeConfig=function(theme){var themes=_self.getConfig('themes');return helper.clone(typeof themes[theme]!='undefined'?themes[theme]:themes.custom[theme]);};this.delete=function(){if(_hasScript){$('[data-embed_type="cart"], [data-embed_type="product_modal"], [data-embed_type="cart_content"], [data-embed_type="cart"]+style, #ShopifyEmbedScript').each(function(){$(this).remove();});_hasScript=false;}};function _appendScript(element){var config=helper.clone(_self.getConfig());var type,id,node;if($(element).attr('data-item')=='ShopifyProduct'){type='product';node=$('#product-component-'+$(element).attr('id')).get(0);id=[$(node).attr('data-id')];}else{type='collection';node=$('#collection-component-'+$(element).attr('id')).get(0);id=$(node).attr('data-id');}
if(typeof HTML_Load!='undefined'&&HTML_Load.isEditable())
return;else
$(node).empty();(function(){var scriptURL='https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.js';if(window.ShopifyBuy){if(window.ShopifyBuy.UI){ShopifyBuyInit();}else{loadScript();}}else{loadScript();}
function loadScript(){var script=document.createElement('script');script.async=true;script.src=scriptURL;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(script);script.onload=ShopifyBuyInit;}
function ShopifyBuyInit(){var client=ShopifyBuy.buildClient({domain:config.domain+'.myshopify.com',apiKey:config.accessToken,appId:'6'});ShopifyBuy.UI.onReady(client).then(function(ui){ui.createComponent(type,{id:id,node:node,moneyFormat:'R%24%20%7B%7Bamount_with_comma_separator%7D%7D',options:Publish_Shopify_Factory_Abstract.getOptions(config)});});}})();}
this.appendScript=function(element){setTimeout(function(){_appendScript(element);},2000);};this.create=function(args,id,element){var instance;if(args.embed_type=='product'){var data=helper.mergeProperties(args,_self.getThemeConfig(args.theme));instance=new Publish_Shopify_Factory_Product(data);}else if(args.embed_type=='collection'){var data=helper.mergeProperties(args,_self.getThemeConfig('collect'));instance=new Publish_Shopify_Factory_Collect(data,'collect');}
if(typeof HTML_Load!='undefined'&&HTML_Load.isEditable()&&id&&_idItems.indexOf(id)==-1){_idItems.push(id);}
if(typeof HTML_Load!='undefined'&&HTML_Load.isEditable())
return instance;_self.appendScript(element);return instance;};this.applyTheme=function(theme_id){for(var i in _idItems){var property=Property_Controller.getInstanceById(_idItems[i]);if(property.getStatus()=='active'&&property.getDataProperty('config').theme==theme_id){property.getInstance().create();}}};this.changeTheme=function(new_theme,old_theme){for(var i in _idItems){var property=Property_Controller.getInstanceById(_idItems[i]);if(property.getStatus()=='active'&&property.getDataProperty('config').theme==old_theme){property.setDataProperty({config:{theme:new_theme}});property.getInstance().create();}}};})();;var Publish_Shopify_Factory_Abstract=new(function(){var _self=this;function _getCart(cart){return{"contents":{"button":true},"styles":{"cart":{"background-color":cart.background_color?'#'+cart.background_color:"#fff"},"button":{"background-color":cart.button_background_color?'#'+cart.button_background_color:"#5f9d3e","color":cart.button_text_color?'#'+cart.button_text_color:"#fff",":hover":{"background-color":cart.button_background_color?'#'+cart.button_background_color:"#5f9d3e","color":cart.button_text_color?'#'+cart.button_text_color:"#fff",},":focus":{"background-color":cart.button_background_color?'#'+cart.button_background_color:"#5f9d3e","color":cart.button_text_color?'#'+cart.button_text_color:"#fff",}},"title":{"color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"footer":{"background-color":cart.background_color?'#'+cart.background_color:"#fff"},"header":{"color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"lineItems":{"color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"subtotalText":{"color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"subtotal":{"color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"notice":{"color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"currency":{"color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"close":{":hover":{"color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"emptyCart":{"color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"}}};}
function _getProduct(product){return{"variantId":"all","contents":{"imgWithCarousel":false,"variantTitle":false,"description":false,"buttonWithQuantity":false,"quantity":false},"styles":{"product":{"@media (min-width: 601px)":{"max-width":"calc(25% - 20px)","margin-left":"20px","margin-bottom":"50px"}},"button":{"background-color":product.button_background_color?'#'+product.button_background_color:"#5f9d3e","color":product.button_text_color?'#'+product.button_text_color:"#fff",":hover":{"background-color":product.button_background_color?'#'+product.button_background_color:"#5f9d3e","color":product.button_text_color?'#'+product.button_text_color:"#fff",},":focus":{"background-color":product.button_background_color?'#'+product.button_background_color:"#5f9d3e","color":product.button_text_color?'#'+product.button_text_color:"#fff",}}}};}
function _getLineItems(cart){return{"styles":{"variantTitle":{"color":cart.button_text_color?'#'+cart.button_text_color:"#fff"},"title":{"color":cart.button_text_color?'#'+cart.button_text_color:"#fff"},"price":{"color":cart.button_text_color?'#'+cart.button_text_color:"#fff"},"quantity":{"color":cart.button_text_color?'#'+cart.button_text_color:"#fff"},"quantityIncrement":{"color":cart.button_text_color?'#'+cart.button_text_color:"#fff","border-color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"quantityDecrement":{"color":cart.button_text_color?'#'+cart.button_text_color:"#fff","border-color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"},"quantityInput":{"color":cart.button_text_color?'#'+cart.button_text_color:"#fff","border-color":cart.accent_color?'#'+cart.accent_color:"#4c4c4c"}}};}
function _getModalProduct(){return{"contents":{"img":false,"imgWithCarousel":true,"variantTitle":false,"buttonWithQuantity":true,"button":false,"quantity":false},"styles":{"product":{"@media (min-width: 601px)":{"max-width":"100%","margin-left":"0px","margin-bottom":"0px"}},"button":{"background-color":"#ffea00","color":"#ffea00",":hover":{"background-color":"#e6d300","color":"#ffea00"},":focus":{"background-color":"#e6d300"}}}};}
function _getProductSet(){return{"styles":{"products":{"@media (min-width: 601px)":{"margin-left":"-20px"}}}};}
function _getToggle(cart){return{"styles":{"toggle":{"background-color":cart.button_background_color?'#'+cart.button_background_color:"#5f9d3e","color":cart.button_text_color?'#'+cart.button_text_color:"#fff",":hover":{"background-color":cart.button_background_color?'#'+cart.button_background_color:"#5f9d3e","color":cart.button_text_color?'#'+cart.button_text_color:"#fff"},":focus":{"background-color":cart.button_background_color?'#'+cart.button_background_color:"#5f9d3e","color":cart.button_text_color?'#'+cart.button_text_color:"#fff"}},"count":{"color":cart.button_text_color?'#'+cart.button_text_color:"#fff",":hover":{"color":cart.button_text_color?'#'+cart.button_text_color:"#fff",}},"iconPath":{"fill":cart.button_text_color?'#'+cart.button_text_color:"#fff",}}};}
this.getOptions=function(config){var theme;if(config.themes.id>1&&config.themes.custom['custom_'+config.themes.id])
theme=config.themes.custom['custom_'+config.themes.id];else
theme=config.themes.standard;return{product:_getProduct(theme),cart:_getCart(config.cart),lineItem:_getLineItems(config.cart),modalProduct:_getModalProduct(),toggle:_getToggle(config.cart),productSet:_getProductSet()};};})();;var Viewport=new(function(){var _self=this;var _elements;var _animationClass='animated';var _invisibleClass='animation-invisible';var _params={};var _windowSize={};var _funcInterval=1000;var _findElements=true;if($.browser.chrome&&$.browser.versionNumber>=61)
var _scrollElem='html';else{var _scrollElem=((navigator.userAgent.toLowerCase().indexOf('webkit')!=-1)?'body':'html');}
this.isRegistered=function(id){return(typeof _params[id]=='undefined'?false:true);};this.getInvisibleClass=function(){return _invisibleClass;};this.attachEvent=function(node,args){var rotate=$(node).css('transform');if(typeof rotate!='undefined'&&rotate!=''){$(node).find('[data-item]').css('transform',rotate);}
_params[node.id]={node:node,args:args};_self.resetAnimation(node);};this.removeEvent=function(node){if(_self.isRegistered(node.id)){var node=_params[node.id].node;var args=_params[node.id].args;$(node).removeClass(_animationClass+' '+_invisibleClass+' '+args.classToAnimation);delete _params[node.id];}};this.updateWindowSize=function(){_windowSize={height:$(window).height(),width:$(window).width()};};this.resetPageEvents=function(page){$(page).find('.hasAnimation').each(function(){_self.resetAnimation(this);});};this.resetAnimation=function(node){if(_self.isRegistered(node.id)){var node=_params[node.id].node;var args=_params[node.id].args;$(node).addClass('hasAnimation').removeClass(_animationClass+' '+_invisibleClass+' '+args.classToAnimation);if(typeof HTML_Load=='undefined'||HTML_Load.isSaving()){$(node).addClass(_invisibleClass);}}};this.checkIt=function(updateItens,clearEvent){if(typeof Publish_Transition=='undefined'||Publish_Transition.inProgress()||(typeof HTML_Load!='undefined'&&HTML_Load.isEditable())){return;}
var viewportStart=$(_scrollElem).scrollTop(),viewportEnd=(viewportStart+_windowSize.height);function checkViewPort(node,args){if($(node).hasClass(_animationClass)&&!args.repeat){if(args.classToAnimation.indexOf('Out')>=0||args.classToAnimation.indexOf('out')>=0){$(node).css('display','none');}
return;}
var elemStart=Math.round(node.offset().top)+(args.offset||0),elemEnd=elemStart+node.height();if((elemStart<viewportEnd)&&(elemEnd>viewportStart)){node.removeClass(_invisibleClass);node.addClass(_animationClass+' '+args.classToAnimation).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',function(){$(this).removeClass(args.classToAnimation);$(node).find('[data-item]').css('transform','');});}else if(node.hasClass(args.classToAnimation)&&(args.repeat)){node.removeClass(_animationClass+' '+args.classToAnimation).addClass(_invisibleClass);}}
for(var index in _params){checkViewPort($(_params[index].node),_params[index].args);}};$(window).bind("load scroll touchmove MSPointerMove",_self.checkIt).resize(function(e){_self.updateWindowSize();_self.checkIt();});_self.updateWindowSize();})();var Publish_Animation=new(function(){function _getDateFromCookie(){var d=_getCookie("timer_"+_conf.identifier);if(!d){var date=new Date();date.setSeconds(date.getSeconds()+_conf.addToDate.seconds);date.setMinutes(date.getMinutes()+_conf.addToDate.minutes);date.setHours(date.getHours()+_conf.addToDate.hours);date.setDate(date.getDate()+_conf.addToDate.days);date.setMonth(date.getMonth()+_conf.addToDate.months);date.setFullYear(date.getFullYear()+_conf.addToDate.years);d=date.toUTCString();_setCookie("timer_"+_conf.identifier,d,365*3);}
return d;}
function _setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*86400000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires;}
function _getCookie(name){var name=name+"=";var ca=document.cookie.split(';');for(var index in ca){var c=helper.trim(ca[index]);if(c.indexOf(name)==0)
return c.substring(name.length,c.length);}
return null;}
function _clearCookie(name){_setCookie(name,"",-1);}
this.animeIt=function(node,conf){$(node).addClass('hasAnimation').off('click.animation').off('mouseenter.animation');Viewport.removeEvent(node);if((typeof HTML_Load=='undefined'||(!HTML_Load.isEditable()&&!HTML_Load.isSaving()))&&typeof conf.animation=='string'&&conf.animation!='none'){if(conf.event=='countdown'){var arg={count:1,type:'countdown',days:0,hours:0,minutes:0,seconds:0};conf.countdown=$.extend(arg,conf.countdown);var time=conf.countdown.days*86400000+conf.countdown.hours*3600000+conf.countdown.minutes*60000+conf.countdown.seconds*1000;if(typeof HTML_Load=='undefined'&&conf.countdown.type=='evergreen'){var cookie_namespace="timer_animation_"+node.id+"_"+conf.countdown.count;var cookie=_getCookie(cookie_namespace);if(cookie==null){var d=new Date();d.setTime(d.getTime()+time);_setCookie(cookie_namespace,d.getTime(),9999);}else{var d=new Date();time=parseInt(cookie)-d.getTime();if(time<0){time=0;}}}
var invisibleClass=Viewport.getInvisibleClass();if(conf.animation.indexOf('fadeOut')==-1){$(node).addClass(invisibleClass);}
if(time<86400000){setTimeout(function(){$(node).removeClass(invisibleClass).addClass(conf.animation+' animated');if(conf.animation.indexOf('Out')>=0||conf.animation.indexOf('out')>=0){setTimeout(function(){$(node).css('display','none');},1000);}},time);}}else if(typeof conf.event=='string'&&conf.event!='auto'){$(node).on(conf.event+'.animation',function(){var rotate=$(node).css('transform');if(typeof rotate!='undefined'&&rotate!=''){$(node).find('[data-item]').css('transform',rotate);}
$(this).addClass(conf.animation+' animated').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',function(){$(this).removeClass(conf.animation+' animated');$(node).find('[data-item]').css('transform','');});});}else{Viewport.attachEvent(node,{classToAnimation:conf.animation,offset:0,repeat:false});}}};})();;var Publish_CaixaAba=new(function(){var _self=this;this.attachEvent=function(element,config){var navTabs=$(element).find('.nav-tabs').get(0),contentTabs=$(element).find('.content-tabs').get(0);_self.hideTabs(element,config.hideTabs,config);if(config.slider_active){var attr={element:element,configs:config,progress:false,builder:_builder};if(typeof HTML_Load=='undefined')
Omb_SliderCaixaAba(attr);else if(HTML_Load.isPreview())
Omb_SliderCaixaAba(attr);_self.positionArrows($(element).find('.os_arrows .nav-control'),config.slider_arrows);_self.positionBullets($(element).find('.os_controls'),config.slider_controls);}else{_self.positionArrows($(element).find('.os_arrows .nav-control'));_self.positionBullets($(element).find('.os_controls'));}
var progress=false;$(navTabs).find('li').each(function(){_applyCss($(this),config);$(this).off('click').on('click',function(){if(!progress&&!$(this).hasClass('active')){var hideNode=$(contentTabs).find('> .content-tab.active').removeClass("active");var showNode=$(contentTabs).find('> .content-tab[data-ref='+$(this).attr('data-ref')+']');$(navTabs).find('.active').removeClass('active');$(navTabs).find('> .active').removeClass("active");$(this).addClass('active');_self[config.transition]({hideNode:hideNode,showNode:showNode,contentTabs:contentTabs,config:config,complete:function(){progress=false;}});}});});};function _applyCss(aba,config){if(config.direction=="vertical")
aba.css({float:config.position,width:'inherit'});else
aba.css({float:config.position,width:'auto'});}
this.fade=function(args){if(typeof Publicar=='undefined'){helper.showModal();}
args.hideNode.hide('fade',{duration:args.config.speed});args.showNode.addClass('active').show({direction:args.config.originTransition,duration:args.config.speed,start:function(){$(args.contentTabs).css({overflow:'hidden'});},complete:function(){helper.hideModal();$(args.contentTabs).css({overflow:'inherit'});if(typeof args.complete=='function')
args.complete();}});};this.slide=function(args){var afterDirection=args.config.originTransition=='left'?'right':'left';args.hideNode.hide('drop',{direction:afterDirection,duration:args.config.speed});args.showNode.addClass('active').show({direction:args.config.originTransition,duration:args.config.speed,easing:'easeInCubic',start:function(){$(args.contentTabs).css({overflow:'hidden'});},complete:function(){helper.hideModal();$(args.contentTabs).css({overflow:'inherit'});if(typeof args.complete=='function')
args.complete();}});};this.hideTabs=function(element,hideTabs,config){var direction=config.direction;function _show(){$(element).find(' > .smooth-scroll').show();if((direction=="vertical")&&(config.position=="right")){$(element).find('ul').addClass('standing');$(element).find('> .smooth-scroll').css({float:config.position,width:'20%',height:'100%'});$(element).find('> .content-tabs').css({height:'100%',width:'80%','margin-left':'0',});}else if(direction=="vertical"&&config.position=="left"){$(element).find('ul').addClass('standing');$(element).find('> .smooth-scroll').css({float:config.position,width:'20%',height:'100%'});$(element).find('> .content-tabs').css({height:'100%',width:'80%','margin-left':'20%',});}else if(direction=="horizontal"){$(element).find('> .smooth-scroll').css({float:'none',width:'100%',height:'40px'});;$(element).find('ul').removeClass('standing');$(element).find('> .content-tabs').css({height:'calc(100% - 40px)',width:'100%','margin-left':'0',});}}
function _hide(){$(element).find('.smooth-scroll').hide();$(element).find('.content-tabs').css({height:'100%'});}
if(typeof hideTabs!='undefined'&&hideTabs){_hide();if(typeof HTML_Load!='undefined'&&HTML_Load.isEditable()){$(element).on('mouseenter',function(){$(element).find(' > .smooth-scroll').css({position:'absolute',top:'0px',height:'40px',width:'100%','z-index':3}).show();}).on('mouseleave',function(){_hide();});}}else{$(element).off();_show();}};this.positionArrows=function(element,position){$(element).removeClass('nav-outside').removeClass('nav-inside');if(!position||position=='none')
$(element).hide();else{$(element).show();$(element).addClass('nav-'+position);}};this.positionBullets=function(element,position){$(element).removeClass('outside').removeClass('inside');if(!position||position=='none')
$(element).hide();else{$(element).show();$(element).addClass(position);}};function _builder(nodes){nodes.each(function(){var objHTML=new Publish_CustomHTML();$(this).empty();objHTML.getNode().appendTo(this);var config={};if(typeof Publication_Config_Items!='undefined')
config=Publication_Config_Items.getConfig(this.id);else
config={type:$(this).get(0).getInstance().getType(),html:$(this).get(0).getInstance().getHTML()};objHTML.setType(config.type);objHTML.setHTML(config.html);objHTML.refresh();objHTML.resize($(this).width(),$(this).height());this.getInstance=function(){return objHTML;};});}})();;var Publish_MemberShip=new(function(){var _self=this;var _element,_colors;var _content={welcome:"",purchases:"",profile:"",restrict_areas:""};this.attachEvent=function(element,config,colors){var navTabs=$(element).find('.membership-nav-tabs').get(0),contentTabs=$(element).find('.membership-content-tabs').get(0),tabContent=$(contentTabs).find('> .membership-tab-content.active'),type=tabContent.data('ref');_self.hideTabs(element,config.hideTabs,config);_element=element;_colors=colors;$(navTabs).find('li').each(function(){$(this).off('click').on('click',function(){if(!$(this).hasClass('active')){var type=$(this).attr('data-ref');$(contentTabs).find('> .membership-tab.active').removeClass("active");$(contentTabs).find('> .membership-tab[data-ref='+$(this).attr('data-ref')+']');$(contentTabs).find('> .membership-tab-content.active').removeClass("active").css({display:'none'});var showContentTab=$(contentTabs).find('> .membership-tab-content[data-ref='+$(this).attr('data-ref')+']').addClass('active').css({display:'block'});$(navTabs).find('.active').removeClass('active');$(navTabs).find('> .active').removeClass("active");$(this).addClass('active');if(_content[type]=="")
_getSectionContent(type,showContentTab);else
_showContent(showContentTab,_content[type]);_self.applyConfigColors(_element,_colors);}});});_getSectionContent(type,tabContent);};this.callAction=function(type,contentTab){var tipo=type;if(tipo=='restrict_areas')
tipo='area';else if(tipo=='purchases')
tipo='purchase';var data={section:tipo};$.ajax({url:'/membership/get-content',type:'POST',dataType:'json',data:data,success:function(response){if(response.success){_content[type]=response.content;_showContent(contentTab,_content[type]);}else{window.location='./';}},error:function(response){console.log(response);}});};function _getSectionContent(type,contentTab){if(type!='welcome'){if(_content[type]=="")
_self.callAction(type,contentTab);else
_showContent(contentTab,_content[type]);}}
function _showContent(contentTab,content){$(contentTab).empty();$(content).appendTo(contentTab);_self.applyConfigColorTable(contentTab,_colors);}
this.applyConfigColors=function(element,colors){var menuTabs=$(element).find('.membership-nav-tabs .membership-tab:not(.active) a');var menuTabsActive=$(element).find('.membership-nav-tabs .membership-tab.active a');$(element).find('ul').css({backgroundColor:colors.backgroundColorMenu});$(element).find('.membership-nav-tabs .membership-tab a').css({color:colors.colorText,backgroundColor:colors.backgroundTab});$(menuTabs).mouseover(function(){$(this).css({color:colors.colorTextHover,backgroundColor:colors.backgroundTabHover});});$(menuTabs).mouseleave(function(){$(this).css({color:colors.colorText,backgroundColor:colors.backgroundTab});});$(element).find('.membership-nav-tabs .membership-tab.active a').css({color:colors.colorTextActive,backgroundColor:colors.backgroundTabActive});$(menuTabsActive).mouseover(function(){$(this).css({color:colors.colorTextActive,backgroundColor:colors.backgroundTabActive});});$(menuTabsActive).mouseleave(function(){$(this).css({color:colors.colorTextActive,backgroundColor:colors.backgroundTabActive});});$(element).find('.membership-content-tabs').css({backgroundColor:colors.backgroundContent});$(element).find('.membership-content-tabs .membership-tab-content').css({backgroundColor:colors.backgroundContent});};this.applyConfigColorTable=function(contentTab,colors){$(contentTab).find('.table-membership > thead').css({backgroundColor:colors.backgroundTableHead});$(contentTab).find('.table-membership tbody tr td').css({textAlign:'center',backgroundColor:colors.backgroundTableBody});};this.hideTabs=function(element,hideTabs,config){var direction=config.orientation;function _show(){$(element).find(' > .smooth-scroll').show();if(direction=="vertical"){$(element).find('ul').addClass('standing');$(element).find(' > .smooth-scroll').css({float:'left',width:'20%',height:'100%'});$(element).find('.membership-content-tabs').css({height:'100%',width:'80%','margin-left':'20%'});}else if(direction=="horizontal"){$(element).find(' > .smooth-scroll').css({float:'none',width:'100%',height:'40px'});;$(element).find('ul').removeClass('standing');$(element).find('.membership-content-tabs').css({height:'calc(100% - 40px)',width:'100%','margin-left':'0'});}}
function _hide(){$(element).find('.smooth-scroll').hide();$(element).find('.membership-content-tabs').css({height:'100%'});}
if(typeof hideTabs!='undefined'&&hideTabs){_hide();if(typeof HTML_Load!='undefined'&&HTML_Load.isEditable()){$(element).on('mouseenter',function(){$(element).find(' > .smooth-scroll').css({position:'absolute',top:'0px',height:'40px',width:'100%','z-index':3}).show();}).on('mouseleave',function(){_hide();});}}else{$(element).off();_show();}};});;var Publish_Background=new(function(){var _self=this;var _video;var _texture;var _overlay;var _last_src;var _videoThumb;this.getData=function(id){if(typeof Property_Controller!='undefined'){var property=Property_Controller.getInstanceById(id);var data=property.getDataProperty();}else if(typeof Publication_Config_Items!='undefined'){var data=Publication_Config_Items.getConfig(id);}
return data;};this.getDataBodyParallax=function(){var id_layout=Publish_Transition.getCurrentLayoutID();var l_data=_self.getData(id_layout);var p_data=_self.getData(Publish_Transition.getCurrentPageID());var layout=$('#'+id_layout);var data=null;if(p_data&&p_data.bgimage&&p_data.bgimage.hasImage){if(p_data.parallax&&p_data.parallax.enable){data=p_data.parallax;}}else if(l_data&&l_data.parallax&&l_data.parallax.enable&&l_data.bgimage&&l_data.bgimage.hasImage){data=l_data.parallax;}
return{layout:layout.get(0),data:data};};this.applyBodyParallax=function(){var bodyParallax=_self.getDataBodyParallax();omb_parallax.remove(bodyParallax.layout);if(bodyParallax.data){$(bodyParallax.layout).addClass('parallax');omb_parallax.add(bodyParallax.layout,bodyParallax.data,true);}else{$(bodyParallax.layout).removeClass('parallax');}};this.setParallax=function(){if(!helper.isFacebookAppUserAgent()){omb_parallax.reset();$('.parallax').each(function(){if(!$(this).hasClass('page')&&!$(this).hasClass('body')){var dataitem=$(this).attr('data-item').indexOf('Faixa');if(dataitem>-1&&this.video&&this.video.effect.type=='parallax'&&this.video.source!=''){return;}
var node=helper.getContainer(this);var data=_self.getData(node.id);if(data.parallax&&data.parallax.enable){omb_parallax.add(this,data.parallax,true);}}});_self.applyBodyParallax();}};_overlay=$("<div>").addClass('video-overlay');_videoThumb=$("<div>").addClass('video-thumb').appendTo(_overlay);_video=$('<video>').prop({loop:true,muted:true}).addClass('fullScreen_video').appendTo(_overlay);if(typeof HTML_Load=='undefined'||HTML_Load.isPreview()){_video.prop({autoplay:true,muted:true});}
_texture=$('<div>').addClass('fullScreen_texture');this.playVideo=function(){_video.get(0).play();};this.pauseVideo=function(){_video.get(0).pause();};this.loadVideo=function(src,force){if(force||_last_src!=src){_video.find('source').remove();_videoThumb.css('background-image','');if(typeof Publicar!='undefined'&&Publicar.getOptions('deviceDetected')=='3'){if(typeof src=='string'&&src!=''){_videoThumb.css('background-image','url("/generate/video/thumb/'+helper.toBase64(src)+'")');}}else{if(typeof src=='string'&&src!=''){_videoThumb.css('background-image','url("/generate/video/thumb/'+helper.toBase64(src)+'")');if(typeof Publicar!='undefined'&&Publicar.getOptions('deviceDetected')!='3'){}
var type="video/"+src.split(".").pop();$('<source>').attr({src:src,type:type,muted:true,}).appendTo(_video);$('<source>').attr({src:"/generate/video/ogg/"+helper.toBase64(src),type:'video/ogg'}).appendTo(_video);_video.show();}else{_video.hide();}
_last_src=src;_video.get(0).load();if(typeof HTML_Load=='undefined'||!HTML_Load.isEditable()){function checkLoad(){if(_video.get(0).readyState===4){_self.playVideo();}else{setTimeout(checkLoad,100);}}
checkLoad();}}}};this.setVideo=function(force){var id_layout=Publish_Transition.getCurrentLayoutID();var id_page=Publish_Transition.getCurrentPageID();var l_data=_self.getData(id_layout)&&typeof _self.getData(id_layout).video!='undefined'?_self.getData(id_layout).video:'';var p_data=_self.getData(id_page)&&typeof _self.getData(id_page).video!='undefined'?_self.getData(id_page).video:'';if(p_data&&p_data.source){var src=p_data.source;}
if(!src&&p_data&&p_data.extend){var src=l_data.source;}
this.loadVideo(src,force);};this.changeBackground=function(force){var id_page=Publish_Transition.getCurrentPageID();var id_layout=Publish_Transition.getCurrentLayoutID();$('#'+id_layout).removeAttr('class');$('#'+id_layout).addClass('body');$('#'+id_layout).removeClass(function(){return helper.getCustomClass(this.className);}).addClass('custom_page_bg_'+id_page);$('#'+id_layout).addClass($('#view').attr('class')+'-background');$('#'+id_layout).addClass($('#view').attr('class')+'-background-page-'+id_page);$(_texture).removeAttr('class');$(_texture).addClass('fullScreen_texture');$(_texture).attr('data-layout-id',id_layout);$(_texture).addClass('texture-'+$('#view').attr('class')+'-background-page-'+id_page);$(_texture).addClass('texture-'+$('#view').attr('class')+'-background');_texture.prependTo('#'+id_layout);if(typeof Publicar==="undefined"){helper.clearClassesBackground(id_page,id_layout,_texture);}
if($('#view').attr('class')==='desktop'){_self.setVideo(force);if(!$('#'+id_layout).has(' > .video-overlay').length){if(!helper.isLumiaAppUserAgent()){_overlay.prependTo('#'+id_layout);}}}
_self.setParallax();if(typeof Publicar!='undefined'&&Publicar.getOptions('deviceDetected')=='3'||helper.isFacebookAppUserAgent()){_video.detach();}};})();;var Publish_BarraSociais=function(target){var _self=this;var _target=target;function _setSource(image,source,sourceHover){if(source&&sourceHover){image.on('mouseover',function(){$(this).attr('src',sourceHover);}).on('mouseleave',function(){$(this).attr('src',source);});}}
this.buildColor=function(){var img=$(_target).find('img');var color=$(img).attr('data-color');var hover=$(img).attr('data-color-hover');if(hover&&color!=hover){var source=$(img).attr('src');var pieces=source.split('/');if(pieces.length==5){pieces.pop();}
var hoverSource=pieces.join('/')+'/'+hover;_setSource(img,source,hoverSource);}}};;var Publish_CustomHTML=function(){var _self=this;var _node;var _attached=true;var _iframe=new Publish_Utility_iFrame();for(var o in _iframe){this[o]=_iframe[o];}
_node=$('<div>').css({overflow:'hidden',position:'relative',width:'100%',height:'100%'}).addClass('empty-html').attr('data-item','CustomHtml');if(typeof HTML_Load!='undefined'&&HTML_Load.isEditable()){helper.addDivBlock(_node);}
_self.getContent().appendTo(_node);this.hide=function(){if(_attached){_attached=false;_iframe.getNode().detach();}};this.show=function(){if(!_attached){_attached=true;_iframe.getNode().appendTo(_node);}};this.refresh=function(){var html=_self.getHTML();if(html&&html!=''){_node.removeClass('empty-html');try{_self.load();}catch(e){$(function(){$(_self.getContent()).load(function(){_self.load();});});}}else{_node.addClass('empty-html');}};this.getNode=function(){return _node;};};;var Publish_GoogleMaps=function(config){if(!config){return null;}
var _edicao=true;var _self=this;var _SVService=new google.maps.StreetViewService();var _objLatLng=new google.maps.LatLng(config.latMap,config.lngMap);var _geocoder=new google.maps.Geocoder();var _directionsService=new google.maps.DirectionsService();var _directionsDisplay;var _control;var _map;var _marker;var _onZoom=function(){};var _onDraged=function(){};var _panorama;var _infowindow;var _modal;config.showStreet=helper.fixBoolean(config.showStreet);config.showDirection=helper.fixBoolean(config.showDirection);if(config.showStreet==''){config.showStreet=false;}
if(config.showDirection==''){config.showDirection=false;}
var _html=$('<div>').addClass("content-google-maps").addClass(config.showStreet?'show-street-view':'');var _htmlMap=$('<div>').addClass("google-maps").appendTo(_html);var _htmlStreetView=$('<div>').addClass("google-street-view").appendTo(_html);var _htmlDirectionPanel=$('<div>').addClass("google-direction").appendTo(_html);$('<div>').css('clear','both');_modal=$('<div>').addClass('modal fade').css({top:'30px'}).appendTo(_html);_modalDialog=$('<div>').addClass('modal-dialog').appendTo(_modal);_modalContent=$('<div>').addClass('modal-content').appendTo(_modalDialog);_modalHeader=$('<div>').addClass('modal-header').appendTo(_modalContent);_modalButton=$('<button>').addClass("close").attr({'data-dismiss':'modal'}).text('X').appendTo(_modalHeader);$('<h4>').addClass('modal-title').text(config.routeView).appendTo(_modalHeader);_modalBody=$('<div>').addClass('modal-body').css({height:'500px',overflow:'scroll'}).appendTo(_modalContent);this.getHTML=function(){setTimeout(function(){_self.resize();},200);return _html;};this.setInfo=function(){var contentString='';if(config.imagemInfoMap){contentString='<img src="'+config.imagemInfoMap+'" border="0" width="90" height="60"><br />';}
contentString+='<b>'+config.tituloInfoMap+'</b>';_infowindow.setContent(contentString);};this.resize=function(){google.maps.event.trigger(_map,'resize');_map.setCenter(_objLatLng);if(_panorama){google.maps.event.trigger(_panorama,'resize');}};this.onDraged=function(func){if(typeof func=='function'){_onDraged=func;}};this.onZoom=function(func){if(typeof func=='function'){_onZoom=func;}};this.setConfig=function(key,value){config[key]=value;};this.getConfig=function(){return config;};this.setEdicao=function(edicao){_edicao=edicao;};this.getEdicao=function(){return _edicao;};this.codeAddress=function(address){_geocoder.geocode({'address':address},function(results,status){if(status==google.maps.GeocoderStatus.OK){_objLatLng=results[0].geometry.location;_marker.setPosition(results[0].geometry.location);_map.setCenter(results[0].geometry.location);if(_panorama){_panorama.setPosition(results[0].geometry.location);}}});};this.showStreetView=function(){_html.addClass('show-street-view');if(_panorama){_panorama.setVisible(true);}
this.resize();};this.hideStreetView=function(){if(_panorama){_panorama.setVisible(false);}
_html.removeClass('show-street-view');this.resize();};this.showDirection=function(){_control.show();if(!_edicao){_htmlDirectionPanel.show();}};this.hideDirection=function(){_control.hide();if(!_edicao){_htmlDirectionPanel.hide();}};(function(){var mapOptions={zoom:parseInt(config.zoomMap),center:_objLatLng,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:false};_map=new google.maps.Map(_htmlMap.get(0),mapOptions);_geocoder.geocode({'address':config.address},function(results,status){if(status==google.maps.GeocoderStatus.OK){_objLatLng=results[0].geometry.location;_marker.setPosition(results[0].geometry.location);_map.setCenter(results[0].geometry.location);if(_panorama){_panorama.setPosition(results[0].geometry.location);}}else{if(typeof Publicar=="undefined"){Base_Alert({msg:Translate.get('gmaps-error-address'),onConfirm:function(){},text_btn_confirm:'OK',show_btn_cancel:false});}else{console.log(status);}}});_marker=new google.maps.Marker({map:_map,draggable:true,animation:google.maps.Animation.DROP,position:_objLatLng});_infowindow=new google.maps.InfoWindow({content:'',maxWidth:150});_self.setInfo();_SVService.getPanoramaByLocation(_map.getCenter(),50,_startStreetView);_startDirection();google.maps.event.addListener(_marker,'click',function(){_infowindow.open(_map,_marker);});google.maps.event.addListener(_marker,'dragend',function(event){config.latMap=_marker.getPosition().lat();config.lngMap=_marker.getPosition().lng();_onDraged(_marker);});google.maps.event.addListener(_map,'zoom_changed',function(event){config.zoomMap=_map.getZoom();_onZoom(_map);});})();function _startDirection(){_directionsDisplay=new google.maps.DirectionsRenderer();_directionsDisplay.setMap(_map);_directionsDisplay.setPanel(_modalBody.get(0));$('<button>').attr({type:'submit'}).appendTo(_control);_control=$('<form>').addClass('row').css({position:'absolute',bottom:'0px',left:'103px',marginBottom:'20px',display:(config.showDirection?'block':'none')}).on('submit',function(event){event.preventDefault();if(_edicao){alert(config.errorPreView);}else{var destination=inputDestination.val();if(destination){_calcRoute(destination);}}});var divAdress=$('<div>').addClass('col-sm-10').appendTo(_control);var inputDestination=$('<input>').attr({placeHolder:'My Address',type:'text'}).addClass('form-control').appendTo(divAdress);var divButton=$('<div>').addClass('col-sm-2').css({paddingLeft:0,left:'-20px',paddingRight:0}).appendTo(_control);var button=$('<button>').attr({type:'submit'}).css({border:'0px','border-radius':'0px 5px 5px 0px',background:'none',margin:'-2px 0 0 -5px'}).appendTo(divButton);$('<span>').addClass('fa fa-search fa-3 btn btn-success').css({'line-height':'32px',padding:'0',width:'40px',display:'inline-block','border-radius':'0 5px 5px 0'}).appendTo(button);_map.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(_control.get(0));};function _calcRoute(destination){var request={origin:config.address,destination:destination,travelMode:google.maps.TravelMode.DRIVING};_directionsService.route(request,function(response,status){_htmlDirectionPanel.removeClass('show').hide();if(status==google.maps.DirectionsStatus.OK){_directionsDisplay.setDirections(response);_modal.modal('show');}else{alert(status);}});};function _startStreetView(data,status){if(status==google.maps.StreetViewStatus.OK){var panoramaOptions={position:_map.getCenter(),linksControl:false,addressControl:true,panControl:true,enableCloseButton:false,addressControlOptions:{position:google.maps.ControlPosition.TOP},pov:{heading:parseFloat(config.streetHeadingMap),pitch:parseFloat(config.streetPitchMap),zoom:parseInt(config.streetZoomMap)}};_panorama=new google.maps.StreetViewPanorama(_htmlStreetView.get(0),panoramaOptions);_panorama.setVisible(config.showStreet);_map.setStreetView(_panorama);google.maps.event.addListener(_panorama,'position_changed',function(){config.latMap=_panorama.getPosition().lat();config.lngMap=_panorama.getPosition().lng();});google.maps.event.addListener(_panorama,'pov_changed',function(){config.streetHeadingMap=_panorama.getPov().heading;config.streetPitchMap=_panorama.getPov().pitch;config.streetZoomMap=_panorama.getPov().zoom;});}}};;var Publish_Menu=new(function(){this.attachItemEvent=function(selector){if(typeof HTML_Load!='undefined'){var device=HTML_Load.getConfig('device');}else{var device=Publicar.getOptions('device');}
var parent=$(selector).parent().parent()[0];var dataItem;if(typeof parent!=='undefined'){if(typeof $(parent).attr('data-item')!=='undefined')
dataItem=$(parent).attr('data-item');}
if(device=='desktop'){selector.on('mouseenter',function(){var nivel=parseInt($(this).attr('data-nivel'));if(nivel>1){var nodes=$(this).find('li').andSelf();nodes.removeClass(function(){return helper.getClassToRemove(this.className,'shadow_');});nodes.addClass('shadow_'+nivel);}}).on('mouseleave',function(){var nivel=parseInt($(this).attr('data-nivel'));var nodes=$(this).find('li').andSelf();nodes.removeClass(function(){return helper.getClassToRemove(this.className,'shadow_');});if(nivel>0){nodes.addClass('shadow_'+(nivel-1));}});if(typeof Publicar!='undefined'){selector.each(function(index,element){var tag_a=element.getElementsByTagName('a');var s=$(tag_a).attr("href");$(tag_a).attr('href',Publicar.normalizePageAddress(s));});}}else if(dataItem=='Menu_Mobile'){selector.each(function(){$(this).css({'padding-right':'20px',position:'relative'});var submenu=$($(this).find('.submenu').get(0));submenu.css('display','none');$(this).find('a').on('click',function(){_emptyMenu();});$('<button>').addClass('btn btn-xs btn-default btn-caret-down').on('click',function(){if(submenu.css('display')=='none'){submenu.show("slide",{direction:"up"},500);$(this).html('<i class="fa fa-caret-up"></i>');}else{submenu.hide("slide",{direction:"up"},500);$(this).html('<i class="fa fa-caret-down"></i>');}
Publish_Resize.resizeContent();}).html('<i class="fa fa-caret-down"></i>').appendTo(this);});}else if(typeof dataItem!=='undefined'){selector.on('click',function(e){if($(this).hasClass('Menu-Children')&&$(this).hasClass('selected')){var submenu=$($(this).find('.submenu').get(0));submenu.css('display','none');$(this).addClass('click');return true;}else if($(this).hasClass('Menu-Children')){$(this).addClass('selected');e.preventDefault();return false;}});}};function _emptyMenu(){$('[data-item="Menu_Mobile"]').each(function(){var menuPrincipal=$(this).find('ul')[0];$(menuPrincipal).css('display','none');$(menuPrincipal).find('.submenu').each(function(){$(this).css('display','none');});});}
function _getMarginTop(node,listItems){var isHeader=helper.getParent(node,'Header');if(isHeader==null){var wH=$(window).height();var wT=$(window).scrollTop();var wB=wH+wT;var nH=$(node).height();var nT=$(node).offset().top;var nB=nT+nH;if(wB-nB<300){return-($(listItems).outerHeight()+nH+10);}}
return 0;}
function _getOffsetLeft(node){var i=0;var c=$(node).parent().closest('[name="element"]').get(0);do{if(c){node=c;c=$(c).parent().closest('[name="element"]').get(0)}}while(i<10&&c);return $(node).offset().left;}
this.attachBtnMenuMobileEvent=function(selector){selector.each(function(){var node=this;var progress=false;var btn=$(this).children('.btn-menu-mobile').get(0);var listItems=$(this).children('.items-list').get(0);$(listItems).css({overflowY:'auto',maxHeight:($(window).height()-100)+'px'});$(btn).on('click',function(){if(!progress){progress=true;if(listItems.style.display=='block'){$(listItems).hide('fade',{easing:'easeInExpo',direction:'up'},300,function(){progress=false;});}else{if(helper.isChildBase(node,'Footer'))
$(listItems).css({marginTop:_getMarginTop(node,listItems)+'px'})
$(listItems).show('fade',{easing:'easeInExpo',direction:'up'},300,function(){progress=false;}).offset({left:_getOffsetLeft(node)});}}});});if(typeof Publicar!='undefined'){selector.each(function(){var listItems=$(this).children('.items-list').get(0);$(listItems).find('a').each(function(index,element){var href=$(element).attr('href');$(element).attr('href',Publicar.normalizePageAddress(href));});});}};})();;var DrippingMenuRender=new function(){var _self=this;var _container_id;var items;this.render=function(_items,dataItem,config_menu,container_id){items=_items;_container_id=container_id;items.forEach(function(item){_self.setLocalStorage(DrippingMenuItemController.getItemByRef(items,item.ref));_self.validate(item);});var ul_first_level=$('<ul>').attr('data-item',dataItem).addClass('font_0 color_0 Menu');var items_first_level=DrippingMenuItemController.getItemsByLevel(items,1);var count_dripping=0;items_first_level.forEach(function(item){var menu_item=DrippingMenuItemController.getItemByRef(items,item)
if(menu_item.dripping){count_dripping+=1;}});if(typeof HTML_Load!=='undefined'&&HTML_Load.isPreview()){if(!config_menu.preview_preview&&count_dripping===items_first_level.length){return $('<div>');}}
items_first_level.forEach(function(item_first){var father=DrippingMenuItemController.getItemByRef(items,item_first);var father_li=_self.addItem(father,ul_first_level,config_menu);if(father.sons.length>0&&father_li){var ul_sons=$('<ul>').addClass('submenu').appendTo(father_li);var items_second_level=DrippingMenuItemController.getSonsByRef(items,father.ref);items_second_level.forEach(function(item_second){var son=DrippingMenuItemController.getItemByRef(items,item_second);var son_li=_self.addItem(son,ul_sons,config_menu);if(son.sons.length>0&&son_li){var ul_grandsons=$('<ul>').addClass('submenu').appendTo(son_li);var items_third_level=DrippingMenuItemController.getSonsByRef(items,son.ref);items_third_level.forEach(function(item_third){var grandson=DrippingMenuItemController.getItemByRef(items,item_third);_self.addItem(grandson,ul_grandsons,config_menu);});}})}});return ul_first_level;};this.addItem=function(item,ul,config_menu){var li=$('<li>');li.css('cursor','pointer');var link=$('<a>').html(item.text);link.css('text-decoration','none');var control=true;if(item.click){if(typeof Publicar!=='undefined'||HTML_Load.isPreview()){link.click(function(){Publish_Link.call(item.link);})}}
if(item.dripping){var time_to_show=localStorage.getItem(_container_id+item.ref);if(time_to_show===null||localStorage.getItem(_container_id+item.ref+'-updated')<item.configs.updated){time_to_show=_self.setLocalStorage(item);}
if(typeof HTML_Load!=='undefined'&&HTML_Load.isPreview()){if(!_self.showItem(item,time_to_show)){if(config_menu.preview_preview&&item.sons.length===0){if(typeof Publicar!=='undefined'||HTML_Load.isPreview()){li.css('cursor','wait');link=null;link=$('<a>');link.html(item.text+' '+_self.leftTime(item));link.css('text-decoration','none');link.click(function(){console.log('dont');})}}else{if(typeof HTML_Load!=='undefined'&&HTML_Load.isPreview()){control=false;}
if(typeof Publicar!=='undefined'){control=false;}}}else{if(typeof HTML_Load!=='undefined'&&HTML_Load.isPreview()){link.html(item.text+' '+Translate.get('dripping-active'));control=true;}
if(typeof Publicar!=='undefined'){control=true;}}}
if(typeof Publicar!=='undefined'){if(!_self.showItem(item,time_to_show)){if(config_menu.preview_publication&&item.sons.length===0){if(typeof Publicar!=='undefined'||HTML_Load.isPreview()){li.css('cursor','wait');link=null;link=$('<a>');link.html(item.text+' '+_self.leftTime(item));link.css('text-decoration','none');link.click(function(){console.log('dont');})}}else{if(typeof HTML_Load!=='undefined'&&HTML_Load.isPreview()){control=false;}
if(typeof Publicar!=='undefined'){control=false;}}}else{if(typeof HTML_Load!=='undefined'&&HTML_Load.isPreview()){link.html(item.text+' '+Translate.get('dripping-active'));control=true;}
if(typeof Publicar!=='undefined'){control=true;}}}
if(config_menu.preview_editor){if(typeof Publicar==='undefined'||typeof HTML_Load!=='undefined'&&!HTML_Load.isPreview()){link.html(item.text+DrippingMenuItemController.predictionTime(item.dripping,item.configs))}}}
if(control){li.appendTo(ul);link.appendTo(li);return li;}else{return control}};this.setLocalStorage=function(item){if(item.dripping){var refStorage=_container_id+item.ref;var config=item.configs;var seconds=(config.days*24*60*60+config.hours*60*60+config.minutes*60);if(localStorage.getItem(refStorage+'-updated')===null||localStorage.getItem(refStorage+'-updated')<config.updated){localStorage.setItem(refStorage+'-updated',config.updated);localStorage.setItem(refStorage,new Date(new Date().getTime()+seconds*1000).getTime());}}};this.showItem=function(item,time){var res=false;var temp=parseInt(new Date().getTime());if(temp>parseInt(time)){res=true;}
return res;};this.leftTime=function(item){var dif=Math.abs(parseInt(localStorage.getItem(_container_id+item.ref))-parseInt(new Date().getTime()));var minutes=1000*60;var config={days:0,hours:0,minutes:Math.round(dif/minutes)};var final_time=DrippingMenuItemController.validateTime(config,1);return('available on : '+DrippingMenuItemController.predictionTime(true,final_time));};this.validate=function(item){var page;if(item.type==='page'){if(typeof HTML_Load!=='undefined'){page=HTML_Structure_Controller.getPages()[item.link.pagina];if(typeof page==='undefined'){this.removeItems(item.ref);}}else{page=Publicar.getPageById(item.link.pagina)
if(typeof page==='undefined'){this.removeItems(item.ref);}}}};this.removeItems=function(ref){var father=ref;var sons=DrippingMenuItemController.getSonsByRef(items,ref);var grandsons=[];sons.forEach(function(son){var array=DrippingMenuItemController.getSonsByRef(items,son);array.forEach(function(arr){grandsons.push(arr);})});items=DrippingMenuItemController.destroy(items,father);sons.forEach(function(son){items=DrippingMenuItemController.destroy(items,son);});grandsons.forEach(function(grandson){items=DrippingMenuItemController.destroy(items,grandson);});if(typeof HTML_Load!=='undefined'){var target=Property_Controller.getInstanceById(_container_id).getInstance();target.setMenuItems(items);}else{}}};;var DrippingMenuItemController=new function(){this.getItemsByLevel=function(array,level){var search={};if(level===1){search={father:true,child:false}}else{if(level===2){search={father:true,child:true}}else{search={father:false,child:true}}}
var res=[];array.forEach(function(item){if(item.father===search.father&&item.child===search.child){res.push(item.ref)}});return res;};this.getItemByRef=function(array,ref){var res=0;array.forEach(function(item){if(item.ref===ref){res={};res=item;}});return res;};this.getItemByLink=function(array,Link){};this.getSonsByRef=function(array,ref){var res=[];array.forEach(function(item){if(item.parent===ref){res.push(item.ref)}});return res;};this.getType=function(item){var res;if(item.father&&!item.child){res=1;}
if(item.father&&item.child){res=2;}
if(!item.father&&item.child){res=3;}
return res;};this.convertPage=function(page){return{ref:page.getIdEditor(),text:page.getName(),click:true,link:{pagina:page.getIdEditor(),redirect_config:{type:'page',value:{}},type:'pagina'},child:false,parent:'',father:false,sons:[],dripping:false,configs:{minutes:0,hours:0,days:0,updated:new Date().getTime().toString()},type:'page'}};this.createItem=function(name,link){var click=true;if(!link){click=false;}
return{ref:new Date().getTime().toString(),text:name,click:click,link:link,child:false,parent:'',father:false,sons:[],dripping:false,configs:{minutes:0,hours:0,days:0,updated:new Date().getTime().toString()},type:'custom'}};this.validateTime=function(config,factor){factor=parseInt(factor);var res={dripping:false,minutes:parseInt(config.minutes)*factor,hours:parseInt(config.hours)*factor,days:parseInt(config.days)*factor};var minutes=parseInt(config.minutes)*factor;var hours=parseInt(config.hours)*factor;if(Math.floor(minutes/60)>0){res.minutes=minutes%60;res.hours=parseInt(res.hours+Math.floor(minutes/60));}
if(Math.floor(hours/24)>0){res.hours=hours%24;res.days=parseInt(res.days+Math.floor(hours/24));}
if((res.minutes+res.hours+res.days)>0){res.dripping=true;}
return res};this.getPageUrl=function(ref){return{pagina:ref,redirect_config:{type:'page',value:{}},type:'pagina'}};this.destroy=function(array,ref){var res=[];array.forEach(function(item){if(item.ref!==ref){res.push(item);}});return res;};this.predictionTime=function(hasDripping,config){var res;if(hasDripping){res='&nbsp;('+config.days+' '+Translate.get('days')+' '+config.hours+' '+Translate.get('hours')+' '+Translate.get('and')+' '+config.minutes+' '+Translate.get('minutes')+')';}else{res='&nbsp;('+Translate.get('dripping-inactive')+')';}
return res};};;var Publish_FranquiaMenu=function(autenticado,_className,translate,lang){if(!_className){_className='escuro';}
var _menu=$('<div>').addClass('menu-franquia '+_className).attr({role:'menu','data-item':'MenuFranquia'});var _ul=$('<ul>').appendTo(_menu);if(autenticado){_buildUserMenu();}else{_buildAccess();}
function _buildAccess(){_createLine({text:translate.access,href:'/'+lang+'/login',icon:'fa fa-user'}).appendTo(_ul);}
function _buildUserMenu(){var container;var li=$('<li>').appendTo(_ul);var toggle=$('<a>').on('click',function(){if(container.is(':visible')){container.css('display','none');}else{container.css('display','inline-block');}}).addClass('toggle').appendTo(li);$('<span>').addClass('text').text(translate.myAccount).appendTo(toggle);$('<span>').addClass('caret').appendTo(toggle);container=$('<div>').addClass('subMenu').css('display','none').appendTo(_ul);var links=[{text:translate.myTemplates,href:'/'+lang+'/user/template'},{text:translate.myPlans,href:'/'+lang+'/user/planos'},{text:translate.config,href:'/'+lang+'/user/config'},{text:translate.logout,href:'/user/logout'}];for(var index in links){_createLine(links[index]).appendTo(container);}}
function _createLine(args){var li=$('<li>');var link=$('<a>').attr({href:args.href}).appendTo(li);$('<span>').addClass('text').text(args.text).appendTo(link);if(args.icon){$('<i>').addClass(args.icon).appendTo(link);}
return li;}
return _menu;};;var Publish_BuildLoginMenu=function(authentication,_className,translation,url,password){if(!_className){_className='escuro';}
if(typeof password=='undefined'){password=true;}
var _menu=$('<div>').addClass('menu-login '+_className).attr({role:'menu','data-item':'BotaoLogin'});var _ul=$('<ul>').appendTo(_menu);function _createItems(items){items.forEach(function(item){var li=$('<li>').appendTo(_ul);var link=$('<a>').on('click',typeof item.click=='function'?item.click:function(){}).attr({href:item.href}).appendTo(li);if(item.icon){$('<i>').addClass(item.icon).appendTo(link);}
$('<span>').addClass('text').text(item.text).appendTo(link);});}
if(!authentication){try{if(url.type=='pagina'){$.ajax({url:'/publish/access/restrict-data',type:'POST',dataType:'json',data:{id_layout:typeof Publicar!='undefined'?Publicar.getOptions('idLayout'):HTML_Load.getConfig('identify'),page:url.pagina},success:function(response){var auth=new Publish_LoginMenu(translation,url,response.data,response.data!=null&&typeof response.data.id_template!='undefined'?response.data.id_template:null);auth.setPassword(password);_createItems([{text:translation['menu-usuario-login-text-access'],icon:'fa fa-sign-in',click:function(e){e.preventDefault();auth.show();}}]);},error:function(response){helper.hideModal();helper.showMessage({msg:response.error,alertClass:'pop-up-alert-danger'});}});}else{var auth=new Publish_LoginMenu(translation,url);auth.setPassword(password);_createItems([{text:translation['menu-usuario-login-text-access'],icon:'fa fa-sign-in',click:function(e){e.preventDefault();auth.show();}}]);}}catch(e){var auth=new Publish_LoginMenu(translation,url);auth.setPassword(password);_createItems([{text:translation['menu-usuario-login-text-access'],icon:'fa fa-sign-in',click:function(e){e.preventDefault();auth.show();}}]);}}else{url='';if(typeof Publicar!='undefined'&&Publicar.getOptions('sitename')&&Publicar.getOptions('requestType')=='subdomain'){url+='/'+Publicar.getOptions('sitename');}
url+='/membership';var data=[];if(authentication){data.push({text:translation['menu-usuario-franquia-text-myAccount']||'My Account',href:url,icon:'fa fa-user'});}
data.push({text:translation['menu-usuario-login-text-logout'],href:'/restrict/logout',icon:'fa fa-sign-out'});_createItems(data);}
return _menu;};var Publish_LoginMenu=function(translation,url,params,id_template){var _self=this,_popUp,_container,_containerTopMenu,_containerFields,_containerSigUpCustomFields,_action,_title,_form,_groupEmail,_groupUsername,_groupPassword,_groupPasswordConfirmation,_groupRememberPassword,_groupToken,_btnSubmit,_onComplete;var _password=true;if(!params){params={auth:'register'};}
this.setPassword=function(val){_password=val;};for(var index in translation){if(!translation[index]){translation[index]=Translate.get(index);}}
function _createPopUp(){var d=new Date();_popUp=PopUp.getInstance('Publish_LoginModal'+d.getTime());_popUp.addClass('user-access-modal');}
function _createContentTop(){var container=$('<div>').addClass('clearBoth');_title=$('<h3>').addClass('title-publish-modal pull-left').appendTo(container);_containerTopMenu=$('<div>').addClass('pull-right').appendTo(container);return container;}
function _createContentTopStep(){var container=$('<div>').addClass('clearBoth checkout-twosteps-signup-login');_title=$('<h3>').addClass('title-publish-modal pull-left').appendTo(container);_containerTopMenu=$('<div>').addClass('pull-right').appendTo(container);return container;}
function _createContent(){_container=$('<div>').addClass('container-user-auth');_form=$('<form>').addClass('form').on('submit',function(e){e.preventDefault();_self.sendRequest();}).appendTo(_container);_containerFields=$('<div>').css({overflow:'auto','max-height':'300px'}).appendTo(_form);_containerSigUpCustomFields=$('<div>');_groupEmail=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'email',name:'email',placeholder:translation['email'],required:'required'}).appendTo(_groupEmail);_groupUsername=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'input',name:'fname',placeholder:translation['fname'],required:'required'}).appendTo(_groupUsername);_groupPassword=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'password',name:'senha',placeholder:translation['senha'],required:'required'}).appendTo(_groupPassword);_groupPasswordConfirmation=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'password',name:'confirmation',placeholder:translation['confirmacao'],required:'required'}).appendTo(_groupPasswordConfirmation);_groupRememberPassword=$('<div>').addClass('clearBoth user-auth-modal-remember-pwd');$('<a>').text(translation['remember']).addClass('pull-right').on('click',function(){_self.showRemember();}).appendTo(_groupRememberPassword);_groupToken=$('<div>').addClass('form-group clearBoth');$('<input>').addClass('form-control').attr({type:'text',name:'token',placeholder:translation['token']}).appendTo(_groupToken);_btnSubmit=$('<button>').addClass('btn btn-primary pull-right').attr({type:'submit'}).appendTo(_form);$('<div>').addClass('clearfix').appendTo(_form);_xhrUserCustomFields();}
function _createContentStep(){_container=$('<div>').addClass('container-user-auth');_form=$('<form>').addClass('form').on('submit',function(e){e.preventDefault();_self.sendRequest();}).appendTo(_container);_containerFields=$('<div>').css({overflow:'auto'}).appendTo(_form);_containerSigUpCustomFields=$('<div>');_groupEmail=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'email',name:'email',placeholder:translation['email'],required:'required'}).appendTo(_groupEmail);_groupUsername=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'input',name:'fname',placeholder:translation['fname'],required:'required'}).appendTo(_groupUsername);_groupPassword=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'password',name:'senha',placeholder:translation['senha'],required:'required'}).appendTo(_groupPassword);_groupPasswordConfirmation=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'password',name:'confirmation',placeholder:translation['confirmacao'],required:'required'}).appendTo(_groupPasswordConfirmation);_groupRememberPassword=$('<div>').addClass('clearBoth user-auth-modal-remember-pwd');$('<a>').text(translation['remember']).addClass('pull-right').on('click',function(){_self.showRemember();}).appendTo(_groupRememberPassword);_groupToken=$('<div>').addClass('form-group clearBoth');$('<input>').addClass('form-control').attr({type:'text',name:'token',placeholder:translation['token']}).appendTo(_groupToken);_btnSubmit=$('<button>').addClass('btn btn-primary pull-right').attr({type:'submit'}).appendTo(_form);$('<div>').addClass('clearfix').appendTo(_form);_xhrUserCustomFields();}
function _xhrUserCustomFields(){$.ajax({url:'/editor-html/restrict/fields/user',type:'POST',dataType:'json',data:{id_layout:typeof Publicar!='undefined'?Publicar.getOptions('idLayout'):HTML_Load.getConfig('identify'),},success:function(response){helper.hideModal();if(response.success==true){response.data.forEach(function(el){_buildField(el).appendTo(_containerSigUpCustomFields);});}},error:function(response){helper.hideModal();helper.showMessage({msg:response.error,alertClass:'pop-up-alert-danger'});}});}
function _buildField(field){if(field.type=='input'||field.type=='number'){var node=document.createElement('INPUT');node.setAttribute('type',field.type=='input'?'text':'number');node.setAttribute('placeholder',field.name);node.setAttribute('name','custom_field['+field.id_restrict_field+']');if(field.required=='active'){node.setAttribute('required',true);}
node.setAttribute("class","form-control");}else if(field.type=='textarea'){var node=document.createElement('TEXTAREA');node.setAttribute('placeholder',field.name);node.setAttribute('name','custom_field['+field.id_restrict_field+']');node.setAttribute("class","form-control");}else if(field.type=='radio'||field.type=='checkbox'){var node=document.createElement('DIV');var label=document.createElement('LABEL');label.setAttribute('class','text-ellipsis control-label');label.innerHTML=field.name;label.style.color='#848488';label.style.fontSize='14px';var containerOptions=document.createElement('DIV');field.options.forEach(function(option){var lbOption=document.createElement('LABEL');lbOption.setAttribute('class',field.type+'-inline');lbOption.innerHTML=option.name;containerOptions.appendChild(lbOption);var el=document.createElement('INPUT');el.setAttribute('type',field.type);el.setAttribute('value',option.name);el.setAttribute('name',(field.type=='radio'?'custom_field['+field.id_restrict_field+']':'custom_field['+field.id_restrict_field+']['+option.name+']'));lbOption.insertBefore(el,lbOption.firstChild);});node.appendChild(label);node.appendChild(containerOptions);}else{throw new Error('Field '+field.type+' not found');}
return $('<div>').addClass('form-group').append(node);};function _createMenu(arr){_containerTopMenu.empty();arr.forEach(function(menu){$('<a>').on('click',typeof menu.click=='function'?menu.click:function(){}).text(menu.text).addClass('user-auth-modal-menu').appendTo(_containerTopMenu);});}
function _detachNodes(){_groupEmail.detach();_groupUsername.detach();_groupPassword.detach();_groupPasswordConfirmation.detach();_groupRememberPassword.detach();_groupToken.detach();_containerSigUpCustomFields.detach();}
this.onComplete=function(func){_onComplete=func;};this.setTitle=function(key){if(_title){_title.text(translation[key]);}};this.showLogin=function(){_action='login';_self.setTitle('login-your-account');_btnSubmit.text(translation['login-your-account']);_detachNodes();_groupEmail.appendTo(_containerFields);_groupPassword.appendTo(_containerFields);_groupRememberPassword.appendTo(_containerFields);var menus=[];if(params&&['token','both'].indexOf(params['auth'])>-1){menus.push({text:translation['token'],click:function(){_self.showToken();}});}
if(!params||['register','both'].indexOf(params['auth'])>-1){menus.push({text:translation['cadastrar'],click:function(){_self.showSignUp();}});}
_groupPassword.show();_createMenu(menus);};this.showSignUp=function(){_action='sign-up';_self.setTitle('cadastrar');_btnSubmit.text(translation['cadastrar']);_detachNodes();_groupEmail.appendTo(_containerFields);_groupUsername.appendTo(_containerFields);_groupPassword.appendTo(_containerFields);_groupPasswordConfirmation.appendTo(_containerFields);_containerSigUpCustomFields.appendTo(_containerFields);if(!_password){var randomstring=Math.random().toString(36).slice(-8);$(_groupPassword).find('input').val(randomstring);$(_groupPasswordConfirmation).find('input').val(randomstring);_groupPassword.hide();_groupPasswordConfirmation.hide();}
var menus=[];if(params&&['token','both'].indexOf(params['auth'])>-1){menus.push({text:translation['token'],click:function(){_self.showToken();}});}
menus.push({text:translation['login-your-account'],click:function(){_self.showLogin();}});_createMenu(menus);};this.showSignUpStep=function(){_action='sign-up';_self.setTitle('cadastrar');_btnSubmit.text(translation['cadastrar']);_btnSubmit.addClass('hidden').attr('id','submit-login-form');_detachNodes();_groupEmail.appendTo(_containerFields);_groupUsername.appendTo(_containerFields);_groupPassword.appendTo(_containerFields);_groupPasswordConfirmation.appendTo(_containerFields);_containerSigUpCustomFields.appendTo(_containerFields);if(!_password){var randomstring=Math.random().toString(36).slice(-8);$(_groupPassword).find('input').val(randomstring);$(_groupPasswordConfirmation).find('input').val(randomstring);_groupPassword.hide();_groupPasswordConfirmation.hide();}
var menus=[];if(params&&['token','both'].indexOf(params['auth'])>-1){menus.push({text:translation['token'],click:function(){_self.showTokenStep();}});}
menus.push({text:translation['login-your-account'],click:function(){_self.showLogin();}});_createMenu(menus);};this.showToken=function(){_action='token';_self.setTitle('access-token');_btnSubmit.text(translation['enviar-token']||'Send');_detachNodes();_groupToken.appendTo(_containerFields);var menus=[];if(!params||['register','both'].indexOf(params['auth'])>-1){menus.push({text:translation['cadastrar'],click:function(){_self.showSignUp();}});menus.push({text:translation['login-your-account'],click:function(){_self.showLogin();}});}
_createMenu(menus);};this.showTokenStep=function(){_action='token';_self.setTitle('access-token');_btnSubmit.text(translation['enviar-token']||'Send');_detachNodes();_groupToken.appendTo(_containerFields);var menus=[];if(!params||['register','both'].indexOf(params['auth'])>-1){menus.push({text:translation['cadastrar'],click:function(){_self.showSignUpStep();}});menus.push({text:translation['login-your-account'],click:function(){_self.showLogin();}});}
_createMenu(menus);};this.showRemember=function(){_action='remember';_self.setTitle('remember');_btnSubmit.text(translation['remember']);_detachNodes();_groupEmail.appendTo(_containerFields);var menus=[];if(!params||['register','both'].indexOf(params['auth'])>-1){menus.push({text:translation['cadastrar'],click:function(){_self.showSignUp();}});}
if(params&&['token','both'].indexOf(params['auth'])>-1){menus.push({text:translation['token'],click:function(){_self.showToken();}});}
menus.push({text:translation['login-your-account'],click:function(){_self.showLogin();}});_createMenu(menus);};this.sendRequest=function(){helper.showModal();$.ajax({url:'/publish/access',type:'POST',dataType:'json',data:{id_layout:Publicar.getOptions('idLayout'),id_template:id_template,type:_action,data:_form.serialize()},success:function(response){if(response.success==true){if(_action=='remember'){Base_Alert({msg:response.msg,alertClass:'pop-up-alert-success',show_btn_cancel:false,text_btn_confirm:translation['botao-confirm-login'],onConfirm:function(){}});}else{Publicar.setConfig('authData',response.authData);Publicar.reloadLoginMenu(1);if(typeof _onComplete=='function'){_onComplete(response);}
if(typeof url!='undefined'&&url!=''){try{if(typeof url=='string'){url=$.parseJSON(url);}
if($.isArray(url)){url=url[0];}
Publish_Link.call(url);}catch(erro){Publicar.navigate(url,true);}}
if(_popUp){_popUp.hide();}}}else{function onClose(){if(response.redirect&&response.redirect!='no-action'){try{Publish_Link.call(response.redirect);}catch(e){console.log(e);}}}
var message=response.msg||response.error;if(message&&message!=''){Base_Alert({msg:$.inArray(message,['usuario-errado','senha-invalida'])>-1?translation[message]:message,alertClass:'pop-up-alert-warning',show_btn_cancel:false,text_btn_confirm:translation['botao-confirm-login'],onConfirm:function(){onClose();}});}else{onClose();}}},error:function(response){helper.showMessage({msg:response.error,alertClass:'pop-up-alert-danger',text_btn_confirm:translation['botao-confirm-login'],});},complete:function(){helper.hideModal();}});};this.setInitialWindow=function(){if(params&&params['auth']=='token'){_self.showToken();}else if(params&&params['initial_window']=='register'){_self.showSignUp();}else{_self.showLogin();}};this.show=function(){PopUp.closeAll();if(!_popUp){_createPopUp();_createContent();_popUp.setTitle(_createContentTop());_popUp.setContent(_container);}
_self.setInitialWindow();_popUp.show();};this.getContainer=function(){var el=$('<div>');if(!_container){_createContent();}
el.append(_createContentTop()).append(_container);_self.showSignUp();return el;};this.getContainerStep=function(){var el=$('<div>');if(!_container){_createContentStep();}
el.append(_createContentTopStep()).append(_container);_self.showSignUpStep();return el;};};;var Publish_SplitRegister=new(function()
{this.attachEvent=function(container,config)
{$(container).on('click',function()
{var autenticado=Publicar.getOptions('authentication');if(!autenticado){Publish_Translate.get('loginMenu',function(translation){var login=new Publish_LoginMenu(translation,config,{auth:'register',initial_window:'register'});login.show();login.onComplete(function(){});});}else{Publish_Translate.get('loginMenu',function(translation){Base_Alert({msg:translation['register-need-to-logout'],alertClass:'pop-up-alert-danger',show_btn_cancel:false,});});}});};});var Publish_SplitLogin=new(function()
{this.attachEvent=function(container,config)
{var autenticado=Publicar.getOptions('authentication');if(autenticado)
{$(container).find('.btn-omb10').text('Logout').attr('href','/restrict/logout');}
$(container).on('click',function()
{var autenticado=Publicar.getOptions('authentication');if(!autenticado){Publish_Translate.get('loginMenu',function(translation){var login=new Publish_LoginMenu(translation,config,{auth:'register',initial_window:'login'});login.show();login.onComplete(function()
{$(container).find('.btn-omb10').text('Logout').attr('href','/restrict/logout');});});}else{$(container).find('.btn-omb10').text('Logout').attr('href','/restrict/logout');}});};});var Publish_SplitLoginMenu=function(translation,url,params,id_template,type){var _self=this,_popUp,_container,_containerTopMenu,_containerFields,_containerSigUpCustomFields,_action,_title,_form,_groupEmail,_groupUsername,_groupPassword,_groupPasswordConfirmation,_groupRememberPassword,_groupToken,_btnSubmit,_onComplete;params={auth:type};for(var index in translation){if(!translation[index]){translation[index]=Translate.get(index);}}
function _createPopUp(){var d=new Date();_popUp=PopUp.getInstance('Publish_LoginModal'+d.getTime());_popUp.addClass('user-access-modal');}
function _createContentTop(){var container=$('<div>').addClass('clearBoth');_title=$('<h3>').addClass('title-publish-modal pull-left').appendTo(container);_containerTopMenu=$('<div>').addClass('pull-right').appendTo(container);return container;}
function _createContent(){_container=$('<div>').addClass('container-user-auth');_form=$('<form>').addClass('form').on('submit',function(e){e.preventDefault();_self.sendRequest();}).appendTo(_container);_containerFields=$('<div>').css({overflow:'auto','max-height':'300px'}).appendTo(_form);_containerSigUpCustomFields=$('<div>');_groupEmail=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'email',name:'email',placeholder:translation['email'],required:'required'}).appendTo(_groupEmail);_groupUsername=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'input',name:'fname',placeholder:translation['fname'],required:'required'}).appendTo(_groupUsername);_groupPassword=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'password',name:'senha',placeholder:translation['senha'],required:'required'}).appendTo(_groupPassword);_groupPasswordConfirmation=$('<div>').addClass('form-group');$('<input>').addClass('form-control').attr({type:'password',name:'confirmation',placeholder:translation['confirmacao'],required:'required'}).appendTo(_groupPasswordConfirmation);_groupRememberPassword=$('<div>').addClass('clearBoth user-auth-modal-remember-pwd');$('<a>').text(translation['remember']).addClass('pull-right').on('click',function(){_self.showRemember();}).appendTo(_groupRememberPassword);_groupToken=$('<div>').addClass('form-group clearBoth');$('<input>').addClass('form-control').attr({type:'text',name:'token',placeholder:translation['token']}).appendTo(_groupToken);_btnSubmit=$('<button>').addClass('btn btn-primary pull-right').attr({type:'submit'}).appendTo(_form);$('<div>').addClass('clearfix').appendTo(_form);_xhrUserCustomFields();}
function _xhrUserCustomFields(){$.ajax({url:'/editor-html/restrict/fields/user',type:'POST',dataType:'json',data:{id_layout:typeof Publicar!='undefined'?Publicar.getOptions('idLayout'):HTML_Load.getConfig('identify'),},success:function(response){helper.hideModal();if(response.success==true){response.data.forEach(function(el){_buildField(el).appendTo(_containerSigUpCustomFields);});}},error:function(response){helper.hideModal();helper.showMessage({msg:response.error,alertClass:'pop-up-alert-danger'});}});}
function _buildField(field){if(field.type=='input'||field.type=='number'){var node=document.createElement('INPUT');node.setAttribute('type',field.type=='input'?'text':'number');node.setAttribute('placeholder',field.name);node.setAttribute('name','custom_field['+field.id_restrict_field+']');node.setAttribute('required',field.required=='active');node.setAttribute("class","form-control");}else if(field.type=='textarea'){var node=document.createElement('TEXTAREA');node.setAttribute('placeholder',field.name);node.setAttribute('name','custom_field['+field.id_restrict_field+']');node.setAttribute("class","form-control");}else if(field.type=='radio'||field.type=='checkbox'){var node=document.createElement('DIV');var label=document.createElement('LABEL');label.setAttribute('class','text-ellipsis control-label');label.innerHTML=field.name;label.style.color='#848488';label.style.fontSize='14px';var containerOptions=document.createElement('DIV');field.options.forEach(function(option){var lbOption=document.createElement('LABEL');lbOption.setAttribute('class',field.type+'-inline');lbOption.innerHTML=option.name;containerOptions.appendChild(lbOption);var el=document.createElement('INPUT');el.setAttribute('type',field.type);el.setAttribute('value',option.name);el.setAttribute('name',(field.type=='radio'?'custom_field['+field.id_restrict_field+']':'custom_field['+field.id_restrict_field+']['+option.name+']'));lbOption.insertBefore(el,lbOption.firstChild);});node.appendChild(label);node.appendChild(containerOptions);}else{throw new Error('Field '+field.type+' not found');}
return $('<div>').addClass('form-group').append(node);}
function _createMenu(arr){_containerTopMenu.empty();arr.forEach(function(menu){$('<a>').on('click',typeof menu.click=='function'?menu.click:function(){}).text(menu.text).addClass('user-auth-modal-menu').appendTo(_containerTopMenu);});}
function _detachNodes(){_groupEmail.detach();_groupUsername.detach();_groupPassword.detach();_groupPasswordConfirmation.detach();_groupRememberPassword.detach();_groupToken.detach();_containerSigUpCustomFields.detach();}
this.onComplete=function(func){_onComplete=func;};this.setTitle=function(key){if(_title){_title.text(translation[key]);}};this.showLogin=function(){_action='login';_self.setTitle('login-your-account');_btnSubmit.text(translation['login-your-account']);_detachNodes();_groupEmail.appendTo(_containerFields);_groupPassword.appendTo(_containerFields);_groupRememberPassword.appendTo(_containerFields);var menus=[];if(params&&['token','both'].indexOf(params['auth'])>-1){menus.push({text:translation['token'],click:function(){_self.showToken();}});}
if(!params||['register','both'].indexOf(params['auth'])>-1){menus.push({text:translation['cadastrar'],click:function(){_self.showSignUp();}});}
_createMenu(menus);};this.showSignUp=function(){_action='sign-up';_self.setTitle('cadastrar');_btnSubmit.text(translation['cadastrar']);_detachNodes();_groupEmail.appendTo(_containerFields);_groupUsername.appendTo(_containerFields);_groupPassword.appendTo(_containerFields);_groupPasswordConfirmation.appendTo(_containerFields);_containerSigUpCustomFields.appendTo(_containerFields);var menus=[];if(params&&['token','both'].indexOf(params['auth'])>-1){menus.push({text:translation['token'],click:function(){_self.showToken();}});}
menus.push({text:translation['login-your-account'],click:function(){_self.showLogin();}});_createMenu(menus);};this.showToken=function(){_action='token';_self.setTitle('access-token');_btnSubmit.text(translation['enviar-token']||'Send');_detachNodes();_groupToken.appendTo(_containerFields);var menus=[];if(!params||['register','both'].indexOf(params['auth'])>-1){menus.push({text:translation['cadastrar'],click:function(){_self.showSignUp();}});menus.push({text:translation['login-your-account'],click:function(){_self.showLogin();}});}
_createMenu(menus);};this.showRemember=function(){_action='remember';_self.setTitle('remember');_btnSubmit.text(translation['remember']);_detachNodes();_groupEmail.appendTo(_containerFields);var menus=[];if(!params||['register','both'].indexOf(params['auth'])>-1){menus.push({text:translation['cadastrar'],click:function(){_self.showSignUp();}});}
if(params&&['token','both'].indexOf(params['auth'])>-1){menus.push({text:translation['token'],click:function(){_self.showToken();}});}
menus.push({text:translation['login-your-account'],click:function(){_self.showLogin();}});_createMenu(menus);};this.sendRequest=function(){helper.showModal();$.ajax({url:'/publish/access',type:'POST',dataType:'json',data:{id_layout:Publicar.getOptions('idLayout'),id_template:id_template,type:_action,data:_form.serialize()},success:function(response){if(response.success==true){if(_action=='remember'){Base_Alert({msg:response.msg,alertClass:'pop-up-alert-success',show_btn_cancel:false,text_btn_confirm:translation['botao-confirm-login'],onConfirm:function(){}});}else{Publicar.reloadLoginMenu(1);if(typeof _onComplete=='function'){_onComplete(response);}
if(typeof url!='undefined'&&url!=''){try{if(typeof url=='string'){url=$.parseJSON(url);}
if($.isArray(url)){url=url[0];}
Publish_Link.call(url);}catch(erro){Publicar.navigate(url,true);}}
if(_popUp){_popUp.hide();}}}else{function onClose(){if(response.redirect&&response.redirect!='no-action'){try{Publish_Link.call(response.redirect);}catch(e){console.log(e);}}}
var message=response.msg||response.error;if(message&&message!=''){Base_Alert({msg:$.inArray(message,['usuario-errado','senha-invalida'])>-1?translation[message]:message,alertClass:'pop-up-alert-warning',show_btn_cancel:false,text_btn_confirm:translation['botao-confirm-login'],onConfirm:function(){onClose();}});}else{onClose();}}},error:function(response){helper.showMessage({msg:response.error,alertClass:'pop-up-alert-danger',text_btn_confirm:translation['botao-confirm-login'],});},complete:function(){helper.hideModal();}});};this.setInitialWindow=function(){if(params&&params['auth']=='token'){_self.showToken();}else{_self.showLogin();}};this.show=function(){PopUp.closeAll();if(!_popUp){_createPopUp();_createContent();_popUp.setTitle(_createContentTop());_popUp.setContent(_container);}
_self.setInitialWindow();_popUp.show();};this.getContainer=function(){var el=$('<div>');if(!_container){_createContent();}
el.append(_createContentTop()).append(_container);_self.showSignUp();return el;};};;var Publish_FranquiaTemplate=function(args,element){var _self=this;var _enable=true;var _loaded;var _numPages;var _info={};var _contentHTML;if(!args.tema){args.tema='default';}
this.setContentHTML=function(html){_contentHTML=html;};this.load=function(onLoad){_contentHTML=$('<div>').addClass('templates-franquia-loading').attr({'data-item':'TemplatesFranquia'});$.ajax({url:'/get/view/templates',dataType:'html',method:'POST',data:{language:args.lang,tema:args.tema,categoria:args.categoria},success:function(response){_contentHTML.html(response);if(typeof onLoad=='function'){onLoad(_contentHTML);}
_self.onComplete();},error:function(data){setTimeout(function(){helper.showMessage('mensagem',"ERROR: Couldn't process the request.",5000);},1000);},complete:function(){_contentHTML.removeClass('templates-franquia-loading');}});};this.onComplete=function(){_contentHTML.find('.all').on('click',function(){_contentHTML.find('.show_categorias').slideToggle();});_contentHTML.find('.slider-omb').smoothDivScroll();if(args.disabled){_contentHTML.find('.slider-omb').smoothDivScroll("disable");}
_info=jQuery.parseJSON(_contentHTML.find('.info').attr('data-info'));_loaded=_info.range;_numPages=parseInt(_info.total/_info.range)+(_info.total%_info.range>0?1:0);_eventArrow(_contentHTML.find('.control-template-arrow'));if(element){setTimeout(function(){helper.adjustBodyHeight(element);},200);}};function _eventArrow(selector){selector.on('click',function(){if(!$(this).hasClass('disabled')&&_enable){_enable=false;var boxSelected=$('.box-templates.selected').get(0);var index=parseInt($(boxSelected).attr('data-page'));if($(this).hasClass('next')){index++;}else{index--;}
var open=$('.box-templates[data-page="'+index+'"]').get(0);if(!open){open=$('<div>').addClass('box-templates').attr('data-page',index).css({display:'none'});var image=$('<div>').addClass('loading-template').appendTo(open);$(boxSelected).after(open);$.ajax({url:'/load/template',type:'POST',dataType:'json',data:{id_categoria:_info.id_categoria,ini:_loaded,end:_info.range},success:function(response){if(response.success==true){for(var index in response.layouts){index=parseInt(index);var container=$('<div>').addClass('container_template').appendTo(open);var div=$('<div>').appendTo(container);$('<img>').attr({src:'/images/site/template/'+response.layouts[index]['imagem'],alt:'',title:''}).addClass('img-responsive').appendTo(div);var lang='pt_br';if(typeof HTML_Load!='undefined'){lang=HTML_Load.getConfig('language');}else if(typeof Publicar!='undefined'){lang=Publicar.getOptions('lang');}
var view=$('<a>').addClass('view').css({display:'none'}).attr({href:'/'+lang+'/view-template/'+response.layouts[index]['md5_id_layout'],target:'_blank'}).appendTo(div);$('<img>').attr({alt:'View',title:'View',src:'/images/site/icon/icon_templates_view.png'}).appendTo(view);var edit=$('<a>').addClass('edit').css({display:'none'}).attr({href:response.layouts[index]['edit_url'],target:'_blank'}).appendTo(div);$('<img>').attr({alt:'Edit',title:'Edit',src:'/images/site/icon/icon_templates_edit.png'}).appendTo(edit);}
_loaded+=_info.range;image.remove();animate(open,boxSelected);}else{helper.showMessage('mensagem',response.msg,5000);}},error:function(response){helper.showMessage('mensagem',Translate.get('mensagem-erro-processo-ajax'),5000);},complete:function(){_enabled=true;}});}else{animate(open,boxSelected);}
var prev=_contentHTML.find('.control-template-arrow.prev');var next=_contentHTML.find('.control-template-arrow.next');prev.removeClass('disabled');next.removeClass('disabled');if(index==1){prev.addClass('disabled');}else if(index==_numPages){next.addClass('disabled');}}});}
function animate(open,close){var duration=500;var openDirection='right';var closeDirecrion='left';if(parseInt($(open).attr('data-page'))<parseInt($(close).attr('data-page'))){openDirection='left';closeDirecrion='right';}
$(close).removeClass('selected').hide('slide',{direction:closeDirecrion,duration:duration,easing:'easeInOutQuint',complete:function(){$(open).addClass('selected').show('slide',{direction:openDirection,duration:duration,easing:'easeInOutQuint',complete:function(){_enable=true;}});}});};this.getHTML=function(){return _contentHTML;};};;var Publish_FranquiaRecurso=function(args,element){if(!args.tema){args.tema='default';}
var _listRecursos=$('<div>').addClass('templates-franquia-loading').attr({'data-item':'RecursoFranquia'});$.ajax({url:'/get/view/recursos',dataType:'html',method:'POST',data:{language:args.lang,tema:args.tema},success:function(response){_listRecursos.html(response);if(element){setTimeout(function(){helper.adjustBodyHeight(element);},200);}},error:function(data){setTimeout(function(){helper.showMessage('mensagem',"ERROR: Couldn't process the request.",5000);},1000);},complete:function(){_listRecursos.removeClass('templates-franquia-loading');}});return _listRecursos;};;var Publish_FranquiaPlano=function(args,element){if(!args.tema){args.tema='default';}
var _listPlanos=$('<div>').addClass('templates-franquia-loading').attr({'data-item':'PlanoFranquia'});$.ajax({url:'/get/view/planos',dataType:'html',method:'POST',data:{language:args.lang,tema:args.tema},success:function(response){_listPlanos.html(response);if(element){setTimeout(function(){helper.adjustBodyHeight(element);},200);}},error:function(data){setTimeout(function(){helper.showMessage('mensagem',"ERROR: Couldn't process the request.",5000);},1000);},complete:function(){_listPlanos.removeClass('templates-franquia-loading');}});return _listPlanos;};;function Publish_Instagram_Themes_Grid(instance,device){var _self=this;var _url='https://api.instagram.com/v1/users/'+instance.getConfig('user_id')+'/media/recent/';var _content;var _loading;var paginationFiles=[];var _currentPage=1;var _maxPage=1;var _complete=false;var row;var _translatePublish={'see-on-instagram':(typeof HTML_Load!='undefined'?Translate.get('see-on-instagram'):(Publicar.getOptions('lang')=='pt_br'?' Veja no Instagram':' See on Intagram'))};this.getCurrentPage=function(){return _currentPage;};this.getMaxPage=function(){return _maxPage;};this.getPaginationComplete=function(){return _complete;};function _createFile(data){var col=$('<div>').addClass('feed-imgs').css({width:100/instance.getConfig(device).cols+'%',padding:instance.getConfig('margin'),float:'left',position:'relative',listStyle:'none'});var _file=$('<img>');var captionText=!data.caption||typeof data.caption.text=='undefined'?'':data.caption.text;_file.attr({src:data.images.standard_resolution.url,title:captionText}).addClass(instance.getConfig('imgType')=='circle'?'img-circle':'').css('width','100%').appendTo(col);var _bg=$('<div>').addClass('instagram-feed-bg').css('border-radius',instance.getConfig('imgType')=='circle'?'50%':'').appendTo(col);var _linkPopUp=$('<a>').addClass('popUp-Insta-Image').css({height:'100%',width:'100%',position:'absolute'}).attr({'data-instagram-title':'<a  style="float: right" target="_blank" href=" '+data.link+'"><i class="fa fa-instagram popUp-insta-icon" aria-hidden="true"></i>'+_translatePublish['see-on-instagram']+'</a><br>'+captionText,'title':captionText,'rel':'gallery'+_currentPage,'href':data.images.standard_resolution.url}).appendTo(_bg);var spanLike=$('<span>').addClass('likeIcon').text(data.likes.count).appendTo(_linkPopUp);var spanComment=$('<span>').addClass('commentIcon').text(data.comments.count).appendTo(_linkPopUp);$('<i>').addClass('fa fa-heart').attr('ariaHidden','true').prependTo(spanLike);$('<i>').addClass('fa fa-comment').attr('ariaHidden','true').prependTo(spanComment);return col}
this.getNumFiles=function(){return parseInt(instance.getConfig(device).rows)*parseInt(instance.getConfig(device).cols)};this.requestFiles=function(func){Publish_Instagram_Utility.loadFiles({url:_url,head:instance.getConfig('head'),token:instance.getToken(),count:_self.getNumFiles(),callback:function(response){if(typeof response.pagination!='undefined'&&typeof response.pagination.next_url!='undefined'){_url=response.pagination.next_url;}else{_complete=true;_maxPage=_currentPage;}
for(var i in response.data){paginationFiles.push(response.data[i]);}
_self.createFiles();_loading.detach();if(typeof func=='function'){func();}}});};this.createFiles=function(){row=$('<div>').addClass('row').css({'margin':'0px','background-color':instance.getConfig('background-color')}).appendTo(_content);var numFiles=_self.getNumFiles();var index=(_currentPage-1)*_self.getNumFiles();var end=index+numFiles;var maxFiles=paginationFiles.length;for(;index<end&&index<maxFiles;index++){_createFile(paginationFiles[index]).appendTo(row);}};this.load=function(func){_loading.appendTo(_content);if((_currentPage-1)*_self.getNumFiles()==paginationFiles.length){_self.requestFiles(func);}else{_self.createFiles();if(typeof func=='function'){func();}
_loading.detach();}};this.loadNextFiles=function(){_content.empty();_currentPage++;if((_currentPage-1)*_self.getNumFiles()==paginationFiles.length){_loading.appendTo(_content);_self.requestFiles();}else{_self.createFiles();}};this.loadPreviousFiles=function(){_content.empty();_currentPage--;if((_currentPage-1)*_self.getNumFiles()==paginationFiles.length){_loading.appendTo(_content);_self.requestFiles();}else{_self.createFiles();}};_loading=$('<div>').html('<i class="fa fa-spinner fa-pulse" aria-hidden="true"></i>').addClass('instagram-feed-loading');_content=$('<div>').addClass('instagram-feed');this.setMiddleBgStyle=function(property,value){row.css('background-color',value);};this.getHTML=function(){return _content;}};function Publish_Instagram_Themes_Slider(instance,device){var _self=this;var _url='https://api.instagram.com/v1/users/'+instance.getConfig('user_id')+'/media/recent/';var _content;var _nodeLoading;var _contentPreview;var _contentFiles;var _previewImg;var _spanLike;var _spanComment;var _instaLink;var _instaText;var _instaPlay;var _instaVideo;var _paginationFiles=[];var _currentPage=1;var _maxPage=1;var _complete=false;var _translatePublish={'see-on-instagram':(typeof HTML_Load!='undefined'?Translate.get('see-on-instagram'):(Publicar.getOptions('lang')=='pt_br'?' Veja no Instagram':' See on Intagram'))};function _createLoading(){_nodeLoading=$('<div>').html('<i class="fa fa-refresh fa-spin" aria-hidden="true"></i>').addClass('instagram-feed-loading');}
function _createPreviewSlider(){_contentPreview=$('<div>').addClass('insta-img-preview');_previewImg=$('<img>').addClass('img img-responsive').appendTo(_contentPreview);_instaVideo=$('<video>').attr({preload:'auto',controls:'true'}).css({padding:'10px',width:'100%'}).appendTo(_contentPreview);_instaPlay=$('<i>').addClass('fa fa-play-circle instagram-play-icon').attr('aria-hidden','true').on('click',function(){$(this).css('display','none');_instaVideo.css('display','block');_self.playVideo(_instaVideo)}).appendTo(_contentPreview);var infoContent=$('<div>').css('margin-top','10px').appendTo(_contentPreview);$('<i>').addClass('fa fa-heart-o insta-slider-icon').attr('ariaHidden','true').appendTo(infoContent);_spanLike=$('<span>').addClass('insta-slider-span').appendTo(infoContent);$('<i>').addClass('fa fa-comment-o insta-slider-icon').attr('ariaHidden','true').appendTo(infoContent);_spanComment=$('<span>').addClass('insta-slider-span').appendTo(infoContent);var contentLink=$('<div>').css('height','25px').appendTo(_contentPreview);_instaLink=$('<a>').text(_translatePublish['see-on-instagram']).css({paddingRight:'10px',float:'right',fontSize:'14px'}).attr({'target':'_blank'}).appendTo(contentLink);$('<i>').addClass('fa fa-instagram').css('padding-right','5px').attr('ariaHidden','true').prependTo(_instaLink);$('<hr>').css('margin-top','5px').appendTo(_contentPreview);_instaText=$('<small>').css({display:'inline-block',textAlign:'justify','word-wrap':'break-word','text-overflow':'ellipsis'}).appendTo(_contentPreview);setTimeout(function(){_instaText.css({'width':$(_contentPreview).width()});},2000);return _contentPreview;};function _createContentFiles(){_contentFiles=$('<div>').addClass('row').css('margin','-'+instance.getConfig('margin'));return _contentFiles;}
function _loadFiles(){var numFiles=_self.getNumFiles();var index=(_currentPage-1)*_self.getNumFiles();var end=index+numFiles;var maxFiles=_paginationFiles.length;_self.setImage(index);_contentFiles.empty();for(;index<end&&index<maxFiles;index++){_createFile(_paginationFiles[index],index).appendTo(_contentFiles);}};function _createFile(data,index){var img=$('<div>').addClass('feed-imgs').css({width:100/instance.getConfig(device).cols+'%',padding:instance.getConfig('margin'),float:'left',position:'relative',listStyle:'none'});$('<img>').attr({src:data.images.standard_resolution.url,title:data.caption&&typeof data.caption.text!='undefined'?data.caption.text:'',likecount:data.likes.count,commentscount:data.comments.count}).addClass(instance.getConfig('imgType')=='circle'?'img-circle':'').addClass('insta-img-slider').css({'width':'100%',cursor:'pointer'}).on('click',function(){_self.setImage(index);}).appendTo(img);if(data.type=='video'){$('<i>').addClass('fa fa-play-circle instagram-play-icon').attr('aria-hidden','true').prependTo(img)}
return img;}
this.getCurrentPage=function(){return _currentPage;};this.getMaxPage=function(){return _maxPage;};this.getPaginationComplete=function(){return _complete;};this.getNumFiles=function(){return parseInt(instance.getConfig(device).cols)*parseInt(instance.getConfig(device).rows)};this.requestFiles=function(func){Publish_Instagram_Utility.loadFiles({url:_url,head:instance.getConfig('head'),token:instance.getToken(),count:_self.getNumFiles(),callback:function(response){if(typeof response.pagination!='undefined'&&typeof response.pagination.next_url!='undefined'){_url=response.pagination.next_url;}else{_complete=true;_maxPage=_currentPage;}
for(var i in response.data){_paginationFiles.push(response.data[i]);}
_loadFiles();_nodeLoading.detach();if(typeof func=='function'){func();}}});};this.load=function(func){_nodeLoading.appendTo(_content);if((_currentPage-1)*_self.getNumFiles()==_paginationFiles.length){_self.requestFiles(func);}else{_loadFiles();if(typeof func=='function'){func();}
_nodeLoading.detach();}};this.loadNextFiles=function(){_currentPage++;if((_currentPage-1)*_self.getNumFiles()==_paginationFiles.length){_nodeLoading.appendTo(_contentFiles);_self.requestFiles();}else{_loadFiles();}};this.loadPreviousFiles=function(){_currentPage--;if((_currentPage-1)*_self.getNumFiles()==_paginationFiles.length){_nodeLoading.appendTo(_contentFiles);_self.requestFiles();}else{_loadFiles();}};this.setImage=function(index){_instaVideo.attr('src',typeof _paginationFiles[index].type!=='undefined'&&_paginationFiles[index].type==='video'?_paginationFiles[index].videos.standard_resolution.url:'');_instaText.text(_paginationFiles[index].caption&&typeof _paginationFiles[index].caption.text!='undefined'?_paginationFiles[index].caption.text:'');_instaLink.attr('href',_paginationFiles[index].link);_spanLike.text(_paginationFiles[index].likes.count);_spanComment.text(_paginationFiles[index].comments.count);_instaVideo.css('display','none');_instaPlay.css('display',typeof _paginationFiles[index].type!=='undefined'&&_paginationFiles[index].type==='video'?'block':'none');_previewImg.css('display','block').attr('src',_paginationFiles[index].images.standard_resolution.url);};this.playVideo=function(video){video[0].play();_previewImg.css('display','none');};this.setMiddleBgStyle=function(property,value){_content.css(property,value);};this.setFontStyleColor=function(property,value){_contentPreview.css(property,value);};this.getHTML=function(){return _content;};(function(){_content=$('<div>').addClass('row').css({'margin':0,paddingTop:'10px'});var colLeft=$('<div>').addClass(device=='mobile'?'col-sm-12':'col-sm-7').addClass(instance.getConfig('theme').slider.position).appendTo(_content);var colRight=$('<div>').addClass(device=='mobile'?'col-sm-12':'col-sm-5').css('margin-bottom',device=='mobile'?'10px':'').appendTo(_content);_createLoading();_createPreviewSlider().appendTo(colLeft);_createContentFiles().appendTo(colRight);_self.setMiddleBgStyle('background-color',instance.getConfig('background-color'));_self.setFontStyleColor('color',instance.getConfig('theme').slider.fontColor.color);})();};var Publish_Instagram_Utility=new(function(){var _self=this;var _pointer=0;var _queue=[];var _inProgress=false;this.getDefaultToken=function(){return'3297414790.2ae795c.24f7bb16f47143ca849767086ced2058';};this.isDefaultToken=function(token){return token=='3297414790.2ae795c.24f7bb16f47143ca849767086ced2058';};this.getDefaultUserID=function(){return'3297414790';};function _loadNext(){_inProgress=false;if(_pointer<_queue.length){_queue[_pointer]();_pointer++;}}
this.loadFiles=function(args){if(_inProgress){_queue.push(function(){_self.loadFiles(args);});}else{if(args.url){_inProgress=true;$.ajax({url:args.url,dataType:'jsonp',crossDomain:true,jsonp:false,jsonpCallback:'getResponse',data:{access_token:args.token,count:args.count,callback:'getResponse'},success:function(response){args.callback(response);_loadNext();}});}}};this.loadUser=function(token,callback){if(_inProgress){_queue.push(function(){_self.loadUser(token,callback);});}else{_inProgress=true;$.ajax({url:'https://api.instagram.com/v1/users/self/',dataType:'jsonp',crossDomain:true,jsonp:false,jsonpCallback:'getResponse',data:{access_token:token,callback:'getResponse'},success:function(response){callback(response.data);_loadNext();}});}};this.fancybox=function(galeria){$(galeria).find('a.popUp-Insta-Image').fancybox({parent:'.body',maxHeight:700,prevEffect:'elastic',mouseWheel:false,openEffect:'elastic',closeEffect:'elastic',nextEffect:'elastic',helpers:{title:{type:'inside'}},beforeLoad:function(){this.title=$(this.element).attr('data-instagram-title');}});};})();;var SlideShareEvents=function(target){this.buildSlideShare=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);var config=_item.configs;$.ajax({type:"GET",url:'https://www.slideshare.net/api/oembed/2?url='+config.url+'&format=json',dataType:"jsonp",format:'jsonp',success:function(response){var iframe=$(response.html);var textDiv=iframe.next();var showText=config.author;(showText==1)?$(textDiv).show():$(textDiv).hide()
$(iframe).attr('width',$(_target).css('width'));$(iframe).attr('height',$(_target).css('width'));$(_target).html(iframe);},error:function(){alert('VERIFY URL');}});};};;var Publish_Instagram_Feed=function(config,device){var _self=this;var _headerHandler;var _bottomHandler;var _themeHandler;var _callBack;var _instaLogo;var _themes={grid:Publish_Instagram_Themes_Grid,slider:Publish_Instagram_Themes_Slider};var _content=$('<div>');var _contentTop=$('<div>').addClass('instagram-feed').prependTo(_content);var _contentLogo=$('<div>').prependTo(_content);var _contentMiddle=$('<div>').appendTo(_content);var _contentBottom=$('<div>').appendTo(_content);this.createHeader=function(force){if(!_headerHandler||force){Publish_Instagram_Utility.loadUser(config.token,function(response){_headerHandler=new Publish_Instagram_Header(config.head,response);_contentTop.empty();if(helper.fixBoolean(config.head.enable)){_self.appendHeader();}
_self.createTheme();});}else{_self.appendHeader();_self.createTheme();}};this.createTheme=function(){if(_themes[config.theme.current]){_themeHandler=new _themes[config.theme.current](_self,device);}else{throw Error('Instance not found');}
_contentMiddle.empty();_themeHandler.load(function(){_themeHandler.getHTML().appendTo(_contentMiddle);_self.createFooter();});};this.createFooter=function(){if(!_bottomHandler){_bottomHandler=new Publish_Instagram_Bottom(_self);_bottomHandler.getHTML().appendTo(_contentBottom);}
if(typeof _callBack=='function'){_callBack(_headerHandler,_themeHandler,_bottomHandler);_callBack=null;}};this.load=function(func,force){_callBack=func;if(helper.fixBoolean(config.head.logo||force)){_self.createLogo();}else{_self.detachLogo();}
if(helper.fixBoolean(config.head.enable)||force){_self.createHeader(force);}else{_self.detachHeader();_self.createTheme();}};this.refreshBottom=function(){_contentBottom.empty();_self.createFooter()};this.createLogo=function(){if(!_instaLogo){_instaLogo=$('<div>').addClass('instagram-top-bar');$('<div>').addClass('instagram-logo').appendTo(_instaLogo);if(helper.fixBoolean(config.head.logo)){_self.appendLogo();}}};this.appendLogo=function(){if(!_instaLogo.parent().length){_instaLogo.appendTo(_contentLogo)}};this.detachLogo=function(){if(_instaLogo){_instaLogo.detach()}};this.appendHeader=function(){var header=_headerHandler.getHeader();if(!header.parent().length){header.appendTo(_contentTop);}};this.detachHeader=function(){if(_headerHandler){_headerHandler.getHeader().detach();}};this.getHeaderHandler=function(){return _headerHandler;};this.getThemeHandler=function(){return _themeHandler;};this.getBottomHandler=function(){return _bottomHandler;};this.getHTML=function(){return _content;};this.setConfig=function(attr,value){if(value&&typeof value=='object'){for(var i in value){config[attr][i]=value[i];}}else{config[attr]=value;}};this.setRows=function(value,device){if(!device){device=helper.getDevice();}
config[device].rows=value;};this.setCols=function(value,device){if(!device){device=helper.getDevice();}
config[device].cols=value;};this.getConfig=function(attr){if(typeof attr!='undefined'){return config[attr];}
return config;};this.getToken=function(){if(!config.token){return Publish_Instagram_Utility.getDefaultToken();}
return config.token;}};;var Publish_Instagram_Header=function(config,data){var header;var colPicture;var colUsername;var username;var bio;var info;var rowInfo;var _data;var _translatePublish={'inst-post':(typeof HTML_Load!='undefined'?Translate.get('inst-post'):(Publicar.getOptions('lang')=='pt_br'?'Publicaes':'Posts')),'inst-followed_by':(typeof HTML_Load!='undefined'?Translate.get('inst-followed_by'):(Publicar.getOptions('lang')=='pt_br'?'Seguidores':'Followers')),'inst-follow':(typeof HTML_Load!='undefined'?Translate.get('inst-follow'):(Publicar.getOptions('lang')=='pt_br'?'Seguindo':'Following'))};var _defaultData={bio:'OMB10',counts:{followed_by:3,follows:0,media:9,},full_name:'OMB10',id:'3297414790',profile_picture:'https://scontent.cdninstagram.com/t51.2885-19/s150x150/13696467_510412312481866_1527644791_a.jpg',username:'acervo_omb10',website:''};_data=$.extend(_defaultData,data);header=$('<div>').addClass('row'+(config.image==true?' hasImage':'')).addClass(config.bio==true?' hasBio':'').addClass(config.instaInfo==true?' hasInfo':'').css({width:'100%',height:'auto',padding:'0px',margin:'0px',textAlign:'center',backgroundColor:config['background-color']});colPicture=$('<div>').addClass('user-picture').appendTo(header);$('<img>').attr('src',_data.profile_picture).addClass('img-circle').css({'width':'100%','height':'100%','padding':'10%'}).appendTo(colPicture);colUsername=$('<div>').addClass('user-username').appendTo(header);username=$('<a>').addClass('insta-user-name').text('@'+_data.username).css({color:config.userName.color,textAlign:'center',fontSize:config.userName['font-size'],fontFamily:config.userName['font-family']}).attr({'href':'https://www.instagram.com/'+_data.username,'target':'_blank'}).appendTo(colUsername);$('<hr/>').addClass('instagram-div').appendTo(colUsername);bio=$('<p>').addClass('user-bio').css({'text-align':'justify',color:config.userBio.color,fontSize:config.userBio['font-size'],fontFamily:config.userBio['font-family']}).text(_data.bio).appendTo(colUsername);$('<hr/>').addClass('instagram-bio-div').appendTo(colUsername);info={posts:{name:_translatePublish['inst-post'],count:_data.counts.media},followed:{name:_translatePublish['inst-followed_by'],count:_data.counts.followed_by},follows:{name:_translatePublish['inst-follow'],count:_data.counts.follows}};rowInfo=$('<div>').addClass('row-info').appendTo(header);for(var index in info){var div=$('<div>').addClass('col-info').appendTo(rowInfo);var p=$('<p>').css({textAlign:'center',color:config.userInfo.color,fontSize:config.userInfo['font-size'],fontFamily:config.userInfo['font-family']}).text(info[index].count).appendTo(div);$('<span>').css({textAlign:'inherit',color:'inherit',fontSize:'inherit',fontFamily:'inherit',display:'block'}).text(info[index].name).prependTo(p)}
this.getHeader=function(){return header;};this.setUsernameStyle=function(property,value){username.css(property,value);};this.setBioStyle=function(property,value){bio.css(property,value);};this.setInfoStyle=function(property,value){rowInfo.find('p').css(property,value);};this.setHeaderStyle=function(property,value){header.css('background-color',value);};this.hasImage=function(val){if(val){header.addClass('hasImage');}else{header.removeClass('hasImage');}};this.hasBio=function(val){if(val){header.addClass('hasBio');$('.instagram-bio-custom').css('display','block')}else{header.removeClass('hasBio');$('.instagram-bio-custom').css('display','none')}};this.hasInfo=function(val){if(val){header.addClass('hasInfo');$('.instagram-info-custom').css('display','block')}else{header.removeClass('hasInfo');$('.instagram-info-custom').css('display','none')}}};;var Publish_Instagram_Bottom=function(instance){var _content;var _grid=instance.getThemeHandler();var _translatePublish={'insta-previous-btn':(typeof HTML_Load!='undefined'?Translate.get('insta-previous-btn'):(Publicar.getOptions('lang')=='pt_br'?'Anterior':'Previous')),'insta-next-btn':(typeof HTML_Load!='undefined'?Translate.get('insta-next-btn'):(Publicar.getOptions('lang')=='pt_br'?'Prximo':'Next')),};_content=$('<div>').addClass('instagram-feed-content-bottom clearBoth');var prevBtn=$('<button>').addClass('btn').attr({type:'button'}).text(_translatePublish['insta-previous-btn']).css({width:'110px',float:'left',textDecoration:'none',cursor:'pointer',color:instance.getConfig().buttonStyle.color,'font-family':instance.getConfig().buttonStyle['font-family']}).on('mouseenter',function(){prevBtn.css({color:instance.getConfig('hoverBtnColor')})}).on('mouseleave',function(){prevBtn.css({color:instance.getConfig().buttonStyle.color})}).on('click',function(){if(_grid.getCurrentPage()>1){_grid.loadPreviousFiles();}}).appendTo(_content);$('<i>').addClass('fa fa-chevron-left').attr('aria-hidden','true').css({'padding':'3px',fontSize:'9px'}).prependTo(prevBtn);var nextBtn=$('<button>').addClass('btn').attr({type:'button'}).text(_translatePublish['insta-next-btn']).css({width:'110px',float:'right',textDecoration:'none',cursor:'pointer',color:instance.getConfig().buttonStyle.color,'font-family':instance.getConfig().buttonStyle['font-family']}).on('mouseenter',function(){nextBtn.css({color:instance.getConfig('hoverBtnColor')})}).on('mouseleave',function(){nextBtn.css({color:instance.getConfig().buttonStyle.color})}).on('hover',function(){nextBtn.css({color:instance.getConfig().hoverBtnColor})}).on('click',function(){if(!_grid.getPaginationComplete()||_grid.getCurrentPage()<_grid.getMaxPage()){_grid.loadNextFiles();}}).appendTo(_content);$('<i>').addClass('fa fa-chevron-right').attr('aria-hidden','true').css({'padding':'3px',fontSize:'9px'}).appendTo(nextBtn);this.setButtonStyle=function(property,value){_content.find('button').css(property,value);};this.getHTML=function(){return _content;}};;!function(d,s,id){var js,ajs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://assets.tumblr.com/share-button.js";ajs.parentNode.insertBefore(js,ajs);}}(document,"script","tumblr-js");;var Publish_Form=new(function(){var _self=this;var _files;this.setFiles=function(files){_files=files;};this.getFiles=function(){return _files;};this.sendMessage=function(form,data){var newFiles=[];var idContainer=helper.getContainer(form).id;if(typeof _files!='undefined'){newFiles=_files[idContainer];}
if((data.type&&data.type=='default')){form.submit();}else{if(!data.email){helper.showMessage({msg:'Could not send message, reason : destination email was not set.',alertClass:'pop-up-alert-danger'});return;}
var fields={};var foo=$(form).serializeArray();for(var i=0;i<foo.length;i++){if(!$.isArray(fields[foo[i].name])){fields[foo[i].name]=[];}
fields[foo[i].name].push(foo[i].value);}
helper.showModal();$.ajax({url:'/editor-html/enviar-mensagem',method:'POST',dataType:'json',data:{destinatario:data.email,assunto:data.assunto,text:data.text,form:fields,files:newFiles,fieldUserEmail:(data.fieldUserEmail||null),mensagem:data.mensagem},success:function(response){if(response.success){helper.showMessage({msg:response.msg,alertClass:'pop-up-alert-success'});if(data.link){Publish_Link.call(data.link);}
form.reset();}else{helper.showMessage({msg:response.msg,alertClass:'pop-up-alert-danger'});}},error:function(j,r){console.log(j);},complete:function(){helper.hideModal();}});}};})();;var Publish_CouponAmazon_Render=new(function(){var _self=this;var _data=null;var _cupomCode=null;this.setDataForm=function(value){_data=value};this.getDataForm=function(){return _data;};this.setCouponCode=function(value){_cupomCode=value;};this.getCouponCode=function(){return _cupomCode;};this.setCoupon=function(data,couponList){var typesEmail=['EMAIL','email','Email','e-mail','E-mail','E-MAIL'];_self.setDataForm(data);for(var index in data){if($.inArray(data[index].name,typesEmail)){localStorage.setItem('coupomEmail',JSON.stringify({email:data[index].value}));}}
try{var retrievedObject=JSON.parse(localStorage.getItem('coupomEmail'));_self.saveCoupon(retrievedObject.email,couponList);}catch(error){console.log(error);}};this.getCoupon=function(couponList){var couponCode='false';if(_self.getDataForm()!=null){$.ajax({url:'/editor-html/coupons-amazon-list-item/get',type:'POST',dataType:'json',data:{id_coupon_list:couponList},async:false,success:function(response){if(response.success){if(!helper.isEmpty(response.data)){localStorage.setItem('coupomCode',response.data[0]['coupon']);}else{localStorage.setItem('coupomCode',false);}
couponCode=localStorage.getItem('coupomCode')}},error:function(response){console.log('data',response);}});}
return couponCode;};this.saveCoupon=function(email,couponList){$.ajax({url:'/editor-html/coupons-amazon-list-item/update',type:'POST',dataType:'json',data:{email:email,id_coupon_list:couponList},success:function(response){_self.setCouponCode(response.data['coupon']);},error:function(response){helper.showMessage({msg:Translate.get('cupons-amazon-empty-list-coupon-error'),alertClass:'pop-up-alert-danger'});}});};});;var Create_CouponAmazon_App=new(function(){var _self=this;var _couponAmazon;var _couponCode;this.setCouponCode=function(val){_couponCode=val};this.getCouponCode=function(){return _couponCode;};this.create=function(config,styleText){_content=$('<div>');if(config.copyContent){var divIcon=$('<div>').css({textAlign:'right',float:'right'}).appendTo(_content);$('<i>').addClass('fa fa-clone').attr({'title':Translate.get('coupons-app-titulo-default')}).on('click',function(){var copText=$('span[data-item="couponCode"]').text();var inputTemp=$("<input>");$(_content).append(inputTemp);inputTemp.val(copText).select();document.execCommand("copy");inputTemp.remove();}).appendTo(divIcon);}
var divCoupon=$('<div>').css({textAlign:'center'}).appendTo(_content);_couponAmazon=$('<span>').text(config.msg).attr('data-item','couponCode').css({color:config['color']}).appendTo(divCoupon);_couponAmazon.on('mouseover',function(){$(this).css({color:config['colorHover']});}).on('mouseleave',function(){$(this).css({color:config['color']});});_couponAmazon.css({fontFamily:styleText['text']['font-family'],fontSize:styleText['text']['font-size'],fontStyle:styleText['text']['font-style'],fontWeight:styleText['text']['font-weight']});return _content;};});;var Publish_Form_Validate=new(function(){var _self=this;this.getSettings=function(form,submitHandler,invalidHandler){var rules=[];$(form).find('input, select, textarea').each(function(){var obj={};if($(this).is(':required')){obj.required=true;}
switch($(this).attr('type')){case'email':obj.email=true;break;case'url':obj.url=true;break;}
if(obj){rules[$(this).attr('name')]=obj;}});var setting={rules:rules,submitHandler:submitHandler,showErrors:function(errorMap,errorList){$.each(this.validElements(),function(index,element){$(element).tooltip().removeClass("error").removeAttr('title').tooltip("disable");});$.each(errorList,function(index,error){var element=$(error.element);try{element.attr({'title':error.message,'data-toggle':"tooltip"}).addClass("error").tooltip({position:{my:"center center",at:"center bottom+20"}}).tooltip("enable");}catch(e){console.log(e);}});}};if(typeof invalidHandler=='function'){setting.invalidHandler=invalidHandler;}
return setting;};})();;function Publish_Form_BtnFiles(container){var _editable=typeof HTML_Load!='undefined';function _createBtnFiles(){if(_editable){var containerBtn=$(container).find('.containerBtn').css('position','relative');var position=$(containerBtn).css('text-align');var divAll=$('<div>').addClass('btn-divAll').css({'display':'inline-flex'});if(position=="right"){divAll.css({'margin':'0px 15px -15px 15px'}).prependTo(containerBtn);}else{divAll.css({'margin':'0px -15px 0px 15px'}).appendTo(containerBtn);}
var divDrop=$('<div>').addClass('btn-drop').css('margin-top','4px').attr({'title':Translate.get('publish-formulario-anexar')}).tooltip().appendTo(divAll);var button=$('<button>').addClass('btn btn-info btn-uploader sm').attr({type:'button','upload-ref':container.id}).on('click',function(){var ref=$(this).attr('upload-ref');var files=Publish_UploaderForm.getPreviews(ref);Publish_UploaderForm.init();Publish_UploaderForm.setRefContainer(ref);Publish_Upload_Preview.show();Publish_Upload_Preview.setFiles(files,ref);}).appendTo(divDrop);$('<i>').addClass('fa fa-paperclip').appendTo(button);}else{$(container).find('.btn-drop button').on('click',function(){var ref=$(this).attr('upload-ref');var files=Publish_UploaderForm.getPreviews(ref);Publish_UploaderForm.init();Publish_UploaderForm.setRefContainer(ref);Publish_Upload_Preview.show();Publish_Upload_Preview.setFiles(files,ref);});}}
if($(container).hasClass("habilitado")){_createBtnFiles();}else{$(container).find('.btn-divAll').remove('.btn-divAll');}};var Publish_Mailmkt_Mautic=new(function(){var _self=this;this.attachEvent=function(element,config){if(!element.length){element=$(element);}
element.find('form').get(0).action=config.action;element.find('form').get(0).addEventListener('submit',function(e){e.preventDefault();window.open(config.action,'Mautic','_blank');});};this.normalizeFields=function(form){form.find('input[required]').each(function removeRequired(key,value){$(value).removeAttr('required');});form.find('input[type="checkbox"]').each(function fieldCheckbox(key,value){normalize(value);});form.find('input[type="radio"]').each(function fieldRadio(key,value){normalize(value);});};function normalize(field){var _self=this;var group=$(field).parent().parent().parent();if(group.hasClass('form-group')){if($(field).attr('name')!=_self.name){_self.name=$(field).attr('name');_self.labelText=$(field).attr('data-label');group.prepend(_self.labelText);}}}})();;var Publish_Galeria=new(function(){this.paginator=function(element){if($(element).hasClass('selected')){return;}
var galeria=$(element).closest('.galeria');var open=galeria.find('.galeria-page[data-ref="'+$(element).attr('data-ref')+'"]');var close=galeria.find('.galeria-page');_close(close);setTimeout(function(){_close(close);_show(element,open);},500);};function _close(close){$.each(close,function(index,element){$(element).hide('fade',500);$(element).removeClass('selected');});$('.galeria_paginator > button.selected').removeClass('selected');};function _show(element,open){$(element).addClass('selected');open.addClass('selected');open.show('fade',500);};this.fancybox=function(galeria){var borderRadius=$(galeria).find('a.galeria-image').css('border-radius')||'0%';var boxMessage=$('<div>').css('border-radius',borderRadius).addClass('galeria-box-message');var message=$('<span>').appendTo(boxMessage);$(galeria).find('a.galeria-image').on('mouseenter',function(){var text=$(this).attr('title')||'';if(text.length>80){text=text.split(0,77)+'...';}
message.text(text);boxMessage.appendTo($(this).find(' > span:first-of-type')).show('fade',{duration:200});}).on('mouseleave',function(){boxMessage.hide();}).fancybox({parent:'.body',maxHeight:700,prevEffect:'none',nextEffect:'none',helpers:{title:{type:'inside'}}});};})();;function CarouselGallery(config,listImages,container){var _self=this;var _container;var _carousel;var _gallery;var _content;var _config=$.extend({autostart:true,duration:1000},config);this.getHTML=function(){return _container;};_container=$('<div>').addClass('galeria-carousel-container galeria-carousel-'+(_config.isHorizontal==true?'horizontal':'vertical'));_gallery=$('<div>').addClass('galeria-carousel').appendTo(_container);function _addImage(params,index){var source=params.src;var figureWidth,figureHeight,dataCss;if(_config.isHorizontal){if(_config.spaced==true)
figureWidth=parseInt($(container).width()/3)-30;else
figureWidth=parseInt($(container).width()/2)-30;dataCss={'border-radius':_config.radius+'%',width:figureWidth+'px',height:parseInt($(container).height())-20+'px','background-image':'url('+helper.getThumbSource(source,parseInt(figureWidth))+')',left:_config.spaced==true?'33%':'25%'}}else{if(_config.spaced==true)
figureHeight=parseInt($(container).height()/3)-30;else
figureHeight=parseInt($(container).height()/2)-30;dataCss={'border-radius':_config.radius+'%',height:figureHeight+'px',width:parseInt($(container).width())-20+'px','background-image':'url('+helper.getThumbSource(source,parseInt($(container).width()))+')',top:_config.spaced==true?'33%':'25%'}}
var link=$('<a>').appendTo(_content);if(params.title)
link.attr({'title':params.title});if(params.href)
link.attr({'href':params.href,'target':'_blank'});$('<figure>').addClass('item').attr('data-index',index).css($.extend({},dataCss,{opacity:'inherit',transform:'inherit'})).appendTo(link);}
function _createImages(){_gallery.empty();_content=$('<div>').addClass('galeria-carousel-content-images').attr('data-index','0').appendTo(_gallery);for(var index in listImages){_addImage(listImages[index],index);}
_gallery.css({perspective:_config.perspective});_createNav();_createBullets();}
function _createNav(){if(_config.showNav!=false){var p=$('<p>').addClass('galeria-image-nav nav-control prev '+_config.showNav).attr('data-increment',"-1").appendTo(_container);$('<p>').addClass('galeria-image-nav nav-control next '+_config.showNav).attr('data-increment',"+1").appendTo(_container);}}
function _createBullets(){if(_config.showBullets!=false){var controlBullet=$('<div>').addClass('galeria-image-bullets '+_config.showBullets).appendTo(_container);for(var index in listImages){$('<div>').attr('data-index',parseInt(index)).addClass('control-bullet').appendTo(controlBullet);}}}
this.setConfig=function(value){_config=value;_createImages();};_createImages();}
var Publish_CarouselGallery=function(){var _self=this;var _carousel;var _gallery;var _interval;var _config;var _container;var _countImages=0;var _indexShowed=0;var _indexSelected=0;this.create=function(config,listImages,container){_config=config;_container=container;var _gallery=new CarouselGallery(_config,listImages,container);_self.buildCarousel($(_gallery.getHTML()).find('.galeria-carousel-content-images'));return _gallery;};this.buildCarousel=function(element){_countImages=$(element).find('figure').length;_carousel=new Carousel3D(element);_carousel.panelSize=$(_container).width();_carousel.panelCount=_countImages;_carousel.isHorizontal=_config.isHorizontal;_carousel.visibleBackFace=_config.visibleBackFace;if(!_carousel.visibleBackFace){_carousel.element.addClass('panels-backface-invisible');}
_carousel.modify(element);_countImages=_countImages-1;};this.attachEvent=function(config,container){_config=config;_container=container;_gallery=$(container).find('.galeria-carousel-container');$(container).on('click','.control-bullet',function(){_self.rotateCarousel($(this).attr('data-index'),0);});$(container).on('click','.nav-control',function(){_self.rotateCarousel(undefined,$(this).attr('data-increment'));});_self.buildCarousel($(container).find('.galeria-carousel-content-images'));_self.start();_self.rotateCarousel();$(container).on('mouseenter',function(){_self.stop();}).on('mouseleave',function(){_self.start();});};this.stop=function(){clearInterval(_interval);};this.start=function(){_interval=setInterval(function(){_self.rotateCarousel(undefined,1);},_config.duration)};this.rotateCarousel=function(index,increment){if(typeof index!='undefined'){var jump=index-_indexShowed;_indexShowed=index;index=jump;}
if(typeof increment=='undefined'){increment=0;}
if(typeof index=='undefined'){index=0;}
if(increment!=0){_indexShowed+=parseInt(increment);if(_indexShowed>_countImages){_indexShowed=0;}
if(_indexShowed<0){_indexShowed=_countImages;}}else{_indexShowed=parseInt(_indexShowed)+parseInt(increment)}
if(_indexShowed>_countImages){while(_indexShowed>_countImages){_indexShowed-=_countImages;}
if(_indexShowed==1){_indexShowed=0;}}
_indexSelected+=parseInt(index)+parseInt(increment);$(_container).find('.control-bullet').removeClass('active');$(_container).find('.control-bullet[data-index="'+_indexShowed+'"]').addClass('active');_carousel.rotation=_carousel.theta*_indexSelected*-1;_carousel.transform();}};;var Publish_ImageHover=new(function(){var _self=this;this.attachEvent=function(container,data,svg){if(typeof Publication_Config_Items!='undefined'){var config=Publication_Config_Items.getConfig(container.id);if(typeof config!='undefined'&&!helper.isEmpty(config['container_link'])){$(container).on('click',function(){Publish_Link.call(config['container_link']);});}}
var _image=$(container).find('img')[0];$(container).on('mouseover',function(){if(helper.getFileExtension($(_image).attr('src'))=='svg'||$(_image).attr('src').indexOf('/generate/svg/')>-1){_svgOver(_image,svg);}}).on('mouseleave',function(){if(helper.getFileExtension($(_image).attr('src'))=='svg'||$(_image).attr('src').indexOf('/generate/svg/')>-1){_svgLeave(_image,svg);}});$(container).find('figcaption').each(function(){$(this).css({'background-color':data.colorHover,'opacity':0,}).mouseover(function(){$(this).css({'opacity':1})}).mouseout(function(){$(this).css({'opacity':0})});});$(container).find('figcaption a').each(function(){$(this).css({'color':data.fontColor}).bind("mouseenter focus",function(){$(this).css({'color':data.fontColorHover});}).bind("mouseleave",function(){$(this).css({'color':data.fontColor});})});};_self.isEmpty=function(property){return!((typeof property=='string'&&property!='')||(!helper.isEmpty(property)));};function _svgOver(image,svg){if(!helper.isEmpty(svg)){if(!_self.isEmpty(svg.srcHover))$(image).attr('src',svg.srcHover);if(!_self.isEmpty(svg.backgroundHover))$(image).css('background',svg.backgroundHover);}}
function _svgLeave(image,svg){if(!helper.isEmpty(svg)){if(!_self.isEmpty(svg.src))$(image).attr('src',svg.src);if(!_self.isEmpty(svg.background))$(image).css('background',svg.background);}}})();;var Publish_ImageEffect=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);this.buildImageEffect=function(){var configs=_item.configs;var link=_item.link;var figure=$(_target).find('figure');var figCaption=figure.find('figcaption');var button=figCaption.find('a');if(button){button.on('mouseleave',function(){$(this).css({color:configs.buttonColor,background:configs.backgroundButton});});button.on('mouseover',function(){$(this).css({color:configs.buttonColorHover,background:configs.backgroundButtonHover});});button.on('click',function(){Publish_Link.call(link);});}
if(configs.imageEffect==7){figure.on('mouseleave',function(){figCaption.css({boxShadow:'0 0 0 0px '+configs.backgroundColor})});figure.on('mouseover',function(){figCaption.css({boxShadow:'0 0 0 10px '+configs.backgroundColor})})}}};;var Publish_Icon=new(function(){this.create=function(configs,element,type,container){var text=$('<span>').html($(element).text());if(configs&&configs.icon!=''){var icon=$('<i>').addClass('fa '+configs.icon);if(type=='CallAction')
return icon;icon.css({fontSize:type=='Icon'?configs.size+'px':configs.size+'%',padding:configs.padding+'px',color:configs.color,borderRadius:configs.borderRadius+'%',backgroundColor:configs.background});if(!container){container=icon};container.on('mouseleave',function(){icon.css({color:configs.color,backgroundColor:configs.background})}).on('mouseover',function(){icon.css({color:configs.colorHover,backgroundColor:configs.backgroundHover})});switch(configs.position){case'top':icon.css('margin-bottom',configs.margin);$(element).html('').append(icon,'<br>',text);break;case'bottom':icon.css('margin-top',configs.margin);$(element).html('').append(text,'<br>',icon);break;case'right':icon.css('margin-left',configs.margin);$(element).html('').append(text,icon);break;case'left':icon.css('margin-right',configs.margin);$(element).html('').append(icon,text);break;default:$(element).html('').append(icon);break;}
return icon;}else{$(element).html('').append(text);}};this.buildIcon=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);if($(target).attr('data-item')=='Icon'){$(target).on('click',function(){Publish_Link.call($(target).attr('data-address'));});}
var icon=$(_target).find('i');if(icon&&icon.length&&typeof _item!='undefined'){var configs=_item.icon;$(target).on('mouseenter',function(){if(configs){if(configs.colorHover)icon.css('color',configs.colorHover);if(configs.backgroundHover)icon.css('background-color',configs.backgroundHover);}}).on('mouseleave',function(){if(configs){if(configs.color)icon.css('color',configs.color);if(configs.background)icon.css('background-color',configs.background);}});}}})();;var Publish_GaleriaHover=new(function(){this.fancybox=function(galeria){var boxMessage=$('<div>').addClass('galeriahover-box-message');var message=$('<span>').appendTo(boxMessage);$(galeria).find('a.galeriahover-image').on('mouseenter',function(){var text=$(this).attr('title')||'';if(text.length>80){text=text.split(0,77)+'...';}
message.height($(this).height()).width($(this).width()).text(text);boxMessage.detach().appendTo(this).show('fade',{duration:200});}).on('mouseleave',function(){boxMessage.hide();}).fancybox({parent:'.body',maxHeight:700,prevEffect:'none',nextEffect:'none',helpers:{title:{type:'inside'}}});};this.attachEvent=function(container,data){$(container).find('figcaption').each(function(){$(this).css({'background-color':data.colorHover,'opacity':0,}).mouseover(function(){$(this).css({'opacity':1})}).mouseout(function(){$(this).css({'opacity':0})});});$(container).find('figcaption a').each(function(){$(this).css({'color':data.fontColor}).bind("mouseenter focus",function(){$(this).css({'color':data.fontColorHover})}).bind("mouseleave",function(){$(this).css({'color':data.fontColor})})});};})();;var Publish_HoverElements=new(function(){this.attachEvent=function(container,data,hover){if(typeof data!='undefined'&&hover){if(!_verifyMenu(container)){return;}
$(container).addClass('has-hover').mouseenter(function(){for(var index in data){(function(args){if(args.pai==container.id){var node=container;}else{var node=$(container).find('#'+args.pai).get(0);}
if(_verifyMenu(node)){args.dataOld=$(node).attr('data-item');$(node).attr('data-item',args.dataNew);$(helper.getLastItemOfType(node)).attr('data-item',args.dataNew);}})(data[index]);}}).mouseleave(function(){for(var index in data){(function(args){if(args.pai==container.id){var node=container;}else{var node=$(container).find('#'+args.pai).get(0);}
if(_verifyMenu(node)){$(node).attr('data-item',args.dataOld);$(helper.getLastItemOfType(node)).attr('data-item',args.dataOld);}})(data[index]);}});}};function _verifyMenu(elem){var device=typeof HTML_Load!='undefined'?HTML_Load.getConfig('device'):Publicar.getOptions('deviceDetected');if((device!='desktop'&&device!='1')&&$(elem).attr('data-item').indexOf('Menu_')>-1){return false;}
return true;}})();;var Base_Themes_Animation_Box=new(function(){var _themes={'theme-1':{animationHover:"",},'theme-2':{animationHover:{'animMouseenter':{'text-main':{'speed':400,'easing':'easeOutExpo','delay':140,'dir':1},'text-bottom':{'speed':400,'easing':'easeOutExpo','delay':0,'dir':1},'icon':{'speed':800,'easing':'easeOutBounce','delay':280,'dir':1}},'animMouseleave':{'text-main':{'speed':400,'easing':'easeInExpo','delay':140,'dir':1},'text-bottom':{'speed':400,'easing':'easeInExpo','delay':280,'dir':1},'icon':{'speed':400,'easing':'easeInExpo','delay':0,'dir':1}}}},'theme-3':{animationHover:{'animMouseenter':{'text-main':{'speed':150,'easing':'jswing','delay':0,'dir':1},'text-bottom':{'speed':150,'easing':'jswing','delay':0,'dir':1},'icon':{'speed':150,'easing':'jswing','delay':0,'dir':1}},'animMouseleave':{'text-main':{'speed':100,'easing':'jswing','delay':0,'dir':1},'text-bottom':{'speed':100,'easing':'jswing','delay':0,'dir':1},'icon':{'speed':100,'easing':'jswing','delay':0,'dir':1}},'boxAnimSpeed':0}},'theme-4':{animationHover:{'animMouseenter':{'text-main':{'speed':200,'easing':'easeOutExpo','delay':250,'dir':1},'text-bottom':{'speed':200,'easing':'easeOutExpo','delay':0,'dir':1},'icon':{'speed':200,'easing':'easeOutExpo','delay':500,'dir':1}},'animMouseleave':{'text-main':{'speed':200,'easing':'easeInExpo','delay':250,'dir':1},'text-bottom':{'speed':200,'easing':'easeInExpo','delay':500,'dir':1},'icon':{'speed':200,'easing':'easeInExpo','delay':0,'dir':1}}}},'theme-5':{animationHover:{'animMouseenter':{'text-main':{'speed':200,'easing':'easeOutExpo','delay':0,'dir':1},'text-bottom':{'speed':600,'easing':'easeOutExpo','delay':400,'dir':1},'icon':{'speed':200,'easing':'easeOutExpo','delay':0,'dir':1}},'animMouseleave':{'text-main':{'speed':200,'easing':'easeInExpo','delay':150,'dir':1},'text-bottom':{'speed':200,'easing':'easeInExpo','delay':0,'dir':1},'icon':{'speed':200,'easing':'easeInExpo','delay':300,'dir':1}}}},'theme-6':{animationHover:{'animMouseenter':{'text-main':{'speed':400,'easing':'easeOutExpo','delay':140,'dir':-1},'text-bottom':{'speed':400,'easing':'easeOutExpo','delay':280,'dir':-1},'icon':{'speed':400,'easing':'easeOutExpo','delay':0,'dir':-1}},'animMouseleave':{'text-main':{'speed':400,'easing':'easeInExpo','delay':140,'dir':-1},'text-bottom':{'speed':400,'easing':'easeInExpo','delay':0,'dir':-1},'icon':{'speed':400,'easing':'easeInExpo','delay':280,'dir':-1}}}},'theme-7':{animationHover:{'animMouseenter':{'text-main':{'speed':400,'easing':'easeOutBack','delay':200,'dir':-1},'text-bottom':{'speed':400,'easing':'easeOutBack','delay':400,'dir':-1},'icon':{'speed':400,'easing':'easeOutBack','delay':0,'dir':-1}},'animMouseleave':{'text-main':{'speed':200,'easing':'easeInExpo','delay':150,'dir':1},'text-bottom':{'speed':200,'easing':'easeInExpo','delay':300,'dir':1},'icon':{'speed':200,'easing':'easeInExpo','delay':0,'dir':1}}}},'theme-8':{animationHover:{'animMouseenter':{'text-main':{'speed':500,'easing':'easeOutExpo','delay':200,'dir':-1},'text-bottom':{'speed':500,'easing':'easeOutExpo','delay':200,'dir':-1},'icon':{'speed':700,'easing':'easeOutBounce','delay':0,'dir':1}},'animMouseleave':{'text-main':{'speed':400,'easing':'easeInExpo','delay':0,'dir':-1},'text-bottom':{'speed':400,'easing':'easeInExpo','delay':0,'dir':1},'icon':{'speed':400,'easing':'easeInExpo','delay':0,'dir':-1}}}}}
this.getThemes=function(){return _themes;};});;var Menu_Add_Video_Sticky=new(function(){var _config;var _dialog=null;var _target=null;var _form=null;var showSelects=false;var colPosition;var colEffects;var _inputEnablePin;var _size={'SMALL':0,'NORMAL':1,'LARGE':2};var _sizes=[{height:'113px',width:'200px'},{height:'155px',width:'275px'},{height:'197px',width:'350px'}];var _position={'TOP LEFT':0,'TOP RIGHT':1,'BOTTOM LEFT':2,'BOTTOM RIGHT':3};var _positions=[{top:'5%',right:'auto',left:'5%',bottom:'auto'},{top:'5%',right:'5%',left:'auto',bottom:'auto'},{top:'auto',right:'auto',left:'5%',bottom:'5%'},{top:'auto',right:'5%',left:'auto',bottom:'5%'}];this.setTarget=function(target){_target=target;_config=_target.getStickyConfig();};this.show=function(){if(!_dialog){_dialog=PopUp.getInstance('Sticky-Configure');_dialog.setTitle(Translate.get('sticky-configure'),true);_dialog.stopEventOnShow(true);_dialog.setDimension(350);_create();_dialog.setContent(_form);var btnConfirm=$('<button>').addClass('btn btn-primary').on('click',function(){_form.submit();}).css({float:'right'}).text(Translate.get('confirm'));var btnCancel=$('<button>').addClass('btn btn-default').on('click',function(){_dialog.hide();}).css({float:'right',marginRight:'10px'}).text(Translate.get('cancel'));_dialog.addBottom(btnConfirm);_dialog.addBottom(btnCancel);}
_setParams();_dialog.show();};function _create(){_form=$('<form>').addClass('form').attr({'class':'form-video',action:'',method:'post'}).css({'padding':'10px'}).on('submit',function(event){event.preventDefault();_config.pinOnScroll=_inputEnablePin.is(':checked'),_target.setStickyConfig(_config);_target.reloadItem(_target);_dialog.hide();});Tutorial.build('sticky-video',_form);var checkBoxes=$('<div>').addClass('checkbox').appendTo(_form);var lblEnablePin=$('<label>').text(Translate.get('enable-sticky-on-scroll-effect')).appendTo(checkBoxes);_inputEnablePin=$('<input>').attr({type:'checkbox',value:1}).prependTo(lblEnablePin);colEffects=$('<div>').appendTo(_form);$('<label>').addClass('label-control').text(Translate.get('size-sticky-config')).appendTo(colEffects);var _sizeSticky=new OMB_Select({name:'position',height:156,autoclose:true,onChange:function(option){_config.pinScrollSize=option['key'];}});_sizeSticky.getHTML().appendTo(colEffects);for(var index in _size){_sizeSticky.addOption({key:_size[index],value:_size[index],text:'<p>'+index+'</p>'});}
_sizeSticky.setSelected(_config.pinScrollSize);colPosition=$('<div>').appendTo(_form);$('<label>').addClass('label-control').text(Translate.get('position-sticky-config')).appendTo(colPosition);var _positionSticky=new OMB_Select({name:'position',height:156,autoclose:true,onChange:function(option){_config.pinScrollPosition=option['key'];}});_positionSticky.getHTML().appendTo(colPosition);for(var index in _position){_positionSticky.addOption({key:_position[index],value:_position[index],text:'<p>'+index+'</p>'});}
_positionSticky.setSelected(_config.pinScrollPosition);showSelectInput();$(_inputEnablePin).on('click',function(){if(_inputEnablePin.is(':checked')){colEffects.show();colPosition.show();}else{colEffects.hide();colPosition.hide();}});}
function showSelectInput(){showSelects=_config.pinOnScroll;if(showSelects){colEffects.show();colPosition.show();}else{colEffects.hide();colPosition.hide();}}
function _setParams(){_config=_target.getStickyConfig();if(_config.pinOnScroll){showSelects=true;}
showSelectInput();_inputEnablePin.prop('checked',helper.fixBoolean(_config.pinOnScroll));}
this.setSticky=function(_container,stickyConfig){if(stickyConfig.pinOnScroll){$(_container).addClass('hasStickyVideo');var sizeSticky=_sizes[stickyConfig.pinScrollSize];var positionSticky=_positions[stickyConfig.pinScrollPosition];var containerLeft=$(_container).css('left');var containerTop=$(_container).css('top');var containerHeight=$(_container).css('height');var containerWidth=$(_container).css('width');var elemOriginalTop=$(_container).offset().top;var elemOriginalBottom=elemOriginalTop+($(_container).height()/2);var video;var buttonClose=$('<i>').addClass("fa fa-times").css({'position':'relative','margin-left':sizeSticky.width,'top':'-'+sizeSticky.height,'display':'none','cursor':'pointer'}).click(function(){video=$(_container).find('iframe').attr("src");$(_container).find('iframe').attr("src","");$(_container).hide();}).appendTo(_container);if(typeof HTML_Load!='undefined'){elemOriginalBottom-=50;}
$(window).on('scroll.stickyVideo-'+$(_container).attr('id'),function(){var changedTop=$(window).scrollTop();var change=(changedTop>elemOriginalBottom);if(change){if($(_container).css('position')!=='fixed'){$(_container).fadeOut('400',function(){$(_container).css(positionSticky);$(_container).css(sizeSticky);$(_container).css('position','fixed');$(_container).css('z-index','2');$(_container).fadeIn('400');$(buttonClose).show();});}}else{if($(_container).css('position')!=='absolute'){$(buttonClose).hide();$(_container).find('iframe').attr("src",video);$(_container).show();$(_container).fadeOut('400',function(){$(_container).css('top',containerTop);$(_container).css('left',containerLeft);$(_container).css('height',containerHeight);$(_container).css('width',containerWidth);$(_container).css('position','absolute');$(_container).css('z-index','auto');$(_container).fadeIn('400');});}}});}}})();;var Publish_HoverEvents=function(target){this.buildTextStyleHover=function(target){var _target=target;var _content=$(_target).find('.link-hover');var _item=Publication_Config_Items.getConfig(_target.id);var _configs=_item.config;_content.css('color',_configs.textColor);switch(_configs.theme){case'1':_content.find('span').css('color',_configs.additionalTextColor);_content.on('mouseleave',function(){$(this).css({color:_configs.textColor});}).on('mouseover',function(){$(this).css({color:_configs.textHoverColor});});break;case'3':_content.find('span').on('mouseleave',function(){$(this).css({color:_configs.textColor});}).on('mouseover',function(){$(this).css({color:_configs.textHoverColor});});break;case'4':_content.find('span').css('color',_configs.textColor);_content.on('mouseleave',function(){$(this).find('span').css('color',_configs.textColor);}).on('mouseover',function(){$(this).find('span').css('color',_configs.textHoverColor);});break;case'6':_content.find('span').css('color',_configs.additionalTextColor);_content.on('mouseleave',function(){$(this).css({color:_configs.textColor});}).on('mouseover',function(){$(this).css({color:_configs.textHoverColor});});break;case'7':_content.css('border-color',_configs.textColor);_content.find('span').css('color',_configs.textColor);_content.on('mouseleave',function(){$(this).css({color:_configs.textColor});_content.find('span').css('color',_configs.textColor);}).on('mouseover',function(){$(this).css({color:_configs.textHoverColor});_content.find('span').css('color',_configs.textHoverColor);});break;case'8':_content.on('mouseleave',function(){$(this).css({color:_configs.textColor,});}).on('mouseover',function(){$(this).css({color:'transparent'});});break;case'9':_content.on('mouseleave',function(){$(this).css({color:_configs.textColor,});_content.find('span').css('color',_configs.textColor);}).on('mouseover',function(){$(this).css({color:'transparent'});_content.find('span:first-child').css('color',_configs.textHoverColor);_content.find('span:last-child').css('color',_configs.textHoverColor2);});break;}
_content.on('click',function(){Publish_Link.call(_item.link)});_content.css('cursor','pointer');}
this.buildCircleBoxHover=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);var _link=$(target).find('a');_link.on('click',function(){Publish_Link.call(_item.link)});_link.css('cursor','pointer');};this.buildTextButtonHover=function(target){var _target=target;var _theme=$(_target).find('nav').attr('class');var _item=Publication_Config_Items.getConfig(_target.id);var _link=$(target);switch(_theme){case'button-text-hover-theme-5':$(_target).find('nav').on('mouseover',function(){$(_target).find('.'+_theme+'-front').addClass(_theme+'-front-hover')}).on('mouseleave',function(){$(_target).find('.'+_theme+'-front').removeClass(_theme+'-front-hover')});break;default:$(_target).find('nav').on('mouseover',function(){$(_target).find('.'+_theme+'-back').addClass(_theme+'-back-hover')}).on('mouseleave',function(){$(_target).find('.'+_theme+'-back').removeClass(_theme+'-back-hover')});if(_theme==='button-text-hover-theme-4')_link=$(target).find(('.'+_theme));break;}
_link.on('click',function(){Publish_Link.call(_item.link)});_link.css('cursor','pointer');}
this.buildBoxHover=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);var _link=$(target).find('a');_link.on('click',function(){Publish_Link.call(_item.link)});}
this.buildIconHover=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);var _link=$(target).find('a');_link.on('click',function(){Publish_Link.call(_item.container_link)});var configs=_item.configs;var content=$(_target).find('.content');var theme=content.find('div').first();var themeFront=content.find('div')[1];var themeBack=content.find('div')[2];var ancora=content.find('a');theme.on('click',function(){Publish_Link.call(_item.container_link)});if(configs.iconTheme<3||configs.iconTheme>5){$(themeFront).css({background:configs.backgroundColor});$(themeFront).find('a').css({boxShadow:'0 0 0 3px '+configs.colorBorder});}else{$(themeFront).css({background:'transparent',});$(themeBack).css({background:configs.backgroundColor});$(themeFront).find('a').css({boxShadow:'0 0 0 3px '+configs.colorBorder});}
if(configs.iconTheme>=3&&configs.iconTheme<=5){$(themeFront).mouseover(function(){$(themeFront).addClass(configs.theme+'-front-hover');$(themeFront).find('a').css({color:configs.iconColorHover,});$(themeBack).addClass('hover-icon').addClass(configs.theme+'-back-hover');});$(themeFront).mouseleave(function(){$(themeFront).removeClass(configs.theme+'-front-hover');$(themeFront).find('a').css({color:configs.iconColor,});$(themeBack).removeClass('hover-icon').removeClass(configs.theme+'-back-hover');});}
else{$(themeBack).mouseover(function(){$(themeFront).css({background:configs.backgroundIconHover,});$(themeFront).find('a').css({color:configs.iconColorHover,});$(themeFront).addClass(configs.theme+'-front-hover');$(themeBack).addClass('hover-icon').addClass(configs.theme+'-back-hover');switch(configs.iconTheme){case 1:case 2:$(themeFront).find('a').css({boxShadow:'0 0 0 0px '+configs.colorBorder,});$(themeBack).css({boxShadow:'0 0 0 4px '+configs.colorBorder});break;case 7:case 8:$(themeFront).find('a').css({color:configs.iconColorHover,boxShadow:'0 0 0 0px '+configs.colorBorder});$(themeBack).css({border:'4px dashed '+configs.colorBorder});break;case 9:case 10:case 11:case 12:$(themeFront).find('a').css({boxShadow:'0 0 0 0px '+configs.colorBorder,});$(themeFront).css({boxShadow:'0 0 0 10px '+configs.colorBorder,});break;case 13:$(themeFront).find('a').addClass('fa-spin');var back=$(themeBack).addClass('theme-13-back-hover').empty();if($(themeBack).val()===''){$('<a>').css('line-height','20px').css('font-size','20px').css('margin-top','13px').addClass('icon').addClass('fa-spin').appendTo(back);}
break;case 14:case 15:$(themeBack).css({boxShadow:'3px 3px '+configs.colorBorder});break;case 16:case 18:$(themeFront).find('a').css({boxShadow:'0 0 0 0px '+configs.colorBorder});break;case 17:$(themeFront).find('a').css({boxShadow:'0 0 0 10px '+configs.colorBorder});break;}});$(themeBack).mouseleave(function(){$(themeFront).css({background:configs.backgroundColor,});$(themeFront).find('a').css({color:configs.iconColor,});$(themeFront).removeClass(configs.theme+'-front-hover');$(themeBack).removeClass('hover-icon').removeClass(configs.theme+'-back-hover');switch(configs.iconTheme){case 1:case 2:$(themeFront).find('a').css({boxShadow:'0 0 0 3px '+configs.colorBorder,});$(themeBack).css({boxShadow:'0 0 0 0px '+configs.colorBorder});break;case 7:case 8:$(themeFront).find('a').css({color:configs.iconColor,boxShadow:'0 0 0 4px '+configs.colorBorder});$(themeBack).css({border:'0px dashed '+configs.colorBorder});break;case 9:case 10:case 11:case 12:$(themeFront).find('a').css({boxShadow:'0 0 0 3px '+configs.colorBorder,});$(themeFront).css({boxShadow:'0 0 0 0px '+configs.colorBorder,});break;case 13:$(themeFront).find('a').removeClass('fa-spin');break;case 14:case 15:$(themeBack).css({boxShadow:'0px 0px '+configs.colorBorder});case 16:$(themeFront).find('a').css({boxShadow:'0 0 0 0px '+configs.colorBorder});break;case 17:$(themeFront).find('a').css({boxShadow:'0 0 0 0px '+configs.colorBorder});break;}});}}
this.buildAnimationBoxHover=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);var _link=$(target).find('a');var _configs=_item.configs;var _animationBox=$(target).find('ul');_link.on('click',function(){Publish_Link.call(_item.link)});_link.css('cursor','pointer');_link.find('span').css('background-image','url('+_configs.img+')');var _animationTheme=Base_Themes_Animation_Box.getThemes();_animationBox.iconmenu(_animationTheme['theme-'+_configs.theme].animationHover,_configs);};};;var Publish_StickyVideos=function(){this.buildStickyVideo=function(target){var _stickyConfig=Publication_Config_Items.getConfig(target.id).sticky;Menu_Add_Video_Sticky.setSticky(target,_stickyConfig);};};;var Publish_FadeOutElements=new(function(){this.attachEvent=function(container,fadeOut){if(fadeOut){var headerHeight=150;var windowHeight=$(window).height()-250;var lastScrollTop;if($('[name="element"][data-item^="Header"]').hasClass('fixedElements'))
headerHeight+=$('[name="element"][data-item^="Header"]').height();$(container).addClass('has-fade-out');$(window).scroll(function(){var scrollTop=$(this).scrollTop();$(container).find('[name="element"][data-item]').each(function(){var topElement=$(this).offset().top;var heightElement=$(this).height();if(scrollTop<20){$(this).css('opacity',1);}else{if((topElement-scrollTop)<headerHeight){if(scrollTop>lastScrollTop){$(this).css('opacity',parseFloat($(this).css('opacity'))-0.05);}else{if((topElement-scrollTop)>(headerHeight-150)){$(this).css('opacity',parseFloat($(this).css('opacity'))+0.05);}}}
if(((topElement+heightElement)-scrollTop)>windowHeight){if(scrollTop>lastScrollTop){if((topElement-scrollTop)>(headerHeight-250)){$(this).css('opacity',parseFloat($(this).css('opacity'))+0.05);}}else{$(this).css('opacity',parseFloat($(this).css('opacity'))-0.05);}}
if((topElement-scrollTop)<(headerHeight-150)){$(this).css('opacity',0);}
if((topElement-scrollTop)>(windowHeight+250)){$(this).css('opacity',0);}
if((topElement-scrollTop)>headerHeight&&(topElement-scrollTop)<windowHeight){$(this).css('opacity',1);}}});lastScrollTop=scrollTop;});}};})();;var Clock_Unit=function(args){var _conf={value:0,label:'',timeToChange:new Array(),listValues:new Array()},_label=null,_timeIndex=0,_valueIndex=0,_time=0,_self=this,_html=$('<div>').addClass('container_clock_units'),_containerUnit=$('<div>').appendTo(_html);if(args){$.extend(_conf,args);}
var pieces=_splitValue(_conf.value);for(var index in pieces){var unit=$('<div>').addClass('omb-timer flip-clock').appendTo(_containerUnit);unit.append(_createNum(pieces[index]));}
_label=$('<div>').addClass('clock-label').text(_conf.label).appendTo(_html);function _createNum(unit,className){var timerContainer=$('<div>').addClass('timer-container'+(className?" "+className:""));var timerUnit=$('<div>').addClass('timer-unit').appendTo(timerContainer);var up=$('<div>').addClass('up').appendTo(timerUnit);$('<div>').addClass('shadow').appendTo(up);$('<div>').addClass('inn').text(unit).appendTo(up);var down=$('<div>').addClass('down').appendTo(timerUnit);$('<div>').addClass('shadow').appendTo(down);$('<div>').addClass('inn').text(unit).appendTo(down);return timerContainer;}
function _splitValue(value){var pieces=new Array();do{pieces.unshift(value%10);value=parseInt(value/10);}while(value);if(pieces.length==1){pieces.unshift(0);}
return pieces;};function _change(){if(_conf.timeToChange.length-1>_timeIndex){_timeIndex++;}
if(_conf.value==0&&_conf.listValues.length){if(_conf.listValues.length-1>_valueIndex){_valueIndex++;}
_conf.value=_conf.listValues[_valueIndex];var lastValue=0;}else{var lastValue=_conf.value--;}
var lastValuePieces=_splitValue(lastValue),valuePieces=_splitValue(_conf.value);if(lastValuePieces.length>valuePieces.length){while(lastValuePieces.length>valuePieces.length){valuePieces.unshift(0);}}else if(lastValuePieces.length<valuePieces.length){while(lastValuePieces.length<valuePieces.length){lastValuePieces.unshift(0);}}
var group=new Array();for(var index in valuePieces){group.push({before:lastValuePieces[index],active:valuePieces[index]});}
_containerUnit.empty();for(var index in group){var unit=$('<div>').addClass('omb-timer flip-clock').appendTo(_containerUnit);if(group[index].before!=group[index].active){var before=_createNum(group[index].before,'clock-before');var active=_createNum(group[index].active,'clock-active');unit.append(before);unit.append(active);}else{unit.append(_createNum(group[index].active));}}};this.changeLabel=function(text){_label.text(text);};this.addTime=function(val){_time+=val;if(_time>=_conf.timeToChange[_timeIndex]){_time=0;_change();}};this.getHTML=function(){return _html;};};var Publish_Timer=function(){var defaultDate=new Date();defaultDate.setMonth(4);defaultDate.setDate(21);defaultDate.setHours(0);defaultDate.setMinutes(0);defaultDate.setSeconds(0);var a=Date.UTC(defaultDate.getFullYear(),4,21,0,0,0);var b=Date.UTC(defaultDate.getFullYear(),defaultDate.getMonth(),defaultDate.getDate(),defaultDate.getHours(),defaultDate.getMinutes(),defaultDate.getSeconds(),defaultDate.getMilliseconds());if(b-a>0){defaultDate.setFullYear(defaultDate.getFullYear()+1);}
var _self=this,_interval,_intervalTime=1000,_data=null,_time=0,_conf={identifier:'myclock',onDone:{action:'none',link:null},size:'md',sizeDevice:{desktop:'',tablet:'',mobile:''},fontFamily:'Arial Black, Gadget, sans-serif',type:'specific_date',specific_date:defaultDate.toString(),save_date:'',addToDate:{years:0,months:0,days:0,hours:8,minutes:0,seconds:0},fieldsEnableEmpty:false,resetTimer:0,displayMode:'auto',display:{years:1,months:1,days:1,hours:1,minutes:1,seconds:1},displayLabel:true,labels:{years:'Year',months:'Month',days:'Days',hours:'Hours',minutes:'Minutes',seconds:'Seconds'}};function _getDateFromCookie(){if(_conf.resetTimer>0)
var d=_getCookie("timer_"+_conf.identifier+'R'+_conf.resetTimer);else
var d=_getCookie("timer_"+_conf.identifier);if(!d){var date=new Date();date.setSeconds(date.getSeconds()+_conf.addToDate.seconds);date.setMinutes(date.getMinutes()+_conf.addToDate.minutes);date.setHours(date.getHours()+_conf.addToDate.hours);date.setDate(date.getDate()+_conf.addToDate.days);date.setMonth(date.getMonth()+_conf.addToDate.months);date.setFullYear(date.getFullYear()+_conf.addToDate.years);d=date.toUTCString();if(_conf.resetTimer>0)
_setCookie("timer_"+_conf.identifier+'R'+_conf.resetTimer,d,365*3);else
_setCookie("timer_"+_conf.identifier,d,365*3);}
return d;}
function _setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*86400000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires;}
function _getCookie(name){var name=name+"=";var ca=document.cookie.split(';');for(var index in ca){var c=helper.trim(ca[index]);if(c.indexOf(name)==0)
return c.substring(name.length,c.length);}
return null;}
function _clearCookie(){_setCookie("timer_"+_conf.identifier,"",-1);}
function _deleteCookie(){var cookieTimer=_self.getCookie();document.cookie=("timer_"+_conf.identifier)+"="+cookieTimer+";expires=Wed; 01 Jan 1997";}
function _isLeap(year){return!((year%4)||(!(year%100)&&(year%400)));}
function _getMonthDays(year,month){var monthDays=[31,28,31,30,31,30,31,31,30,31,30,31];return monthDays[month]+(month==1&&_isLeap(year)?1:0);}
function _onDone(){if(_conf.onDone.action=='page'){Publish_Link.call(_conf.onDone.link);}};function _getObjDate(){var dateTo=new Date((_conf.type=='evergreen'?_getDateFromCookie():_conf.specific_date)),dateFrom=new Date(),a=Date.UTC(dateTo.getFullYear(),dateTo.getMonth(),dateTo.getDate(),dateTo.getHours(),dateTo.getMinutes(),dateTo.getSeconds(),dateTo.getMilliseconds()),b=Date.UTC(dateFrom.getFullYear(),dateFrom.getMonth(),dateFrom.getDate(),dateFrom.getHours(),dateFrom.getMinutes(),dateFrom.getSeconds(),dateFrom.getMilliseconds()),time=a-b;if(time<0){time=0;}else{time+=1000;}
data={time:time,clockUnits:{}};var auto=(_conf.displayMode=='auto'),manual=!auto,fieldsEnableEmpty=_conf.fieldsEnableEmpty,showYears=_conf.display.years,showMonths=_conf.display.months,showDays=_conf.display.days,showHours=_conf.display.hours,showMinutes=_conf.display.minutes,showSeconds=_conf.display.seconds;if(time>0){var fYear=dateFrom.getFullYear(),fMonth=dateFrom.getMonth(),fDay=dateFrom.getDate();if(fieldsEnableEmpty&&manual==false){var empty=false;for(var index in _conf.addToDate){if(_conf.addToDate[index]!=0){empty=true;}
if(empty==true){if(typeof data.clockUnits[_conf.labels[index].toLowerCase()]=='undefined'){data.clockUnits[index]=new Clock_Unit({value:0,label:_conf.labels[index]});}}}}
if(auto||showYears||showMonths||showDays){var days=parseInt(time/86400000);time=time%86400000;if(manual&&!showYears&&!showMonths){data.clockUnits.days=new Clock_Unit({value:days,label:_conf.labels.days,timeToChange:[time,86400000]});}else{var year=fYear,month=fMonth,countM=0,countYears=0,countDaysOfyear=0,listMonthsDays=[],listYearsDays=[],timeMonths=[],timeYears=[],totalMonthDays=_getMonthDays(year,month)-fDay;function incrementMonth(){days-=totalMonthDays;countDaysOfyear+=totalMonthDays;countM++;listMonthsDays.push(totalMonthDays-1);timeMonths.push(totalMonthDays*86400000);}
function incrementYear(){timeYears.push(countDaysOfyear*86400000);listYearsDays.push(countDaysOfyear);countDaysOfyear=0;countYears++;}
function incrementDate(){if(month==11){month=0;year++;}else{month++;}
totalMonthDays=_getMonthDays(year,month);}
if(totalMonthDays<days){var diff=totalMonthDays;days-=diff;incrementDate();while(totalMonthDays<days){incrementMonth();if(countM%12==0){incrementYear();}
incrementDate();}
days+=diff;if(totalMonthDays<days){incrementMonth();if(countM%12==0){incrementYear();}}
countDaysOfyear+=days;}
if((manual&&showYears)||(auto&&countYears)){timeYears.unshift(countDaysOfyear*86400000+time);data.clockUnits.years=new Clock_Unit({value:countYears,label:_conf.labels.years,timeToChange:timeYears});countM=countM%12;}
if((manual&&showMonths)||(auto&&(countM||countYears))){timeMonths.unshift(days*86400000+time);data.clockUnits.months=new Clock_Unit({value:countM,label:_conf.labels.months,timeToChange:timeMonths,listValues:[11]});}
if((manual&&showDays&&showMonths)||(auto&&(countYears||countM||days))){data.clockUnits.days=new Clock_Unit({value:days,label:_conf.labels.days,timeToChange:[time,86400000],listValues:listMonthsDays});}else if(manual&&showDays&&showYears){data.clockUnits.days=new Clock_Unit({value:countDaysOfyear,label:_conf.labels.days,timeToChange:[time,86400000],listValues:listYearsDays});}
if(manual&&!showDays){time+=(showMonths?days*86400000:countDaysOfyear*86400000);}}}
if((manual&&showHours)||(auto&&data.time>=3600000)){var values=new Array();if(manual&&!showDays){values.push(parseInt(time/3600000));if(showMonths){for(var index in listMonthsDays){values.push(listMonthsDays[index]*24-1);}}else if(showYears){for(var index in listYearsDays){values.push(listYearsDays[index]*24-1);}}}else{values.push(23);}
data.clockUnits.hours=new Clock_Unit({value:parseInt(time/3600000),label:_conf.labels.hours,timeToChange:[time%3600000,3600000],listValues:values});time=time%3600000;}
if((manual&&showMinutes)||(auto&&data.time>=60000)){var values=new Array();if(manual&&!showHours){values.push(parseInt(time/60000));if(showDays){values.push(24*60-1);}else if(showMonths){for(var index in listMonthsDays){values.push(listMonthsDays[index]*24*60-1);}}else if(showYears){for(var index in listYearsDays){values.push(listYearsDays[index]*24*60-1);}}}else{values.push(59);}
data.clockUnits.minutes=new Clock_Unit({value:parseInt(time/60000),label:_conf.labels.minutes,timeToChange:[time%60000,60000],listValues:values});time=time%60000;}
if((manual&&showSeconds)||(auto&&data.time>=1000)){var values=new Array();if(manual&&!showMinutes){values.push(parseInt(time/1000));if(showHours){values.push(3600-1);}else if(showDays){values.push(24*3600-1);}else if(showMonths){for(var index in listMonthsDays){values.push(listMonthsDays[index]*24*3600-1);}}else if(showYears){for(var index in listYearsDays){values.push(listYearsDays[index]*24*3600-1);}}}else{values.push(59);}
data.clockUnits.seconds=new Clock_Unit({value:parseInt(time/1000),label:_conf.labels.seconds,timeToChange:[time%1000,1000],listValues:values});}
return data;}else{if(auto){if(fieldsEnableEmpty){var empty=false;for(var index in _conf.addToDate){if(_conf.addToDate[index]!=0){empty=true;}
if(empty==true){data.clockUnits[index]=new Clock_Unit({value:0,label:_conf.labels[index]});}}}else{data.clockUnits.seconds=new Clock_Unit({value:0,label:_conf.labels.seconds});}}else{for(var index in _conf.display){if(_conf.display[index]){data.clockUnits[index]=new Clock_Unit({value:0,label:_conf.labels[index]});}}}
return data;}}
this.onLoadPage=function(){if(_time>=_data.time){_onDone();}};this.getClock=function(){clearInterval(_interval);_data=_getObjDate();if(typeof HTML_Load!='undefined'){var device=HTML_Load.getConfig('device');}else{var device=Publicar.getOptions('device');}
var clock=$('<div>').attr('id','omb10-timer-'+_conf.identifier).addClass('omb-timer omb-timer-'+((!_conf.sizeDevice[device]!='')?_conf.size:_conf.sizeDevice[device]));if(!_conf.displayLabel){clock.addClass('omb10-timer-invisible');}
for(var index in _data.clockUnits){var unit=_data.clockUnits[index];clock.append(unit.getHTML());}
if(typeof HTML_Load=='undefined'||!HTML_Load.isEditable()){_time=0;_interval=setInterval(function(){_time+=_intervalTime;if(_time>=_data.time){clearInterval(_interval);var page=clock.closest('.page');if(page.length==0||$(page.get(0)).css('display')!='none'){_onDone();}}else{for(var index in _data.clockUnits){_data.clockUnits[index].addTime(_intervalTime);}}},_intervalTime);}
return clock;};this.getConf=function(){return _conf;};this.changeLabel=function(key,text){if(_data.clockUnits[key]){_data.clockUnits[key].changeLabel(text);}};this.setConf=function(conf){if(typeof conf=='object'){_conf=$.extend(_conf,conf);for(var index in _conf.addToDate){_conf.addToDate[index]=parseInt(_conf.addToDate[index]);}
for(var index in _conf.display){_conf.display[index]=helper.fixBoolean(_conf.display[index]);}}};this.clearCookie=_clearCookie;this.getCookie=function(){return _getCookie("timer_"+_conf.identifier);};this.setCookie=function(){var date=new Date();date.setSeconds(date.getSeconds()+_conf.addToDate.seconds);date.setMinutes(date.getMinutes()+_conf.addToDate.minutes);date.setHours(date.getHours()+_conf.addToDate.hours);date.setDate(date.getDate()+_conf.addToDate.days);date.setMonth(date.getMonth()+_conf.addToDate.months);date.setFullYear(date.getFullYear()+_conf.addToDate.years);var d=date.toUTCString();_setCookie("timer_"+_conf.identifier,d,365*3);}
this.resetTimer=function(identifier){var timer=_self;var config=_self.getConf();if(config.type=="evergreen"){var cookie=timer.getCookie();document.cookie="timer_"+identifier+'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';timer.setCookie();}else if(config.type=="specific_date"){var date=new Date();}};};;var Publish_BgVideo=new(function(){var _self=this;function _getTopDiff(){return typeof HTML_Load!='undefined'?helper.getTopDiff():0;}
function _setPos(video,pos){$(video).css({'-ms-transform':'translateY('+pos+'px)','-webkit-transform':'translateY('+pos+'px)','transform':'translateY('+pos+'px)'});if(typeof HTML_Load=='undefined'||!HTML_Load.isEditable()){$(video).prop({'autoplay':true,'muted':true});function checkLoad(){if(typeof $(video).get(0)!='undefined'&&typeof $(video).get(0).readyState!='undefined'){if($(video).get(0).readyState===4){$(video).get(0).play();}else{setTimeout(checkLoad,100);}}}
checkLoad();}}
function _setBgFixed(container,video){var topDiff=_getTopDiff();var scrollTop=$(window).scrollTop();var top=$(container).offset().top;var pos=(topDiff+scrollTop-top);_setPos(video,0);}
function _setBgParallax(container,video,velocity){if(!helper.isFacebookAppUserAgent()){var scrollTop=$(window).scrollTop();var top=$(container).offset().top;var windowHeight=$(window).height();var topDiff=_getTopDiff();var dist=(topDiff+scrollTop-top);var pos=0;var h=$(container).data('height');if(h){h=parseInt(h);}else{h=$(container).height();}
var cBottom=top+h;var wBottom=windowHeight+scrollTop;if(dist<0||cBottom<wBottom){var parallax=velocity/10*dist;pos=dist-parallax;if(cBottom<wBottom&&windowHeight<h){var diff=velocity/10*(h-windowHeight);pos+=diff;}}else{pos=dist;}
_setPos(video,pos);}}
this.setBgEffect=function(container,data){if(typeof Publicar!='undefined'&&Publicar.getOptions('deviceDetected')=='3'||helper.isFacebookAppUserAgent()){_self.showThumb(container);}else{$(window).off('scroll.bgvideo.'+container.id);var video=$(container).find('.video-banner-overlay > video').get(0);if(data.type=='none'){_setPos(video,0);}else if(data.type=='fixed'){$(window).on('scroll.bgvideo.'+container.id,function(){_setBgFixed(container,video);});_setBgFixed(container,video);}else if(data.type=='parallax'){$(window).on('scroll.bgvideo.'+container.id,function(){_setBgParallax(container,video,data.velocity);});_setBgParallax(container,video,data.velocity);if((typeof HTML_Load!='undefined'&&HTML_Load.getConfig('device')!='mobile')||(typeof Publicar!='undefined'&&Publicar.getOptions('deviceDetected')!='3')){$(container).find('.video-thumb').css('background-image','');}}}};this.showThumb=function(container){var src=$($(container).find('.video-banner-overlay > video > source').get(0)).attr('src');var divThumb=$("<div>").addClass('video-thumb').css('background-image','url("/generate/video/thumb/'+helper.toBase64(src)+'")');$(container).find('.video-banner-overlay > video').appendTo(divThumb);};})();;var Publish_UploaderForm=new(function(){var _uploader;var _files={};var _previews={};var _refContainer;this.getPreviews=function(ref){return _previews[ref];};this.setRefContainer=function(refCont){_refContainer=refCont;};this.removeRef=function(refCont,ref){delete _files[refCont][ref];delete _previews[refCont][ref];Publish_Form.setFiles(_files);};this.getUploader=function(){return _uploader.getBtnUploader();};this.init=function(){var _idLayout=typeof HTML_Load!='undefined'?HTML_Load.getConfig("identify"):Publicar.getOptions('idLayout');function _error(uploader_file){var container=uploader_file.getNode().closest('.file-node-container-form');container.addClass('zoomOutUp animated').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',function(){$(this).remove();});}
_uploader=new Uploader({accept:(function(){var types=Uploader_Preview_Factory.getMimeTypes('file');var response=new Array();for(var index in types){response=response.concat(types[index]);}
return response;})(),message:Translate.get('upload-file-requirements-info'),action:"/editor-html/files/form-upload-files/"+_idLayout+'?idLayout='+_idLayout,max_size:10*1048576,multiple:true,click:function(){},add:function(uploader_file){var id=uploader_file.getPreview().getID();var exist=false;var up={};for(var index in _previews){if(index==_refContainer){exist=true;}}
if(!exist){up[id]=uploader_file;_previews[_refContainer]=up;}else{up=uploader_file;_previews[_refContainer][id]=up;}
Publish_Upload_Preview.addFile(uploader_file,_refContainer,uploader_file.getPreview().getID());},success:function(data){var id=data.preview.getPreview().getID();var exist=false;var up={};for(var index in _files){if(index==_refContainer){exist=true;}}
if(!exist){up[id]=data.response;;_files[_refContainer]=up;}else{up=data.response;;_files[_refContainer][id]=up;}
Publish_Form.setFiles(_files);Base_Alert({msg:'Upload Completed',alertClass:'pop-up-alert-success',show_btn_cancel:false,text_btn_confirm:'Confirm',onConfirm:function(){}});},after_success_animation:function(data){Publish_Upload_Preview.removeProgressBar();},after_fail_animation:_error,after_error_animation:_error,style:'normal'});};});;var Publish_Upload_Preview=new(function(){var _self=this;var _container;var _popUp;var _content;var _option;var _node;this.removeProgressBar=function(){_content.find('.container-progress-bar').remove();};this.setFiles=function(files,refContainer){_content.empty();for(var index in files){_self.addFile(files[index],refContainer,index);}};this.addFile=function(file,refContainer,count){_node=file.getNode();var preview=file.getPreview();_node.appendTo(_content);_node.attr('data-ref',count);var span=preview.getContainer().find('span');span.addClass('text-ellipsis');var button=preview.getContainer().find('.modal-file-options-form');_option=$('<div>').addClass('modal-file-options-form').appendTo(preview.getContainer());var modalFileOption=$('<div>').addClass('container-file-options-form').appendTo(_option);var removeOption=$('<div>').addClass('file-option-form').appendTo(modalFileOption);$('<i>').addClass('fa fa-trash-o').appendTo(removeOption);_option.get(0).onclick=function(){var parent=$(this).parent().parent();var ref=parent.attr('data-ref');Publish_UploaderForm.removeRef(refContainer,ref);$(this).parent().parent().remove();};};function _createPopUp(){_popUp=PopUp.getInstance('Publish_Uploader_Preview');_popUp.stopEventOnShow(true);}
function _create(){_container=$('<div>').attr('id','popUp-files-content-files-form').addClass('list row').css({'height':'400px'});var divTitle=$('<div>').addClass('col-xs-12').appendTo(_container);$('<label>').text('Send files').css({'font-weight':'700','font-size':'17px','padding':'5px 10px','position':'absolute'}).appendTo(divTitle);var uploader=Publish_UploaderForm.getUploader();uploader.css({'float':'right','width':'100px'}).appendTo(divTitle);_content=$('<div>').addClass('file-node-container-form col-xs-12').appendTo(_container);_popUp.setContent(_container);}
this.show=function(){if(!_container){_createPopUp();_create();}
_popUp.show();};});;function Publish_Utility_iFrame(){var _html;var _type;var _content;_content=$('<iframe>').css({border:0,width:"100%",height:"100%"}).attr({frameborder:0});this.setHTML=function(html){_html=html;};this.getHTML=function(){return _html;};this.setType=function(type){_type=type;};this.getType=function(){return _type;};this.load=function(){var doc=_content.contents().get(0);doc.open();if(_type=='html'){doc.write(_html);}else{_html=(_html.indexOf('http')==0||_html.indexOf('//')==0?_html:'http://'+_html);doc.write('<iframe frameborder="0" width="100%" height="100%" src="'+_html+'"></iframe>');}
if(doc.body)
doc.body.style.overflow='hidden';doc.close();};this.resize=function(width,height){if(_type=='link'){_content.width(width);_content.height(height);}};this.getContent=function(){return _content;};};var Publish_ScrollAnimation=new(function(){var _self=this;var _enable=false;var _args={};var _target=null;var _count;this.init=function(){$(window).on('scroll.animation',function(e){if(_enable){if(_target){_self.animate(this,_target);}else{for(var c in _args){_self.animate(this,c);}}}});};this.enable=function(val,id){_enable=val;_target=id;};this.getConfig=function(id){return _args[id];};this.removeConfig=function(id){var arr={};for(var i in _args){if(i!=id){arr[i]=_args[i];}}
_args=arr;};this.setConfig=function(container,config){$(window).scrollTop(0);_args[container.id]={container:container,config:config,diffOriginalLeft:0,diffOriginalTop:0,positionTop:0,positionLeft:0,diffRotateTop:0,diffRotateLeft:0,diffWidth:0,diffHeight:0,diff:0,adjusted:false,initDegree:_self.getDegree($(container))};var isEditable=typeof HTML_Load!='undefined'&&HTML_Load.isEditable();if(!helper.isEmpty(config)){var top=parseFloat($(container).css('top'));var left=parseFloat($(container).css('left'));_args[container.id].diffOriginalTop=config[0].top-top;_args[container.id].diffOriginalLeft=config[0].left-left;var topOK=config[0].top-_args[container.id].diffOriginalTop;var leftOK=config[0].left-_args[container.id].diffOriginalLeft;if(!isEditable){$(container).css({opacity:1,top:config[0].positionTop,left:config[0].positionLeft})}}
if(config&&typeof config[1]!='undefined'){$(container).css({'opacity':config[1].options.fadeOut.enable?0:1,'transform':'rotate(0)',"-webkit-transform":'rotate(0)',"-moz-transform":'rotate(0)',"-ms-transform":'rotate(0)',"-o-transform":'rotate(0)'});var degree=_args[container.id].initDegree;config[1].options.rotate.init=degree;$(container).css({'top':0,'left':0,'transform':'translate('+leftOK+'px,'+topOK+'px) rotate('+degree+'deg)',"-webkit-transform":'translate('+leftOK+'px,'+topOK+'px) rotate('+degree+'deg)',"-moz-transform":'translate('+leftOK+'px,'+topOK+'px) rotate('+degree+'deg)',"-ms-transform":'translate('+leftOK+'px,'+topOK+'px) rotate('+degree+'deg)',"-o-transform":'translate('+leftOK+'px,'+topOK+'px) rotate('+degree+'deg)'});}};this.animate=function(el,id_item){var keys=Object.keys(_args[id_item].config);for(var index in keys){index=parseInt(index);if(index>0){var current=_args[id_item].config[keys[index]];var prev=(index>0?_args[id_item].config[keys[index-1]]:null);var next=(index+1<=keys.length?_args[id_item].config[keys[index+1]]:null);var transform='';var scrollTop=$(el).scrollTop()+helper.getTopDiff();var distance=current.line.end-current.line.init;var difTop=current.top-prev.top;var difLeft=current.left-prev.left;if(scrollTop>=current.line.init&&scrollTop<current.line.end){_args[id_item].adjusted=false;var percentScroll=parseFloat(((scrollTop-current.line.init)/distance));var top=difTop*percentScroll;var left=difLeft*percentScroll;var percentTop=prev.top+top
var percentLeft=prev.left+left;current.options.scale.w=typeof current.options.scale.w=='undefined'?1:current.options.scale.w;current.options.scale.h=typeof current.options.scale.h=='undefined'?1:current.options.scale.h;var height=current.height*current.options.scale.value/100;var width=current.width*current.options.scale.value/100;var diffHeight=parseFloat((((current.height+((height-current.height)*percentScroll))/current.height)+current.options.scale.h).toFixed(2))-1;var diffWidth=parseFloat((((current.width+((width-current.width)*percentScroll))/current.width)+current.options.scale.w).toFixed(2))-1;var topCorrect=percentTop-_args[id_item].diffOriginalTop;var leftCorrect=percentLeft-_args[id_item].diffOriginalLeft;transform+='translate('+leftCorrect+'px,'+(_args[id_item].diff+topCorrect)+'px)';_args[id_item].diffHeight=diffHeight;_args[id_item].diffWidth=diffWidth;if(current.options.scale.enable){if(next){next.options.scale.h=diffHeight;next.options.scale.w=diffWidth;}
transform+=' scale('+diffHeight+','+diffWidth+')';}else{if(next){next.options.scale.h=current.options.scale.h;next.options.scale.w=current.options.scale.w;}
transform+=' scale('+current.options.scale.h+','+current.options.scale.w+')';}
var initRotate=parseFloat(current.options.rotate.init);var valueRotate=parseFloat(current.options.rotate.value);var endRotate=initRotate+valueRotate;var rotate=initRotate+(valueRotate*percentScroll);if(current.options.rotate.enable){current.options.rotate.end=endRotate;if(next){next.options.rotate.init=endRotate;}
transform+=' rotate('+rotate+'deg)';}else{current.options.rotate.end=initRotate;if(next){next.options.rotate.init=initRotate;}
transform+=' rotate('+initRotate+'deg)';}
if(index==1&&current.options.fadeOut.enable){var valueFade=parseFloat(current.options.fadeOut.value);var fade=(valueFade*percentScroll)/100;$(_args[id_item].container).css({'opacity':fade});};$(_args[id_item].container).css({'transform':transform,"-webkit-transform":transform,"-moz-transform":transform,"-ms-transform":transform,"-o-transform":transform});}else{if(!_args[id_item].adjusted){var find=false;if(index===1&&scrollTop<current.line.init){find=true;_args[id_item].diff=0;var top=prev.top-_args[id_item].diffOriginalTop;var left=prev.left-_args[id_item].diffOriginalLeft;var h=1;var w=1;var deg=prev.options.rotate.init+_args[id_item].initDegree;var opacity=current.options.fadeOut.enable?0:1;}else if(next&&scrollTop>current.line.end&&scrollTop<next.line.init){find=true;var top=current.top-_args[id_item].diffOriginalTop;var left=current.left-_args[id_item].diffOriginalLeft;var h=next.options.scale.h;var w=next.options.scale.w;var deg=current.options.rotate.end;var opacity=1;}else if(!next&&current.line.end<scrollTop){find=true;var top=current.top-_args[id_item].diffOriginalTop;var left=current.left-_args[id_item].diffOriginalLeft;var h=current.options.scale.enable?current.options.scale.h+(_args[id_item].diffHeight-current.options.scale.h):current.options.scale.h;var w=current.options.scale.enable?current.options.scale.w+(_args[id_item].diffWidth-current.options.scale.w):current.options.scale.w;var deg=current.options.rotate.end;var opacity=1;}
if(find){$(_args[id_item].container).css({'top':0,'left':0,'transform':'translate('+left+'px,'+(_args[id_item].diff+top)+'px) rotate('+deg+'deg) scale('+h+','+w+')',"-webkit-transform":'translate('+left+'px,'+(_args[id_item].diff+top)+'px) rotate('+deg+'deg) scale('+h+','+w+')',"-moz-transform":'translate('+left+'px,'+(_args[id_item].diff+top)+'px) rotate('+deg+'deg) scale('+h+','+w+')',"-ms-transform":'translate('+left+'px,'+(_args[id_item].diff+top)+'px) rotate('+deg+'deg) scale('+h+','+w+')',"-o-transform":'translate('+left+'px,'+(_args[id_item].diff+top)+'px) rotate('+deg+'deg) scale('+h+','+w+')','opacity':opacity});_args[id_item].adjusted=true;}}
if(scrollTop>current.line.end){if(typeof next=='undefined'||scrollTop<next.line.init){if(current.options.fixed){var distance=typeof next!='undefined'?next.line.init-current.line.end:0;current.distance=distance;var plusDistance=0;for(var j in _args[id_item].config){if(j!=keys[index]){plusDistance+=_args[id_item].config[j].distance;}else{break;}}
_args[id_item].diff=plusDistance+(scrollTop-current.line.end);$(_args[id_item].container).css({"-webkit-transform":'translate('+(current.left-_args[id_item].diffOriginalLeft)+'px,'+(_args[id_item].diff+(current.top-_args[id_item].diffOriginalTop))+'px) rotate('+next.options.rotate.init+'deg) scale('+next.options.scale.h+','+next.options.scale.w+')',"-moz-transform":'translate('+(current.left-_args[id_item].diffOriginalLeft)+'px,'+(_args[id_item].diff+(current.top-_args[id_item].diffOriginalTop))+'px) rotate('+next.options.rotate.init+'deg) scale('+next.options.scale.h+','+next.options.scale.w+')',"-ms-transform":'translate('+(current.left-_args[id_item].diffOriginalLeft)+'px,'+(_args[id_item].diff+(current.top-_args[id_item].diffOriginalTop))+'px) rotate('+next.options.rotate.init+'deg) scale('+next.options.scale.h+','+next.options.scale.w+')',"-o-transform":'translate('+(current.left-_args[id_item].diffOriginalLeft)+'px,'+(_args[id_item].diff+(current.top-_args[id_item].diffOriginalTop))+'px) rotate('+next.options.rotate.init+'deg) scale('+next.options.scale.h+','+next.options.scale.w+')','opacity':1})}}}}}}};this.getDegree=function(node){var angle;var degree=node.css("-webkit-transform")||node.css("-moz-transform")||node.css("-ms-transform")||node.css("-o-transform")||node.css("transform")||0;if(degree!=0){if(degree.indexOf('matrix')>-1){var values=degree.split('(')[1],values=values.split(')')[0],values=values.split(',');var b=values[1];angle=Math.round(Math.asin(b)*(180/Math.PI));}else{if(degree!='none'){var values=degree.split('(')[1],values=values.split('deg)')[0];}else{values=0;}
angle=parseFloat(values);}}else{angle=degree;}
return angle;};})();;var Publish_Translate=new(function(){var _self=this;var _translations={};var _queue=[];var _position=0;var _busy=false;this.get=function(namespace,callback){if(!_translations[namespace]){if(_busy){_queue.push({namespace:namespace,callback:callback});}else{_busy=true;_self[namespace](callback);}}else{if(typeof callback=='function'){callback(_translations[namespace]);}
_self.callNext();}};this.getIdLayout=function(){return(typeof HTML_Load!='undefined'?HTML_Load.getConfig('identify'):Publicar.getOptions('idLayout'));};this.loginMenu=function(callback){$.ajax({url:'/publish/access/translate',type:'POST',dataType:'json',async:false,data:{layout:_self.getIdLayout()},success:function(response){_translations['loginMenu']=response.data.translate;},error:function(response){_translations['loginMenu']=[];},complete:function(){if(typeof callback=='function'){callback(_translations['loginMenu']);}
_self.callNext();}});};this.callNext=function(){if(_position<_queue.length){_self.get(_queue[_position].namespace,_queue[_position].callback);_position++;}}})();;var Publish_Twitter=new(function(){this.createTimeLine=function(config){var link=$('<a>').addClass(config.className).attr('href',config.href);var block=['className','href','width','height','chrome'];for(var index in config){if(block.indexOf(index)==-1){link.attr('data-'+index,config[index])}}
link.attr('width',config.width[helper.getDevice()]);link.attr('height',config.height[helper.getDevice()]);var chrome=[];for(index in config.chrome){if(config.chrome[index]){chrome.push(index);}}
link.attr('data-chrome',chrome.join(' '));return link;}})();;var Publish_WordEffect=function(config){var _container;var _phrases=[];var _self=this;var _index=1;var _started=false;var _timeout={};var _repeat;config=$.extend({autostart:true,in:'slide-zoom-in',out:'slide-zoom-out',duration:200,delay:1000,repeat:'infinite',fontSize:25+'px',fontFamily:'Arial',fontColor:'rgb( 0, 0, 0)',phrases:["First sentence","Second sentence","Third sentence"]},config||{});_container=$('<div>').addClass('word_effect');function _buildPhrases(){for(var i=0;i<config.phrases.length;i++){var content=$('<div>').addClass('word-effect-phrase').appendTo(_container);var table=$('<div>').addClass('word-effect-table').appendTo(content);var cell=$('<div>').addClass('word-effect-cell').appendTo(table);var data={node:cell,pieces:[]};for(var j=0;j<config.phrases[i].length;j++){data.pieces.push($('<span>').css({fontSize:config.fontSize,fontFamily:config.fontFamily,color:config.fontColor}).addClass(i==0?'in visible':'').html(config.phrases[i].charAt(j)==' '?'&ensp;':config.phrases[i].charAt(j)).appendTo(cell));}
_phrases.push(data);}}
this.config=function(attr,value){if(typeof value!='undefined'){config[attr]=value;}else{return config[attr];}};function _addClass(phrase,position,type,onComplete){if(position<phrase.pieces.length){phrase.pieces[position].removeClass().addClass(type+' '+config[type]).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',function(){$(this).addClass(type=='in'?'visible':'invisible');});;_timeout[type]=setTimeout(function(){position++;_addClass(phrase,position,type,onComplete);},config.duration);}else{if(typeof onComplete=='function'){onComplete();}}}
function _animate(){if(_repeat=='infinite'||_repeat>0){_timeout.animation=setTimeout(function(){if(typeof _repeat=='number'&&_index+1==_phrases.length){_repeat--;}
var prev=(_index==0?_phrases.length-1:_index-1);var next=(_index+1==_phrases.length?0:_index+1);var count=0;function onComplete(){count++;if(count==2){_index=next;_animate();}}
_addClass(_phrases[prev],0,'out',onComplete);_addClass(_phrases[_index],0,'in',onComplete);},config.delay);}else{_self.reset();}};function _clearTimeout(){for(var i in _timeout){clearTimeout(_timeout[i]);}
_timeout={};}
this.reset=function(){_repeat=config.repeat;_started=false;_clearTimeout();};this.build=function(){_self.reset();_index=1;_phrases=[];_container.empty();_buildPhrases();if(config.autostart){_self.start();}};this.start=function(){if(!_started){_animate();_started=true;}};this.getContainer=function(){return _container;};_self.build();};;var Publish_ProgressBar=new(function Publish_ProgressBar(){this.attachEvent=function(selector){Omb_Waypoints.attachEvent(selector,function(value,element){value=value.indexOf('%')>-1?value:value+'%';value=value.replace(',','.');$(element).find('.progress-bar').attr({'aria-valuenow':value.replace('%',''),'aria-valuemin':0,'aria-valuemax':100}).css('width',value);});};})();;var Publish_ProgressBarReview=new(function Publish_ProgressBar(){var _style={line:{position:'absolute',right:'0',padding:0,margin:0},circle:{position:'absolute',left:'50%',top:'50%',padding:'0px',margin:'0px',transform:'translate(-50%, -50%)'},semicircle:{position:'absolute',left:'50%',top:'auto',padding:'0px',margin:'0px',transform:'translate(-50%, 0px)'}};this.create=function(attr){var config=attr.config,structure=attr.structure,container=attr.container;$(container).empty();var element=$('<div>').attr('id',helper.getDevice()+'-'+$(container).attr('data-item')).appendTo(container);var source='#'+$(element).attr('id');if(!$(source).length)return;var progressBar=_getProgressBar(structure.type);var app=new progressBar(source,_getConfig(config,structure));if(typeof structure.percentage!='object')
structure.percentage={value:1};var value=_getValue(structure.percentage.value);if((typeof HTML_Load!='undefined'&&HTML_Load.isPreview())||typeof HTML_Load=='undefined')
element.waypoint(function(direction){app.animate(value);},{offset:'bottom-in-view'});else
app.animate(value);helper.hideLoadingModal(container);return app;};function _getValue(value){if(value>=1&&value<10){value=value.toString().replace(/\.|,/,'');return parseFloat('0.0'+value);}
if(value<1){value=value.toString().replace(',','.').split('.');return parseFloat('0.00'+value[1]);}
value=value.toString().replace(/\.|,/,'');if(value==100)
return 1;return parseFloat('0.'+value);}
function _getProgressBar(type){switch(type){case'circle':return ProgressBar.Circle;case'semicircle':return ProgressBar.SemiCircle;case'line':return ProgressBar.Line;}}
function _getConfig(config,structure){config.text=_getConfigText(config.text,structure);if(structure.type!='line'||!structure.text.position)
structure.text.position='center';config.text.style['text-align']=structure.text.position;if(typeof config.text.value=='undefined')
config.text.value='';if(structure.percentage.show){config.step=function(state,bar){if(!$(bar.text).hasClass('text-ellipsis'))
$(bar.text).addClass('text-ellipsis');var value=parseFloat(bar.value().toString().replace('/\.|,/','.'));value=Math.round10(value*100,-2);value=value.toString().replace(/\.|,/,structure.percentage.separator||'.');bar.setText(value+'% '+config.text.value);};}else{config.text.value='';config.text.autoStyleContainer=true;delete config.step;}
return config;}
function _getConfigText(config,structure){var arr={value:structure.text.value,style:_style[structure.type],autoStyleContainer:structure.text.active==true};if(!arr.style)
arr.style={};arr.style['font-family']=structure.text['font-family']||'Helvetica Neue';arr.style['font-size']=structure.text['font-size']||'13px';arr.style.color=structure.text.color;return $.extend({},config,arr);}})();;var Publish_ModalVideo=new(function(){var _config,_link;var _modal=$('#modalVideo'),_dialog,_content,_btnClose;function _create(){_createModal();_prepareData();}
function _createContent(){_modal=$('<div>').addClass('modal fade').attr('id','modalVideo').appendTo($('#view-content'));_dialog=$('<div>').addClass('modal-dialog').css({position:'absolute',left:'50%',top:'50%',transform:'translate(-50%, -50%)'}).on('mouseenter touchenter',function(){_btnClose.show();}).on('mouseleave touchleave',function(){_btnClose.hide();}).appendTo(_modal);_content=$('<div>').addClass('modal-content embed-responsive embed-responsive-16by9').css({position:'relative'}).appendTo(_dialog);_btnClose=$('<button>').addClass('btn btn-danger btn-sm').css({position:'absolute',top:'0',left:'0'}).html('<i class="fa fa-close"></i>').on('click',function(){_modal.modal('hide');}).hide().appendTo(_dialog);}
function _setContent(){_dialog=_modal.find('.modal-dialog');_content=_dialog.find('.modal-content');_btnClose=_dialog.find('.btn.btn-danger');}
function _createModal(){if(!_modal.length)
_createContent();else
_setContent()}
function _prepareData(){if(/youtube/.test(_link))
_link='https://www.youtube.com/embed/'+helper.urlYouTube(_link);else
_link='https://player.vimeo.com/video/'+helper.urlVimeo(_link);_link+='?';if(_config.autoplay==1)
_link+='autoplay=1&';if(_config.loop==1)
_link+='loop=1&';if(_config.controls==1)
_link+='controls=1&';var iframe=$('<iframe>').addClass('embed-responsive-item').attr({src:_link,width:'100%',height:'100%',frameborder:'0',allowfullscreen:'allowfullscreen'});_content.html(iframe);}
return function(config){_config=config;_link=_config.url;_create();_modal.modal('show');_modal.on('hide.bs.modal',function(e){_content.html('');});}})();;function Uploader_File(file,handler){var _self=this;var _formData=new FormData();var _preview=Uploader_Preview_Factory.create(file);var _progressbar=new Uploader_ProgressBar();var _container;var _containerProgressbar;var _loading;var _completed=false;_formData.append('file',file);var data=handler.option('data');if(typeof data=='object'&&!helper.isEmpty(data)){for(var index in data){_formData.append(index,data[index]);}}
_container=$('<div>').addClass('uploader-file-preview');_containerProgressbar=$('<div>').addClass('container-progress-bar').appendTo(_container);_loading=$('<div>').addClass('uploader-file-loading').html('<i class="fa fa-spinner fa-spin"></i>').appendTo(_container);function _progress(e){if(e.lengthComputable){var per=parseInt(e.loaded/e.total*100);_progressbar.setProgress(per);}};function _complete(data){handler.trigger('success',{preview:_self,response:data});setTimeout(function(){_progressbar.getProgressBar().hide('fade',300,function(){$(this).remove();var check=$('<div>').html('<i class="fa fa-check"></i>').addClass('fadeInUp animated uploader-progress-complete').appendTo(_containerProgressbar);setTimeout(function(){check.removeClass('fadeOutUp').addClass('fadeOutUp').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',function(){handler.trigger('after_success_animation',{preview:_self,response:data});check.remove();});},2000);});},1000);};function _error(data,type,time){handler.trigger(type,{preview:_self,response:data});if(typeof time=='undefined'){time=1000;}
setTimeout(function(){_progressbar.getProgressBar().hide('fade',300,function(){$(this).remove();$('<div>').html('<i class="fa fa-exclamation"></i>').addClass('fadeInUp animated uploader-progress-'+type).on('click',function(){var params={msg:data.error,show_btn_cancel:false,text_btn_confirm:'Ok! I get it',onConfirm:function(){handler.trigger("after_"+type+"_animation",_self);}};if(type=='fail'){params['alertClass']='pop-up-alert-warning';params['title']='Upload Fail';}else{params['alertClass']='pop-up-alert-danger';params['title']='Upload error';}
Base_Alert(params);}).appendTo(_containerProgressbar);});},time);};this.sendRequest=function(){if(!_completed){var max_size=handler.option('max_size');if(max_size&&parseInt(max_size)<=file.size){if(max_size>1048576){var size=(max_size/1048576).toFixed(2);if(max_size%1048576==0){size=parseInt(size);}
size+="Mbs"}else{var size=max_size+'Kbs';}
var data={error:Translate.get('uploader-error-max-size')+" Max size : "+size};_error(data,'fail',0);return;}
_container.append(_progressbar.getProgressBar());$.ajax({url:handler.option('action'),type:handler.option('method'),data:_formData,cache:false,contentType:false,processData:false,dataType:'json',xhr:function(){var myXhr=$.ajaxSettings.xhr();if(myXhr.upload){myXhr.upload.addEventListener('progress',_progress,false);}
return myXhr;},success:function(data){if(data.success){_complete(data.data);_container.addClass('complete');}else{_error(data,'fail');}},error:function(data){data.error=Translate.get('mensagem-erro-processo-ajax');_error(data,'error');},complete:function(){_completed=true;}});}};this.getFile=function(){return file;};this.getNode=function(){return _container;};this.getPreview=function(){return _preview;};_preview.load(function(){_loading.remove();_container.prepend(_preview.getContainer());handler.trigger('add',_self);});};;function Uploader_ProgressBar(){var _progress;var _progressbar;_progress=$('<div>').addClass('progress omb-uploader-progress-bar');_progressbar=$('<div>').addClass('progress-bar progress-bar-info progress-bar-striped').attr({role:'progressbar','aria-valuenow':0,'aria-valuemin':0,'aria-valuemax':100}).css({'min-width':'2em'}).text('0%').appendTo(_progress);this.setProgress=function(per){_progressbar.css('width',per+"%").text(per+"%");};this.getProgressBar=function(){return _progress;};};function Uploader_Preview_File(file,id){var _container;this.load=function(func){var icon='icon_undefined.png';var types=Uploader_Preview_Factory.getMimeTypes('file');for(var i in types){if($.inArray(file.type,types[i])!=-1){icon='icon_'+i+".ico";}}
_container=$('<div>').attr({title:file.name}).addClass('uploader-preview file-preview');if(typeof Initialize!='undefined'){var version=Initialize.getVersion();}else{var version=Publicar.getOptions('release_app_deploy');}
$('<img>').attr({src:'/app_'+version+'/js/editor-html/Base/Files/Uploader/assets/images/'+icon,alt:file.name}).appendTo(_container);$('<span>').addClass('help-block').text(file.name).appendTo(_container);if(typeof func=='function'){func();}};this.getID=function(){return id;};this.getContainer=function(){return _container;};};function Uploader_Preview_Video(file,id){var _container;var _reader=new FileReader();this.load=function(func){_reader.onload=function(e){_container=$('<video>').prop({loop:true,muted:true}).addClass('uploader-preview video-preview');$('<source>').attr({src:e.target.result,type:file.type}).appendTo(_container);if(typeof func=='function'){func();}};_reader.readAsDataURL(file);};this.getID=function(){return id;};this.getContainer=function(){return _container;};};function Uploader_Preview_Image(file,id){var _container;var _reader=new FileReader();this.load=function(func){_reader.onload=function(e){_container=$('<div>').css({'background-image':'url("'+e.target.result+'")'}).addClass('uploader-preview img-preview');if(typeof func=='function'){func();}};_reader.readAsDataURL(file);};this.getID=function(){return id;};this.getContainer=function(){return _container;};};var Uploader_Preview_Factory=new(function(){var _id=0;var _types={image:['image/png','image/jpeg','image/jpg','image/gif','image/svg','image/svg+xml'],video:['video/mp4'],file:{audio:['audio/mpeg3','audio/x-mpeg-3','video/mpeg','video/x-mpeg','audio/mp3','audio/mpeg'],pdf:['application/pdf','application/x-pdf'],doc:['application/msword','application/vnd.openxmlformats-officedocument.wordprocessingml.document'],xls:['application/excel','application/vnd.ms-excel','application/x-excel','application/x-msexcel','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],ppt:['application/mspowerpoint','application/powerpoint','application/vnd.ms-powerpoint','application/x-mspowerpoint ','application/vnd.ms-powerpoint','application/vnd.openxmlformats-officedocument.presentationml.presentation'],txt:['text/plain','text/rtf'],zip:['application/x-compressed','application/x-zip-compressed','application/zip','multipart/x-zip']},icon:['svg']};this.create=function(file){if($.inArray(file.type,_types.image)!=-1){return new Uploader_Preview_Image(file,_id++);}else if($.inArray(file.type,_types.video)!=-1){return new Uploader_Preview_Video(file,_id++);}else{return new Uploader_Preview_File(file,_id++);}};this.getMimeTypes=function(name){if(typeof name!='undefined'){return _types[name];}
return _types;}})();;(function(){var _self=this;var _content={};var _section='';var _params={};$(document).ready(function(){var footer=$('#membership-panel [data-item=Footer][name=element]');var header=$('#membership-panel [data-item=Header][name=element]');var body=$('#membership-panel [data-item=Body][name=element]');if(footer.length>0&&header.length>0&&body.length>0){footer.css({top:'inherit',bottom:0});body.css({height:'calc(100% - '+(footer.get(0).offsetHeight+header.get(0).offsetHeight)+'px)'});}})
$('.menu-membership-item').on('click',function(event){event.preventDefault();$('.menu-membership-item').removeClass('active');$(this).addClass('active');_section=$(this).attr('data-section');_getSectionContent();});$('.membership-panel-body').on('click','.membership-content-information',function(){_showLoading();var type=$(this).parent().attr('data-type');console.log('type',type);var id_purhase=$(this).parent().attr('id');_section=id_purhase;_params={type:type};_getSectionContent();});$('.membership-panel-body').on('click','.bt-close-section',function(){_section=$(this).attr('data-section');_showContent();});$('.membership-panel-body').on('submit','#form-member-profile',function(event){event.preventDefault();var formData=$('#form-member-profile').serializeArray();$.ajax({url:'/membership/save-profile',type:'POST',dataType:'json',data:formData,success:function(){_section='profile';delete _content[_section];_getSectionContent();},error:function(response){console.log(response);}});});function _requestContent(){console.log('function _requestContent()');var data={section:_section,id_layout:Publicar.getOptions('idLayout')};$.ajax({url:'/membership/get-content',type:'POST',dataType:'json',data:data,success:function(response){if(response.success){console.log('response.content',response.content);_addContent(response.content);_showContent();helper.hideModal();}else{window.location='./';}},error:function(response){console.log(response);}});};function _getSectionContent(){if(typeof _content[_section]=='undefined'){_requestContent();}else{_showContent();}};function _addContent(content){console.log(content);if(content){_content[_section]=content;}};function _showContent(){$('.membership-panel-body').html(_content[_section]);};function _showLoading(){var loading=$('<div>').css({'font-size':'30px','text-align':'center','color':'gray','padding-top':'20%'});helper.showModal();$('.membership-panel-body').html(loading);};})();;function Uploader(opt){var _self=this;var _input;var _btn;var _files=new Array();var _options={style:'normal',method:'POST',action:'upload.php',multiple:true,auto:true,accept:'image/jpeg, image/gif,image/png, image/svg, image/svg+xml',max_size:2097152,click:function(){},add:function(){},success:function(){},fail:function(){},error:function(){},after_success_animation:function(){},after_fail_animation:function(){},after_error_animation:function(){}};$.extend(_options,opt?opt:{});this.option=function(key,value){if(value){_options[key]=value;if(key=='accept'){_input.attr('accept',value);}}else{return _options[key];}};this.getBtnUploader=function(){return _btn;};this.sendRequest=function(){for(var index in _files){_files[index].sendRequest();}};this.addFile=function(file){if(file instanceof File){_files.push(new Uploader_File(file,_self));}};this.getFiles=function(){return _files;};this.on=function(event,func){_options[event]=func;};this.trigger=function(event,data){_options[event](data);};_input=$('<input>').attr({type:'file',name:'files[]',accept:_options.accept}).on('change',function(){for(var index in this.files){_self.addFile(this.files[index]);}
$(this).val('');if(_options.auto){_self.sendRequest();}});var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0){_input.css({display:'none'}).appendTo('body');}
if(_options.multiple){_input.prop("multiple",true);}
_btn=$('<button>').on('click',function(){_self.trigger('click');_input.trigger('click');});if(_options.style=='normal'){_btn.addClass('btn btn-info btn-uploader').html('<i class="fa fa-cloud-upload"></i> '+Translate.get('upload'));}else if(_options.style=='small'){_btn.addClass('btn btn-info btn-uploader sm').html('<i class="fa fa-paperclip"></i>');}};var Publish_Charts=new(function(){var _self=this;function _getOptions(configs){var type=configs.type,obj={};obj.maintainAspectRatio=false;obj.responsive=true;if(type.indexOf('doughnut')>-1||type.indexOf('pie')>-1){obj.animation={animateScale:true,animateRotate:true};}
else if(type.indexOf('horizontalBar')>-1){obj.scales={xAxes:[{ticks:{beginAtZero:true}}]};}
else{obj.scales={yAxes:[{ticks:{beginAtZero:true}}]};}
return obj;}
function _getElement(content,chart){if(chart)
chart.destroy();$(content).html('<canvas style="width:100%; height:100%"></canvas>');return $(content).find('canvas');}
this.getConfigs=function(configs){return _prepareConfig(configs);};function _objecToArray(obj){var arr=[];for(var index in obj){arr.push(obj[index]);}
return arr;}
function _getLabels(labels){if(!Array.isArray(labels))
return _objecToArray(labels);return labels;}
function _getDatasets(properties){if(Array.isArray(properties))
return properties;var arr=[];for(var index in properties){(function(data){var datasets={};var arrays=['data','backgroundColor','borderColor','hoverBackgroundColor','hoverBorderColor'];var args=['label','fill','pointBorderWidth','lineTension','pointBorderColor','pointBackgroundColor','pointHoverBorder','pointHoverBackgroundColor'];for(var x=0;x<arrays.length;x++){if(typeof data[arrays[x]]!='undefined'){if(!Array.isArray(data[arrays[x]]))
datasets[arrays[x]]=_objecToArray(data[arrays[x]]);else
datasets[arrays[x]]=data[arrays[x]];}}
for(var x=0;x<args.length;x++){if(typeof data[args[x]]!='undefined')
datasets[args[x]]=data[args[x]];}
arr.push(datasets);})(properties[index]);}
return arr;}
function _prepareConfig(configs){var props={};props.data={labels:_getLabels(configs.data.labels),datasets:_getDatasets(configs.data.datasets)};props.options=_getOptions(configs);props.type=configs.type;return props;}
this.create=function(content,configs,chart){configs=_prepareConfig(configs);var element=_getElement(content,chart);chart=new Chart(element.get(0),configs);return chart;};})();;var Publish_HoverEvents=function(target){this.buildTextStyleHover=function(target){var _target=target;var _content=$(_target).find('.link-hover');var _item=Publication_Config_Items.getConfig(_target.id);var _configs=_item.config;_content.css('color',_configs.textColor);switch(_configs.theme){case'1':_content.find('span').css('color',_configs.additionalTextColor);_content.on('mouseleave',function(){$(this).css({color:_configs.textColor});}).on('mouseover',function(){$(this).css({color:_configs.textHoverColor});});break;case'3':_content.find('span').on('mouseleave',function(){$(this).css({color:_configs.textColor});}).on('mouseover',function(){$(this).css({color:_configs.textHoverColor});});break;case'4':_content.find('span').css('color',_configs.textColor);_content.on('mouseleave',function(){$(this).find('span').css('color',_configs.textColor);}).on('mouseover',function(){$(this).find('span').css('color',_configs.textHoverColor);});break;case'6':_content.find('span').css('color',_configs.additionalTextColor);_content.on('mouseleave',function(){$(this).css({color:_configs.textColor});}).on('mouseover',function(){$(this).css({color:_configs.textHoverColor});});break;case'7':_content.css('border-color',_configs.textColor);_content.find('span').css('color',_configs.textColor);_content.on('mouseleave',function(){$(this).css({color:_configs.textColor});_content.find('span').css('color',_configs.textColor);}).on('mouseover',function(){$(this).css({color:_configs.textHoverColor});_content.find('span').css('color',_configs.textHoverColor);});break;case'8':_content.on('mouseleave',function(){$(this).css({color:_configs.textColor,});}).on('mouseover',function(){$(this).css({color:'transparent'});});break;case'9':_content.on('mouseleave',function(){$(this).css({color:_configs.textColor,});_content.find('span').css('color',_configs.textColor);}).on('mouseover',function(){$(this).css({color:'transparent'});_content.find('span:first-child').css('color',_configs.textHoverColor);_content.find('span:last-child').css('color',_configs.textHoverColor2);});break;}
_content.on('click',function(){Publish_Link.call(_item.link)});_content.css('cursor','pointer');}
this.buildCircleBoxHover=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);var _link=$(target).find('a');_link.on('click',function(){Publish_Link.call(_item.link)});_link.css('cursor','pointer');};this.buildTextButtonHover=function(target){var _target=target;var _theme=$(_target).find('nav').attr('class');var _item=Publication_Config_Items.getConfig(_target.id);var _link=$(target);switch(_theme){case'button-text-hover-theme-5':$(_target).find('nav').on('mouseover',function(){$(_target).find('.'+_theme+'-front').addClass(_theme+'-front-hover')}).on('mouseleave',function(){$(_target).find('.'+_theme+'-front').removeClass(_theme+'-front-hover')});break;default:$(_target).find('nav').on('mouseover',function(){$(_target).find('.'+_theme+'-back').addClass(_theme+'-back-hover')}).on('mouseleave',function(){$(_target).find('.'+_theme+'-back').removeClass(_theme+'-back-hover')});if(_theme==='button-text-hover-theme-4')_link=$(target).find(('.'+_theme));break;}
_link.on('click',function(){Publish_Link.call(_item.link)});_link.css('cursor','pointer');}
this.buildBoxHover=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);var _link=$(target).find('a');_link.on('click',function(){Publish_Link.call(_item.link)});}
this.buildIconHover=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);var _link=$(target).find('a');_link.on('click',function(){Publish_Link.call(_item.container_link)});var configs=_item.configs;var content=$(_target).find('.content');var theme=content.find('div').first();var themeFront=content.find('div')[1];var themeBack=content.find('div')[2];var ancora=content.find('a');theme.on('click',function(){Publish_Link.call(_item.container_link)});if(configs.iconTheme<3||configs.iconTheme>5){$(themeFront).css({background:configs.backgroundColor});$(themeFront).find('a').css({boxShadow:'0 0 0 3px '+configs.colorBorder});}else{$(themeFront).css({background:'transparent',});$(themeBack).css({background:configs.backgroundColor});$(themeFront).find('a').css({boxShadow:'0 0 0 3px '+configs.colorBorder});}
if(configs.iconTheme>=3&&configs.iconTheme<=5){$(themeFront).mouseover(function(){$(themeFront).addClass(configs.theme+'-front-hover');$(themeFront).find('a').css({color:configs.iconColorHover,});$(themeBack).addClass('hover-icon').addClass(configs.theme+'-back-hover');});$(themeFront).mouseleave(function(){$(themeFront).removeClass(configs.theme+'-front-hover');$(themeFront).find('a').css({color:configs.iconColor,});$(themeBack).removeClass('hover-icon').removeClass(configs.theme+'-back-hover');});}
else{$(themeBack).mouseover(function(){$(themeFront).css({background:configs.backgroundIconHover,});$(themeFront).find('a').css({color:configs.iconColorHover,});$(themeFront).addClass(configs.theme+'-front-hover');$(themeBack).addClass('hover-icon').addClass(configs.theme+'-back-hover');switch(configs.iconTheme){case 1:case 2:$(themeFront).find('a').css({boxShadow:'0 0 0 0px '+configs.colorBorder,});$(themeBack).css({boxShadow:'0 0 0 4px '+configs.colorBorder});break;case 7:case 8:$(themeFront).find('a').css({color:configs.iconColorHover,boxShadow:'0 0 0 0px '+configs.colorBorder});$(themeBack).css({border:'4px dashed '+configs.colorBorder});break;case 9:case 10:case 11:case 12:$(themeFront).find('a').css({boxShadow:'0 0 0 0px '+configs.colorBorder,});$(themeFront).css({boxShadow:'0 0 0 10px '+configs.colorBorder,});break;case 13:$(themeFront).find('a').addClass('fa-spin');var back=$(themeBack).addClass('theme-13-back-hover').empty();if($(themeBack).val()===''){$('<a>').css('line-height','20px').css('font-size','20px').css('margin-top','13px').addClass('icon').addClass('fa-spin').appendTo(back);}
break;case 14:case 15:$(themeBack).css({boxShadow:'3px 3px '+configs.colorBorder});break;case 16:case 18:$(themeFront).find('a').css({boxShadow:'0 0 0 0px '+configs.colorBorder});break;case 17:$(themeFront).find('a').css({boxShadow:'0 0 0 10px '+configs.colorBorder});break;}});$(themeBack).mouseleave(function(){$(themeFront).css({background:configs.backgroundColor,});$(themeFront).find('a').css({color:configs.iconColor,});$(themeFront).removeClass(configs.theme+'-front-hover');$(themeBack).removeClass('hover-icon').removeClass(configs.theme+'-back-hover');switch(configs.iconTheme){case 1:case 2:$(themeFront).find('a').css({boxShadow:'0 0 0 3px '+configs.colorBorder,});$(themeBack).css({boxShadow:'0 0 0 0px '+configs.colorBorder});break;case 7:case 8:$(themeFront).find('a').css({color:configs.iconColor,boxShadow:'0 0 0 4px '+configs.colorBorder});$(themeBack).css({border:'0px dashed '+configs.colorBorder});break;case 9:case 10:case 11:case 12:$(themeFront).find('a').css({boxShadow:'0 0 0 3px '+configs.colorBorder,});$(themeFront).css({boxShadow:'0 0 0 0px '+configs.colorBorder,});break;case 13:$(themeFront).find('a').removeClass('fa-spin');break;case 14:case 15:$(themeBack).css({boxShadow:'0px 0px '+configs.colorBorder});case 16:$(themeFront).find('a').css({boxShadow:'0 0 0 0px '+configs.colorBorder});break;case 17:$(themeFront).find('a').css({boxShadow:'0 0 0 0px '+configs.colorBorder});break;}});}}
this.buildAnimationBoxHover=function(target){var _target=target;var _item=Publication_Config_Items.getConfig(_target.id);var _link=$(target).find('a');var _configs=_item.configs;var _animationBox=$(target).find('ul');_link.on('click',function(){Publish_Link.call(_item.link)});_link.css('cursor','pointer');_link.find('span').css('background-image','url('+_configs.img+')');var _animationTheme=Base_Themes_Animation_Box.getThemes();_animationBox.iconmenu(_animationTheme['theme-'+_configs.theme].animationHover,_configs);};};;var Publication_Builder=new(function(){var _self=this;this.buildSocialNetwork=function(page){if(!page){page=$('.body').get(0);}
if($(page).find('.element > [data-item="GoogleMais"]').length){$.getScript("https://apis.google.com/js/plusone.js");}
if(typeof FB!='undefined'){FB.XFBML.parse();}};this.buildFranquiaMenuUsuario=function(nodes){var auth=Publicar.getOptions('authFranchise');var lang=Publicar.getOptions('lang');nodes.each(function(){var menu=new Publish_FranquiaMenu(auth,this.tema,this.translation,lang);menu.appendTo(this);});};this.buildBotaoLoginUsuario=function(nodes){if(nodes.length>0){Publish_Translate.get('loginMenu',function(data){var auth=Publicar.getOptions('authentication');nodes.each(function(){var config=Publication_Config_Items.getConfig(this.id);if(config){if(typeof config.link=='string'){config.link=$.parseJSON(config.link)[0];}}
if(config==null){config={};config.link=$.parseJSON($(this).attr('data-address'));config.theme=$(this).attr('data-theme')}
$(this).empty().append(new Publish_BuildLoginMenu(auth,config.theme,data,config.link,config.password));});});}};this.buildFranquiaTemplates=function(nodes){var requestQuery=Publicar.getOptions('requestQuery');var lang=Publicar.getOptions('lang');nodes.each(function(){var node=this;var obj_handle=new Publish_FranquiaTemplate({tema:this.tema,lang:lang,categoria:(requestQuery.cat||'')});obj_handle.load(function(html){html.appendTo(node);})});};this.buildFranquiaRecursos=function(nodes){var lang=Publicar.getOptions('lang');nodes.each(function(){var list=new Publish_FranquiaRecurso({tema:this.tema,lang:lang});list.appendTo(this);});};this.buildFranquiaPlanos=function(nodes){var lang=Publicar.getOptions('lang');nodes.each(function(){var list=new Publish_FranquiaPlano({tema:this.tema,lang:lang});list.appendTo(this);});};this.buildTimer=function(nodes){nodes.each(function(){var timer=new Publish_Timer();var configTimer=this.config;configTimer.identifier=this.id;timer.setConf(configTimer);var clock=timer.getClock();this.getTimer=function(){return timer;};$($(this).find('.container-clock').get(0)).empty();$($(this).find('.container-clock').get(0)).append(clock);});};this.buildReviews=function(nodes){nodes.each(function(){$(this).empty();omb_review.render(this);if(typeof $(this).attr('data-reload')!='undefined'&&$(this).attr('data-reload')=='true'){var divAtualizar=$('<div>').addClass("divAtualizar");var textoAtualizar=$('<p>').addClass("textoAtualizar").text("Auto Refresh").prependTo($(this));var labelAtualizar=$('<label>').addClass("switch").appendTo(divAtualizar);var inputAtualizar=$('<input>').attr('type','checkbox').appendTo(labelAtualizar);$('<div>').addClass("slider round").appendTo(labelAtualizar);(divAtualizar).prependTo($(this));var iframeElement=$(this).find('iframe').get(0)
function reloadInfiniteReview(id){setTimeout(function(){if(document.activeElement!==iframeElement&&$(inputAtualizar).is(':checked')){var f=document.getElementById(id);f.src=f.src;$(inputAtualizar).prop('checked',true);}else{$(inputAtualizar).prop('checked',false);}
reloadInfiniteReview(id);},3000)};reloadInfiniteReview($(this).find('iframe').get(0).id);}});};this.buildSkypeButton=function(nodes){var place=$('#place-frame-skype-call');if(place.length==0){place=$('<div>').attr('id','place-frame-skype-call').appendTo('body');}
place=place.get(0);nodes.each(function(){Skype.ui($.extend(this.configBTSkype,{"element":$(this).find('[data-item="SkypeCall"]').get(0),"placeFrame":place}));});};this.buildCustomHtml=function(nodes){nodes.each(function(){var objHTML=new Publish_CustomHTML();$(this).empty();objHTML.getNode().appendTo(this);var config=Publication_Config_Items.getConfig(this.id);objHTML.setType(config.type);objHTML.setHTML(config.html);objHTML.refresh();objHTML.resize($(this).width(),$(this).height());this.getInstance=function(){return objHTML;};});};this.buildGoogleMaps=function(selector){selector.each(function(){var place=$(this).children('[data-item]');var config=helper.clone(this.data);if(typeof google==='undefined'){helper.includeJavascript('//maps.googleapis.com/maps/api/js?key=AIzaSyBibP1ma0gUWZHZYSMEiiTB8Qp8FE6IbgA');setTimeout(function(){var map=new Publish_GoogleMaps(config);map.setEdicao(false);place.empty();$(place).append(map.getHTML());},5000);}else{var map=new Publish_GoogleMaps(config);map.setEdicao(false);place.empty();$(place).append(map.getHTML());}});};this.buildBarraSociais=function(selector){selector.each(function(){$(this).find('a').each(function(){var barraSociais=new Publish_BarraSociais(this);barraSociais.buildColor();});});};this.buildIcon=function(selector){selector.each(function(){Publish_Icon.buildIcon(this);});};this.buildPagSeguroLightBox=function(selector){selector.each(function(){$(this).on('submit',function(e){e.preventDefault();PagSeguroLightbox(this,{success:function(transactionCode){},abort:function(){}});return false;});});};this.buildShopify=function(context){if(!context){context=document.body;}
$(context).find('[name="element"][data-item^="Shopify"]').each(function(){Publish_Shopify_Factory.appendScript(this);});};this.buildTextAnimation=function(selector){selector.each(function(){var config=Publication_Config_Items.getConfig(this.id);$(this).empty();var strings=helper.normalizeArrayKeys(config.strings);$('<span>').css(config.styleText).typed($.extend({'strings':strings},config.configs)).appendTo($(this));if(config.configs.showCursor){$('<span>').css(config.styleText).addClass('typed-cursor').text(config.configs.cursorChar).appendTo($(this));}});};this.buildWordEffect=function(selector){selector.each(function(){var config=Publication_Config_Items.getConfig(this.id);var style=config.styleText;var phrases=helper.normalizeArrayKeys(config.strings);config=config.configs;var wordEffect=new Publish_WordEffect({autostart:true,phrases:phrases,delay:parseInt(config.delay),duration:parseInt(config.duration),repeat:config.repeat,in:config.effectIn,out:config.effectOut,fontSize:style['font-size'],fontFamily:style['font-family'],fontColor:style.color});$(this).empty();wordEffect.getContainer().appendTo(this);});};this.buildTwitter=function(selector){selector.each(function(){if(typeof twttr=='undefined'){helper.includeJavascript('https://platform.twitter.com/widgets.js');}else{if($(this).data('item')=='TwitterTimeline'){var content=$(this).find('>div');var data=Publication_Config_Items.getConfig(this.id);if(data&&data.config){content.empty();Publish_Twitter.createTimeLine(data.config).appendTo(content);}}
twttr.widgets.load(this);}});};var _dataMask={"mask_date_1":"00/00/0000","mask_date_2":"00/00/00","mask_time_1":"00:00:00","mask_time_2":"00/00/0000 00:00:00","mask_time_3":"00/00/00 00:00:00","mask_cpf":"000.000.000-00","mask_cnpj":"00.000.000/0000-00","mask_cep":"00.000-000","mask_phone_1":"0000-0000","mask_phone_2":"(00) 0000-0000","mask_phone_3":"(00) 00000-0000","mask_phone_4":"(000) 000-0000","mask_num":"0.000","mask_money":"0,00","mask_percent":"0,00%"};this.fixMaskForm=function(selector){try{$.each($(selector).find('input.form-control'),function(){$(this).unmask();});}catch(e){console.log(e);}
$.each($(selector).find('.has-mask'),function(){if($(this).attr('data-mask')&&$(this).attr('data-mask')!=''){$(this).mask(_dataMask[$(this).attr('data-mask')]);}});};this.buildInstagramFeed=function(selector){selector.each(function(){if(typeof HTML_Load!='undefined'){var device=HTML_Load.getConfig('device');}else{var device=Publicar.getOptions('device')}
var content=$(this).find('>div');helper.addLoadingModal(content);var feed=new Publish_Instagram_Feed(Publication_Config_Items.getConfig(this.id).config,device);feed.load(function(){helper.removeLoadingModal(content);feed.getHTML().appendTo(content);Publish_Instagram_Utility.fancybox(feed);});});};this.buildMailmkt=function(selector){selector.each(function selectorEach(key,value){var that=this;var config=Publication_Config_Items.getConfig(value.id);if(!config)
return;if(config.mailApi=='mautic'){Publish_Mailmkt_Mautic.normalizeFields($(value).find('form'));Publish_Mailmkt_Mautic.attachEvent($(value),config);}
if(config.mailApi=='aweber'&&config.urlRedirect){$(that).find('form').submit(function(e){e.preventDefault();this.submit();setTimeout(function(){location.href=config.urlRedirect;},500);});}});};this.buildGaleriaCarousel=function(selector){selector.each(function(){var content=$(this).find('[data-item]');var data=Publication_Config_Items.getConfig(this.id);var publish_carousel=new(Publish_CarouselGallery)();publish_carousel.attachEvent(data.config,content);});};this.buildImageEffect=function(selector){selector.each(function(){var image=new Publish_ImageEffect(this);image.buildImageEffect();});};this.buildCircleBoxHover=function(selector){selector.each(function(){var hover=new Publish_HoverEvents(this);hover.buildCircleBoxHover(this);});};this.buildStickyVideo=function(selector){selector.each(function(){var video=new Publish_StickyVideos(this);video.buildStickyVideo(this);});};this.buttonTextHover=function(selector){selector.each(function(){var hover=new Publish_HoverEvents(this);hover.buildTextButtonHover(this);});};this.buildTextStyleHover=function(selector){selector.each(function(){var hover=new Publish_HoverEvents(this);hover.buildTextStyleHover(this);});};this.buildSlideShare=function(selector){selector.each(function(){var hover=new SlideShareEvents(this);hover.buildSlideShare(this);});};this.buildLinkedin=function(selector){if(selector.length>0)
helper.includeJavascript('https://platform.linkedin.com/in.js');};this.buildAnchorMenu=function(selector){selector.each(function(){Publish_AnchorMenu.assign(this.id,this,Publication_Config_Items.getConfig(this.id).config)})};this.buildTagCloud=function(selector){selector.each(function(){var tagCloud=new Publish_Blog_TagCloud($(this).find('.content-tag-cloud'),Publication_Config_Items.getConfig(this.id));tagCloud.loadData();});};this.buildCategory=function(selector){selector.each(function(){var tagCloud=new Publish_Blog_Category($(this).find('.content-category'),Publication_Config_Items.getConfig(this.id));tagCloud.loadData();});};this.buildSearch=function(selector){selector.each(function(){new Publish_Blog_Search(this);})};this.buildDate=function(selector){selector.each(function(){var blogDate=new Publish_Blog_Date($(this).find('.content-dates'),Publication_Config_Items.getConfig(this.id));blogDate.loadData();});};this.buildSlider=function(selector){selector.each(function(){var blogSlider=new Publish_Blog_Slider($(this).find('.content-blog-slider'),Publication_Config_Items.getConfig(this.id));blogSlider.loadData();});};this.buildPosts=function(selector){selector.each(function(){var blogPosts=new Publish_Blog_Posts($(this).find('.content-posts'),Publication_Config_Items.getConfig(this.id));blogPosts.loadData();});};this.buildGallery=function(selector){selector.each(function(){var blogGallery=new Publish_Blog_Gallery($(this).find('.content-blog-gallery'),Publication_Config_Items.getConfig(this.id));blogGallery.loadData();});};this.buildCircleBoxHover=function(selector){selector.each(function(){var hover=new Publish_HoverEvents(this);hover.buildCircleBoxHover(this);});};this.buildIconHover=function(selector){selector.each(function(){var hover=new Publish_HoverEvents(this);hover.buildIconHover(this);});};this.buildAnimationBoxHover=function(selector){selector.each(function(){var hover=new Publish_HoverEvents(this);hover.buildAnimationBoxHover(this);});};this.buildMembership=function(selector){selector.each(function(){var config=Publication_Config_Items.getConfig(selector[0].id);var content=selector.find('.contentMemberShip')[0];require2(['../app_current/js/editor-html/Menu/Add/Membership/Builder'],function(membership){membership.create(config.config,config.order,config.tab);menu=membership.getMembershipMenu();membershipContentTabs=membership.getMembershipContent();menu.appendTo(content);membershipContentTabs.appendTo(content);Publish_MemberShip.attachEvent(content,config.config,config.colors);new SmoothScroll(membership.getMembershipMenu()[0]);Publish_MemberShip.applyConfigColors(selector[0],config.colors);});});};this.attachPaginatorFeedNews=function(selector){if(selector.length>0){var config=Publication_Config_Items.getConfig(selector[0].id);selector.find('.blog-paginator').each(function(){var blogPaginator=new Publish_Blog_AttachPaginator(this,config,selector);blogPaginator.attachPages();});}};this.reloadNews=function(selector){if(selector.length>0){var siteName=Publicar.getOptions('sitename');selector.each(function(){var _containerPostA=$(this).find('a');$.each(_containerPostA,function(index,element){var href=$(element).attr('href');if(href.indexOf('/'+siteName)==-1){$(element).attr('href','/'+siteName+href);}});});}}
this.builderCharts=function(selector){selector.each(function(){var configs;if(typeof Publication_Config_Items=='undefined')
configs=this.getInstance().getConfigs();else
configs=Publication_Config_Items.getConfig(this.id).configs;Publish_Charts.create($(this).find('[data-item]'),configs);});};this.buildReviewProgressbar=function(selector){selector.each(function(){if(typeof Publication_Config_Items!='undefined'){var properties=Publication_Config_Items.getConfig(this.id).properties;if(!properties)
return;var element=$(this).find('.content-element');Publish_ProgressBarReview.create({container:element.get(0),config:properties.config,structure:properties.structure});}});};this.buildBoxHover=function(selector){selector.each(function(){var hover=new Publish_HoverEvents(this);hover.buildBoxHover(this);});};this.buildTagFName=function(selector){selector.each(function(){var html=$(this).find('span').get(0);if(Publicar.getOptions('authData')&&Publicar.getOptions('authData')['fname']){var configs=Publication_Config_Items.getConfig(this.id).configs;$(this).css('display','initial');$(html).html(configs.beforeText+Publicar.getOptions('authData')['fname']+configs.afterText);}else{$(html).empty();}});};this.buildDrippingMenu=function(selector){for(var i=0;i<selector.length;i++){var container=$(selector[i]);var items=Publication_Config_Items.getConfig(container.attr('id')).items;var configs=Publication_Config_Items.getConfig(container.attr('id')).configs;var burguer=Publication_Config_Items.getConfig(container.attr('id')).burguer;var device=Publicar.getOptions('device');var menu=DrippingMenuRender.render(items,container.attr('data-item'),configs,container.attr('id'));var content=container.find('div').get(0);$(content).empty();if(device==='desktop'){menu.appendTo(content);}else if(burguer[device]===true){var div_mobile=$('<div>').attr('data-item','Menu_Mobile').addClass('menu-mobile');$('<button>').attr('role','nav').addClass('btn btn-default btn-menu-mobile').html('<i class="fa fa-bars"></i>').appendTo(div_mobile);menu.removeClass('font_0 color_0 Menu');menu.addClass('items-list mobile');$(content).attr('data-item','DrippingMenu');menu.appendTo(div_mobile);div_mobile.appendTo(content);Publish_Menu.attachBtnMenuMobileEvent($(div_mobile));}else{menu.appendTo(content);}}};this.buildCouponAmazonApp=function(selector){for(var i=0;i<selector.length;i++){var container=$(selector[i]);var configs=Publication_Config_Items.getConfig(container.attr('id')).configs;var link=Publication_Config_Items.getConfig(container.attr('id')).link;container.find('span').on('mouseover',function(){$(this).css({color:configs['colorHover']});}).on('mouseleave',function(){$(this).css({color:configs['color']});});var couponCode=Publish_CouponAmazon_Render.getCoupon(configs.couponList);if(couponCode=='false'){$(container).find("[data-item='couponCode']").text(configs.msg);$(container).find('i').css('visibility','hidden');}else{$(container).find("[data-item='couponCode']").text(couponCode);$(container).find('i').css('visibility','visible');}
$(container).find('i').on('click',function(){var copText=$('span[data-item="couponCode"]').text();var inputTemp=$("<input>");$(container).append(inputTemp);inputTemp.val(copText).select();document.execCommand("copy");inputTemp.remove();});$(container).find("[data-item='couponCode']").on('click',function(){Publish_Link.call(link)});}};this.buildLinhaHorizontal=function(selector){selector.each(function(){var top=parseInt($(this).css('top'));$(this).css({top:top+5+'px'})});};this.buildLinhaVertical=function(selector){selector.each(function(){var left=parseInt($(this).css('left'));$(this).css({left:left+5+'px'})});};this.buildZoom=function(){if(Publicar.getOptions('device')==='desktop')
return;function _getWidth(){var width=(screen.width>window.innerWidth)?screen.width:window.innerWidth;return width/helper.getDeviceWidth();}
console.log(screen.width);console.log(window.innerWidth);Main_Body.style.zoom=_getWidth();};})();var Main_Body=document.getElementById('body');window.addEventListener("resize",function(){Publication_Builder.buildZoom();});;var Menu_Parallax_Effect_Header=new(function(){var _self=this;var _target;var _elemId;var _popUp;var _content;var _column_left;var _column_right;var _image_preview;var _configContent;var _containerConfig;var _image;var _inputEnableParallax;var _inputEnableTablet;var _inputEnableMobile;var _imageBackgroundParallax;var _imageBackgroundConfigParallax;var _configs;var _containerApply,_configsApply;this.setTarget=function(target){_target=target.getInstance();_elemId=$(target).attr('id');};this.getTarget=function(){return _target;};this.show=function(){_configs=helper.clone(_target.getConfig());if(!_popUp){_createPopUp();_createContent();}
_popUp.show();};function _createPopUp(){_popUp=PopUp.getInstance('parallax-effect-header');_popUp.setTitle(Translate.get('parallax-effect-header'),true);_popUp.setDimension(600);_popUp.onHide=function(){_popUp.clear();_popUp=null;};_popUp.onShow=function(){};var btnConfirm=$('<button>').attr({type:'button'}).on('click',function(){_confirm();}).css({float:'right'}).text(Translate.get('confirmar')).addClass('btn btn-small btn-primary');var btnCancel=$('<button>').attr({type:'button'}).on('click',function(){_popUp.hide();}).text(Translate.get('cancelar')).css({float:'right',marginRight:'10px'}).addClass('btn btn-small btn-default');_popUp.addBottom(btnConfirm);_popUp.addBottom(btnCancel);}
function _confirm(){_configs.parallaxEffectHandler=_inputEnableParallax.is(':checked');_configs.parallaxEffectOnTablet=_inputEnableTablet.is(':checked');_configs.parallaxEffectOnMobile=_inputEnableMobile.is(':checked');_target.setConfig(_configs);Property_Controller.addRootChange(_elemId);_popUp.hide();}
function _createContent(){_content=$('<div>').addClass('container-fluid');_configContent=$('<div>').addClass('col-sm-12').appendTo(_content);_containerConfig=$('<div>').addClass('col-sm-12').appendTo(_content);_column_left=$('<div>').addClass('col-sm-6').appendTo(_content);_column_right=$('<div>').addClass('col-sm-6').appendTo(_content);_image_preview=$('<div>').addClass('col-sm-12').appendTo(_content);_createContentConfigs();_createContainerConfigs();_createColumnLeftConfigs();_createColumnRightConfigs();_createImagePreview();_setImagePreview();_popUp.setContent(_content);}
function _createContentConfigs(){var rowEffects=$('<div>').addClass('row').appendTo(_configContent);var checkBoxes=$('<div>').addClass('checkbox').appendTo(rowEffects);var lblEnablePin=$('<label>').text(Translate.get('enable-sticky-on-scroll-effect')).appendTo(checkBoxes);_inputEnableParallax=$('<input>').attr({type:'checkbox',value:1}).prependTo(lblEnablePin);_inputEnableParallax.prop('checked',helper.fixBoolean(_configs.parallaxEffectHandler));_inputEnableParallax.click(function(){_configs.parallaxEffectHandler=!_configs.parallaxEffectHandler;_setImagePreview();});}
function _createContainerConfigs(){var msgClose=$('<button>').addClass('close').attr({'data-dismiss':'alert',areaLabel:'Close'}).append($('<i>').addClass('fa fa-close'));$('<div>').addClass('col-sm-12 alert alert-danger alert-dismiss').append(msgClose).append(Translate.get('background-size-mobile-tablet')).appendTo(_containerConfig);}
function _createColumnLeftConfigs(){var rowEffects=$('<div>').addClass('row').appendTo(_column_left);var checkBoxes=$('<div>').addClass('checkbox').appendTo(rowEffects);var lblEnableTabletLabel=$('<label>').text(Translate.get('enable-sticky-on-tablet-effect')).appendTo(checkBoxes);_inputEnableTablet=$('<input>').attr({type:'checkbox',value:1}).prependTo(lblEnableTabletLabel);_inputEnableTablet.prop('checked',helper.fixBoolean(_configs.parallaxEffectOnTablet));_inputEnableTablet.on('click',function(){_configs.parallaxEffectOnTablet=!_configs.parallaxEffectOnTablet;});_imageBackgroundParallax=$('<button>').attr({type:'button'}).on('click',function(){var identifier=_target.getProperty().getID();if(Base_Files_Controller.getIdentifier()==identifier){return;}
Base_Files_Controller.trigger('cancel');Base_Files_Controller.on('cancel',function(file){}).on('select',function(file){}).on('confirm',function(file){if(file){_configs.parallaxImage=file.getSource();_target.setConfig(_configs);Property_Controller.addRootChange(_elemId);_setImagePreview();}}).setConfig({identifier:identifier,module:'Backgrounds',uploadType:'image'}).show();}).css("margin-bottom",'5%').text(Translate.get('change-image')).addClass('btn btn-small btn-primary btn-block');_imageBackgroundParallax.appendTo(_column_left);}
function _createColumnRightConfigs(){var rowEffects=$('<div>').addClass('row').appendTo(_column_right);var checkBoxes=$('<div>').addClass('checkbox').appendTo(rowEffects);var lblEnableTabletMobileLabel=$('<label>').text(Translate.get('enable-sticky-on-mobile-effect')).appendTo(checkBoxes);_inputEnableMobile=$('<input>').attr({type:'checkbox',value:1}).prependTo(lblEnableTabletMobileLabel);_inputEnableMobile.prop('checked',helper.fixBoolean(_configs.parallaxEffectOnMobile));_inputEnableMobile.on('click',function(){_configs.parallaxEffectOnMobile=!_configs.parallaxEffectOnMobile;});_imageBackgroundConfigParallax=$('<button>').attr({type:'button'}).on('click',function(){event.stopPropagation();Background_Config_Panel.setOptions(['dimension','repeat','position'],_configs.parallaxBgOptions,function(data){_configs.parallaxBgOptions=$.extend(_configs.parallaxBgOptions,data);});Background_Config_Panel.show();}).css("float",'right').text(Translate.get('configure-background')).addClass('btn btn-small btn-primary btn-block');_imageBackgroundConfigParallax.appendTo(_column_right);}
function _createImagePreview(){var _preview=$('<div>').appendTo(_containerConfig);var center=$('<center>').appendTo(_image_preview);_image=$('<img>').addClass('edit-parallax-header-image-preview img-responsive').attr({title:'Image Preview',alt:'Image Preview'}).appendTo(center);}
function _setImagePreview(){if(_configs.parallaxEffectHandler){_containerConfig.show();_column_right.show();_column_left.show();_image_preview.show();if(_configs.parallaxImage){_image.attr('src',_configs.parallaxImage);_image.css('max-height','350px');_image.css('height','auto');_image.css('width','auto');}}else{_containerConfig.hide();_column_right.hide();_column_left.hide();_image_preview.hide();}}
this.setEffectParallax=function(headerElement){function verifyToApply(){if(typeof HTML_Load!=='undefined'){if(HTML_Load.isPreview()){_containerApply=(helper.getInstanceContainer(headerElement));_configsApply=_containerApply.getConfig();return true;}}else{if(typeof Publicar!=='undefined'){_containerApply=helper.getContainer(headerElement);_configsApply=Publication_Config_Items.getConfig(_containerApply.id).configs;return true}}}
if(verifyToApply()){function applyonTablet(){return _configsApply.parallaxEffectOnTablet;}
function applyonMobile(){return _configsApply.parallaxEffectOnMobile;}
function applyParallax(){var header=$(headerElement);header.css('height',$(header).css('height')*2);var parent=header.parent();var div=$('<div>').addClass($(header).attr('data-item')+'-paralax-div');if(!parent.hasClass(header.attr('data-item')+'-paralax-div')){var newHeader=$('<div>');header.css('width',(helper.getDevice()==='desktop'?'100%':helper.getDeviceSize()+'px'));(helper.getDevice()!=='desktop'?newHeader.css({'background-size':'cover','background-position':'center'}):newHeader.css(_configsApply.parallaxBgOptions));newHeader.css({'background-image':'url("'+_configsApply.parallaxImage+'")','height':header.css('height'),'width':(helper.getDevice()==='desktop'?'100%':helper.getDeviceSize()+'px'),'z-index':'100  ','position':'absolute'});div.css('height',$(header).css('height')*2);div.appendTo(parent);newHeader.appendTo(div);header.appendTo(div);newHeader.css('position','absolute');var base=$('.base-body').get(0);$(base).css('top',parseInt(header.css('height'))*2+'px');var elemOriginalTop=newHeader.offset().top;if(helper.getDevice()!=='desktop'){var elemOriginalLeft=newHeader.offset().left;}
if(typeof Publicar!=='undefined'){newHeader.css('width','100%');}
var elemOriginalBottom=elemOriginalTop+newHeader.height();if(typeof HTML_Load!=='undefined'&&HTML_Load.isPreview()){setTimeout(function(){var footer=$('.base-footer').get(0);var body=$('.body').get(0);$(footer).css('top',parseInt($(footer).css('top'))+parseInt(header.css('height'))+'px');$(body).css('height',parseInt($(body).css('height'))+parseInt(header.css('height'))+'px');},1000)}else{var footer=$('.base-footer').get(0);var body=$('.body').get(0);$(footer).css('top',parseInt($(footer).css('top'))+parseInt(header.css('height'))+'px');$(body).css('height',parseInt($(body).css('height'))+parseInt(header.css('height'))+'px');}
$(window).on('scroll.parallaxHeader-'+$(header).attr('id'),function(){var changedTop=$(window).scrollTop();if(changedTop>=elemOriginalTop&&changedTop<=elemOriginalBottom){newHeader.css('z-index','100');header.css({'position':'fixed','opacity':(changedTop-elemOriginalTop)/(elemOriginalBottom-elemOriginalTop)});if(helper.getDevice()!=='desktop'&&typeof HTML_Load!=='undefined'){header.css('left',elemOriginalLeft+'px');}}else{newHeader.css({'z-index':'auto','position':'relative'});header.css({'position':'relative','left':'0px'});if(helper.getDevice()!=='desktop'&&typeof HTML_Load!=='undefined'){header.css('left','0px');}}
if(changedTop<=elemOriginalTop){header.css('opacity',0);}});}else{var base=$('.base-body').get(0);$(base).css('top',(parseInt(header.css('height'))*2)+'px');}}
if(typeof _configsApply!=='undefined'&&typeof _configsApply.parallaxEffectHandler!=='undefined'&&_configsApply.parallaxEffectHandler){if(helper.getDevice()==='desktop'){applyParallax(headerElement);}else{if(helper.getDevice()==='tablet'){(applyonTablet()===true?applyParallax(headerElement):false)}else{(applyonMobile()===true?applyParallax(headerElement):false)}}}}}});;var helperDebugger=new(function(){this.do=function(attr){var ip=attr.ip,callback=attr.callback;var body_ip=$('body').attr('data-ip');if(typeof Publicar!=="undefined"){if(ip===body_ip){callback();}}};})();;var helperCripty=new(function(){this.decode=function(format,target){switch(format){case'base64':return atob(target);break;}};this.HexToRGB=function(hex){var hex=parseInt(((hex.indexOf('#')>-1)?hex.substring(1):hex),16);return{r:hex>>16,g:(hex&0x00FF00)>>8,b:(hex&0x0000FF)};};this.RGBToHex=function(rgb){rgb=rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(rgb&&rgb.length===4)?"#"+
("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+
("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+
("0"+parseInt(rgb[3],10).toString(16)).slice(-2):'';};this.toMD5=function(string){function RotateLeft(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits));}
function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&0x80000000);lY8=(lY&0x80000000);lX4=(lX&0x40000000);lY4=(lY&0x40000000);lResult=(lX&0x3FFFFFFF)+(lY&0x3FFFFFFF);if(lX4&lY4){return(lResult^0x80000000^lX8^lY8);}
if(lX4|lY4){if(lResult&0x40000000){return(lResult^0xC0000000^lX8^lY8);}else{return(lResult^0x40000000^lX8^lY8);}}else{return(lResult^lX8^lY8);}}
function F(x,y,z){return(x&y)|((~x)&z);}
function G(x,y,z){return(x&z)|(y&(~z));}
function H(x,y,z){return(x^y^z);}
function I(x,y,z){return(y^(x|(~z)));}
function FF(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function GG(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function HH(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function II(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function ConvertToWordArray(string){var lWordCount;var lMessageLength=string.length;var lNumberOfWords_temp1=lMessageLength+8;var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1%64))/64;var lNumberOfWords=(lNumberOfWords_temp2+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(string.charCodeAt(lByteCount)<<lBytePosition));lByteCount++;}
lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(0x80<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray;};function WordToHex(lValue){var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;WordToHexValue_temp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);}
return WordToHexValue;};function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}
else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}
else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;};var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;string=Utf8Encode(string);x=ConvertToWordArray(string);a=0x67452301;b=0xEFCDAB89;c=0x98BADCFE;d=0x10325476;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,0xD76AA478);d=FF(d,a,b,c,x[k+1],S12,0xE8C7B756);c=FF(c,d,a,b,x[k+2],S13,0x242070DB);b=FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);a=FF(a,b,c,d,x[k+4],S11,0xF57C0FAF);d=FF(d,a,b,c,x[k+5],S12,0x4787C62A);c=FF(c,d,a,b,x[k+6],S13,0xA8304613);b=FF(b,c,d,a,x[k+7],S14,0xFD469501);a=FF(a,b,c,d,x[k+8],S11,0x698098D8);d=FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);a=FF(a,b,c,d,x[k+12],S11,0x6B901122);d=FF(d,a,b,c,x[k+13],S12,0xFD987193);c=FF(c,d,a,b,x[k+14],S13,0xA679438E);b=FF(b,c,d,a,x[k+15],S14,0x49B40821);a=GG(a,b,c,d,x[k+1],S21,0xF61E2562);d=GG(d,a,b,c,x[k+6],S22,0xC040B340);c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);b=GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);a=GG(a,b,c,d,x[k+5],S21,0xD62F105D);d=GG(d,a,b,c,x[k+10],S22,0x2441453);c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);b=GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);a=GG(a,b,c,d,x[k+9],S21,0x21E1CDE6);d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);c=GG(c,d,a,b,x[k+3],S23,0xF4D50D87);b=GG(b,c,d,a,x[k+8],S24,0x455A14ED);a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);d=GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);c=GG(c,d,a,b,x[k+7],S23,0x676F02D9);b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);a=HH(a,b,c,d,x[k+5],S31,0xFFFA3942);d=HH(d,a,b,c,x[k+8],S32,0x8771F681);c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);a=HH(a,b,c,d,x[k+1],S31,0xA4BEEA44);d=HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);c=HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);d=HH(d,a,b,c,x[k+0],S32,0xEAA127FA);c=HH(c,d,a,b,x[k+3],S33,0xD4EF3085);b=HH(b,c,d,a,x[k+6],S34,0x4881D05);a=HH(a,b,c,d,x[k+9],S31,0xD9D4D039);d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);b=HH(b,c,d,a,x[k+2],S34,0xC4AC5665);a=II(a,b,c,d,x[k+0],S41,0xF4292244);d=II(d,a,b,c,x[k+7],S42,0x432AFF97);c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);b=II(b,c,d,a,x[k+5],S44,0xFC93A039);a=II(a,b,c,d,x[k+12],S41,0x655B59C3);d=II(d,a,b,c,x[k+3],S42,0x8F0CCC92);c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);b=II(b,c,d,a,x[k+1],S44,0x85845DD1);a=II(a,b,c,d,x[k+8],S41,0x6FA87E4F);d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);c=II(c,d,a,b,x[k+6],S43,0xA3014314);b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);a=II(a,b,c,d,x[k+4],S41,0xF7537E82);d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);c=II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);b=II(b,c,d,a,x[k+9],S44,0xEB86D391);a=AddUnsigned(a,AA);b=AddUnsigned(b,BB);c=AddUnsigned(c,CC);d=AddUnsigned(d,DD);}
var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase();};this.toBase64=function(str){var keyStr="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";var input=escape(str);var output="";var chr1,chr2,chr3="";var enc1,enc2,enc3,enc4="";var i=0;do{chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}
output=output+
keyStr.charAt(enc1)+
keyStr.charAt(enc2)+
keyStr.charAt(enc3)+
keyStr.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";}while(i<input.length);return output;};});